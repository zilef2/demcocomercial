import{q as j,l as B,Q as N,s as P,N as D,v as U,f as m,o as i,a as o,u as p,Z as A,w as f,b as t,x as c,e as _,t as n,z as h,c as g,g as E,F as v,p as F,y as q}from"./app-Cq1znuMy.js";import{_ as z}from"./AuthenticatedLayout-Bq4Td3tW.js";import{_ as G}from"./Breadcrumb-TEnZiU5P.js";import{_ as L}from"./TextInput-CxVKhdog.js";import{_ as M}from"./PrimaryButton-C4YOsuaB.js";import{_ as Q,r as T}from"./InfoButton-B0TBRaLt.js";import{_ as Z}from"./SelectInput-DjH0LW8I.js";import{_ as x}from"./DangerButton-BmGSuYS8.js";import{r as w,_ as H}from"./Pagination-BYYD9Bg-.js";import J from"./Create-B2Hm2_uP.js";import K from"./Edit-BiOMn2vM.js";import R from"./Delete-D4fFJBCF.js";import W from"./DeleteBulk-DPpTGMgE.js";import{_ as X}from"./Checkbox-BbUHU8JM.js";import Y from"./Permission-DmU0CvWH.js";import{r as $}from"./TrashIcon-BT-VIv2L.js";import"./index-Dwl7jS47.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./keyboard-BuN7yXbH.js";/* empty css                                              */import"./InputError-WpjbGGA7.js";import"./InputLabel-DT5ITww_.js";import"./Modal-qBkqJmba.js";import"./SecondaryButton-BnrCYek9.js";const ee={class:"space-y-4"},se={class:"px-4 sm:px-0"},te={class:"rounded-lg overflow-hidden w-fit"},le={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},re={class:"flex justify-between p-2"},oe={class:"flex space-x-2"},ae={class:"overflow-x-auto scrollbar-table"},ne={class:"w-full"},ie={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},de={class:"dark:bg-gray-900/50 text-left"},pe={class:"px-2 py-4 text-center"},ce={class:"flex justify-between items-center"},me={class:"flex justify-between items-center"},ue={class:"px-2 py-4"},fe={class:"flex justify-between items-center"},ye={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},he=["value"],ge={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},be={class:"whitespace-nowrap py-4 px-2 sm:py-3"},_e={class:"whitespace-nowrap py-4 px-2 sm:py-3"},we=["onClick"],ke=["onClick"],ve={key:2,class:"whitespace-nowrap py-4 px-2 sm:py-3"},xe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},$e={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Oe={class:"flex justify-center items-center"},Ce={class:"rounded-md overflow-hidden"},Se={class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},Xe={__name:"Index",props:{title:String,filters:Object,roles:Object,permissions:Object,breadcrumbs:Object,perPage:Number},setup(y){const{_:O,debounce:C,pickBy:S}=j,a=y,e=B({params:{search:a.filters.search,field:a.filters.field,order:a.filters.order,perPage:a.perPage},selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,permissionOpen:!1,role:null,dataSet:N().props.app.perpage}),b=r=>{e.params.field=r,e.params.order=e.params.order==="asc"?"desc":"asc"};P(()=>O.cloneDeep(e.params),C(()=>{let r=S(e.params);D.get(route("role.index"),r,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const I=r=>{var s;r.target.checked===!1?e.selectedId=[]:(s=a.roles)==null||s.data.forEach(d=>{e.selectedId.push(d.id)})},V=()=>{var r;((r=a.roles)==null?void 0:r.data.length)==e.selectedId.length?e.multipleSelect=!0:e.multipleSelect=!1};return(r,s)=>{const d=U("tooltip");return i(),m(v,null,[o(p(A),{title:a.title},null,8,["title"]),o(z,null,{default:f(()=>[o(G,{title:y.title,breadcrumbs:y.breadcrumbs},null,8,["title","breadcrumbs"]),t("div",ee,[t("div",se,[t("div",te,[c(o(M,{class:"rounded-none",onClick:s[0]||(s[0]=l=>e.createOpen=!0)},{default:f(()=>[_(n(r.lang().button.add),1)]),_:1},512),[[h,r.can(["create role"])]]),o(J,{show:e.createOpen,onClose:s[1]||(s[1]=l=>e.createOpen=!1),permissions:a.permissions,title:a.title},null,8,["show","permissions","title"]),o(K,{show:e.editOpen,onClose:s[2]||(s[2]=l=>e.editOpen=!1),role:e.role,permissions:a.permissions,title:a.title},null,8,["show","role","permissions","title"]),o(R,{show:e.deleteOpen,onClose:s[3]||(s[3]=l=>e.deleteOpen=!1),role:e.role,title:a.title},null,8,["show","role","title"]),o(W,{show:e.deleteBulkOpen,onClose:s[4]||(s[4]=l=>(e.deleteBulkOpen=!1,e.multipleSelect=!1,e.selectedId=[])),selectedId:e.selectedId,title:a.title},null,8,["show","selectedId","title"]),o(Y,{show:e.permissionOpen,onClose:s[5]||(s[5]=l=>e.permissionOpen=!1),role:e.role,title:a.title},null,8,["show","role","title"])])]),t("div",le,[t("div",re,[t("div",oe,[o(Z,{modelValue:e.params.perPage,"onUpdate:modelValue":s[6]||(s[6]=l=>e.params.perPage=l),dataSet:e.dataSet},null,8,["modelValue","dataSet"]),c((i(),g(x,{onClick:s[7]||(s[7]=l=>e.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:f(()=>[o(p($),{class:"w-5 h-5"})]),_:1})),[[h,e.selectedId.length!=0&&r.can(["delete role"])],[d,r.lang().tooltip.delete_selected]])]),a.numberPermissions>1?(i(),g(L,{key:0,modelValue:e.params.search,"onUpdate:modelValue":s[8]||(s[8]=l=>e.params.search=l),type:"text",class:"block w-3/6 md:w-2/6 lg:w-1/6 rounded-lg",placeholder:r.lang().placeholder.search},null,8,["modelValue","placeholder"])):E("",!0)]),t("div",ae,[t("table",ne,[t("thead",ie,[t("tr",de,[t("th",pe,[o(X,{checked:e.multipleSelect,"onUpdate:checked":s[9]||(s[9]=l=>e.multipleSelect=l),onChange:I},null,8,["checked"])]),s[15]||(s[15]=t("th",{class:"px-2 py-4 text-center"},"#",-1)),t("th",{class:"px-2 py-4 cursor-pointer",onClick:s[10]||(s[10]=l=>b("name"))},[t("div",ce,[t("span",null,n(r.lang().label.name),1),o(p(w),{class:"w-4 h-4"})])]),t("th",{class:"px-2 py-4 cursor-pointer",onClick:s[11]||(s[11]=l=>b("email"))},[t("div",me,[s[14]||(s[14]=t("span",null,"Guard",-1)),o(p(w),{class:"w-4 h-4"})])]),t("th",ue,n(r.lang().label.permission),1),t("th",{class:"px-2 py-4 cursor-pointer",onClick:s[12]||(s[12]=l=>b("updated_at"))},[t("div",fe,[t("span",null,n(r.lang().label.updated),1),o(p(w),{class:"w-4 h-4"})])]),s[16]||(s[16]=t("th",{class:"px-2 py-4 sr-only"},"Action",-1))])]),t("tbody",null,[(i(!0),m(v,null,F(y.roles.data,(l,k)=>(i(),m("tr",{key:k,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[t("td",ye,[c(t("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:V,value:l.id,"onUpdate:modelValue":s[13]||(s[13]=u=>e.selectedId=u)},null,40,he),[[q,e.selectedId]])]),t("td",ge,n(++k),1),t("td",be,n(l.name.replace(/_/g," ")),1),t("td",_e,n(l.guard_name),1),l.permissions.length==a.permissions.length?c((i(),m("td",{key:0,onClick:u=>(e.permissionOpen=!0,e.role=l),class:"whitespace-nowrap py-4 px-2 sm:py-3 cursor-pointer text-blue-600 dark:text-blue-400 font-bold underline"},[_(n(r.lang().label.all_permission),1)],8,we)),[[d,r.lang().tooltip.detail]]):l.permissions.length!=0?c((i(),m("td",{key:1,onClick:u=>(e.permissionOpen=!0,e.role=l),class:"whitespace-nowrap py-4 px-2 sm:py-3 cursor-pointer text-blue-600 dark:text-blue-400 font-bold underline"},[_(n(l.permissions.length)+" "+n(r.lang().label.permission),1)],8,ke)),[[d,r.lang().tooltip.detail]]):(i(),m("td",ve,n(r.lang().label.no_permission),1)),t("td",xe,n(l.updated_at),1),t("td",$e,[t("div",Oe,[t("div",Ce,[c((i(),g(Q,{type:"button",onClick:u=>(e.editOpen=!0,e.role=l),class:"px-2 py-1.5 rounded-none"},{default:f(()=>[o(p(T),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[h,r.can(["update role"])],[d,r.lang().tooltip.edit]]),c((i(),g(x,{type:"button",onClick:u=>(e.deleteOpen=!0,e.role=l),class:"px-2 py-1.5 rounded-none"},{default:f(()=>[o(p($),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[h,r.can(["delete role"])],[d,r.lang().tooltip.delete]])])])])]))),128))])])]),t("div",Se,[o(H,{links:a.roles,filters:e.params},null,8,["links","filters"])])])])]),_:1})],64)}}};export{Xe as default};
