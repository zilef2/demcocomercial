import{q as j,l as C,Q as B,s as D,N as U,v as A,f as l,o as s,a as m,u as c,Z as z,w as b,b as r,c as u,g as d,e as E,t as p,F as h,p as k,x as w,y as T,z as v}from"./app-Cq1znuMy.js";import{_ as q}from"./AuthenticatedLayout-Bq4Td3tW.js";import{_ as L}from"./Breadcrumb-TEnZiU5P.js";import{_ as M}from"./TextInput-CxVKhdog.js";import{_ as Q}from"./PrimaryButton-C4YOsuaB.js";import{_ as R}from"./SelectInput-DjH0LW8I.js";import{_ as Z}from"./DangerButton-BmGSuYS8.js";import{r as G,_ as H}from"./Pagination-BYYD9Bg-.js";import J from"./Create-B2EHYoHS.js";import K from"./Edit-D394-pl9.js";import W from"./Delete-XVFCwsuE.js";import{_ as X}from"./Checkbox-BbUHU8JM.js";import{_ as Y,r as F}from"./InfoButton-B0TBRaLt.js";import{n as x,f as I}from"./global-C5jYNk1l.js";import{r as ee}from"./TrashIcon-BT-VIv2L.js";import"./index-Dwl7jS47.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./keyboard-BuN7yXbH.js";/* empty css                                              */import"./InputError-WpjbGGA7.js";import"./InputLabel-DT5ITww_.js";import"./Modal-qBkqJmba.js";import"./SecondaryButton-BnrCYek9.js";/* empty css             */import"./vue-select.es-wsHHmxmz.js";/* empty css                   */import"./Add_Sub_equipos-h-xPCDm8.js";const te={class:"space-y-4"},se={class:"px-4 sm:px-0"},re={class:"rounded-lg overflow-hidden w-fit"},ae={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},oe={class:"flex justify-between p-2"},ne={class:"flex space-x-2"},ie={class:"overflow-x-auto scrollbar-table"},le={key:0,class:"w-full"},de={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},pe={class:"dark:bg-gray-900/50 text-left"},me={class:"px-2 py-4 text-center"},ce={key:0,class:"px-2 py-4"},ue=["onClick"],fe={class:"flex justify-between items-center"},ye={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},_e=["value"],be={key:0,class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3"},he={class:"flex justify-center items-center"},ge={class:"rounded-md overflow-hidden"},ke={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},we={class:"whitespace-nowrap py-4 px-2 sm:py-3"},ve={key:0},xe={key:1},Ie={key:2},Se={key:3},$e={key:4},Pe={key:5},Oe={class:"border-t border-gray-600"},Ve={key:0,class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3 text-center"},Ne={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},je={key:1,class:"text-center text-xl my-8"},Ce={key:0,class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},nt={__name:"Index",props:{fromController:Object,total:Number,filters:Object,breadcrumbs:Object,perPage:Number,title:String,numberPermissions:Number,losSelect:Object,titulos:Array},setup(f){const{_:S,debounce:$,pickBy:P}=j,o=f,e=C({params:{search:o.filters.search,field:o.filters.field,order:o.filters.order,perPage:o.perPage},Itemo:null,selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,deleteOpen:!1,dataSet:B().props.app.perpage}),O=n=>{e.params.field=n,e.params.order=e.params.order==="asc"?"desc":"asc"};D(()=>S.cloneDeep(e.params),$(()=>{let n=P(e.params);U.get(route("Item.index"),n,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const V=n=>{var a;n.target.checked===!1?e.selectedId=[]:(a=o.fromController)==null||a.data.forEach(_=>{e.selectedId.push(_.id)})},N=()=>{var n;return e.multipleSelect=((n=o.fromController)==null?void 0:n.data.length)===e.selectedId.length},y=[{order:"numero",label:"numero",type:"integer"},{order:"nombre",label:"nombre",type:"text"},{order:"descripcion",label:"descripcion",type:"text"},{order:"cantidad",label:"cantidad",type:"integer"},{order:"conteo_items",label:"conteo_items",type:"integer"},{order:"valor_unitario_item",label:"valor_unitario_item",type:"dinero"},{order:"valor_total_item",label:"valor_total_item",type:"dinero"},{order:"oferta_id",label:"oferta_id",type:"foreign",nameid:"ofertau"}];return(n,a)=>{const _=A("tooltip");return s(),l(h,null,[m(c(z),{title:o.title},null,8,["title"]),m(q,null,{default:b(()=>[m(L,{title:f.title,breadcrumbs:f.breadcrumbs,class:"capitalize text-xl font-bold"},null,8,["title","breadcrumbs"]),r("div",te,[r("div",se,[r("div",re,[n.can(["create Item"])?(s(),u(Q,{key:0,class:"rounded-none",onClick:a[0]||(a[0]=t=>e.createOpen=!0)},{default:b(()=>[E(p(n.lang().button.new),1)]),_:1})):d("",!0),n.can(["create Item"])?(s(),u(J,{key:1,numberPermissions:o.numberPermissions,titulos:y,show:e.createOpen,onClose:a[1]||(a[1]=t=>e.createOpen=!1),title:o.title,losSelect:o.losSelect},null,8,["numberPermissions","show","title","losSelect"])):d("",!0),n.can(["update Item"])?(s(),u(K,{key:2,titulos:y,numberPermissions:o.numberPermissions,show:e.editOpen,onClose:a[2]||(a[2]=t=>e.editOpen=!1),Itema:e.Itemo,title:o.title,losSelect:o.losSelect},null,8,["numberPermissions","show","Itema","title","losSelect"])):d("",!0),n.can(["delete Item"])?(s(),u(W,{key:3,numberPermissions:o.numberPermissions,show:e.deleteOpen,onClose:a[3]||(a[3]=t=>e.deleteOpen=!1),Itema:e.Itemo,title:o.title},null,8,["numberPermissions","show","Itema","title"])):d("",!0)])]),r("div",ae,[r("div",oe,[r("div",ne,[m(R,{modelValue:e.params.perPage,"onUpdate:modelValue":a[4]||(a[4]=t=>e.params.perPage=t),dataSet:e.dataSet},null,8,["modelValue","dataSet"])]),o.numberPermissions>1?(s(),u(M,{key:0,modelValue:e.params.search,"onUpdate:modelValue":a[5]||(a[5]=t=>e.params.search=t),type:"text",class:"block w-4/6 md:w-3/6 lg:w-2/6 rounded-lg",placeholder:"Nombre, codigo"},null,8,["modelValue"])):d("",!0)]),r("div",ie,[o.total>0?(s(),l("table",le,[r("thead",de,[r("tr",pe,[r("th",me,[m(X,{checked:e.multipleSelect,"onUpdate:checked":a[6]||(a[6]=t=>e.multipleSelect=t),onChange:V},null,8,["checked"])]),f.numberPermissions>1?(s(),l("th",ce,"Accion")):d("",!0),a[8]||(a[8]=r("th",{class:"px-2 py-4 text-center"},"#",-1)),(s(),l(h,null,k(y,t=>r("th",{class:"px-2 py-4 cursor-pointer",onClick:g=>O(t.order)},[r("div",fe,[r("span",null,p(n.lang().label[t.label]),1),m(c(G),{class:"w-4 h-4"})])],8,ue)),64))])]),r("tbody",null,[(s(!0),l(h,null,k(o.fromController.data,(t,g)=>(s(),l("tr",{key:g,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[r("td",ye,[w(r("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:N,value:t.id,"onUpdate:modelValue":a[7]||(a[7]=i=>e.selectedId=i)},null,40,_e),[[T,e.selectedId]])]),f.numberPermissions>1?(s(),l("td",be,[r("div",he,[r("div",ge,[w((s(),u(Y,{type:"button",onClick:i=>(e.editOpen=!0,e.Itemo=t),class:"px-2 py-1.5 rounded-none"},{default:b(()=>[m(c(F),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[v,n.can(["update Item"])],[_,n.lang().tooltip.edit]]),w((s(),u(Z,{type:"button",onClick:i=>(e.deleteOpen=!0,e.Itemo=t),class:"px-2 py-1.5 rounded-none"},{default:b(()=>[m(c(ee),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[v,n.can(["delete Item"])],[_,n.lang().tooltip.delete]])])])])):d("",!0),r("td",ke,p(++g),1),(s(),l(h,null,k(y,i=>r("td",we,[i.type==="text"||i.type==="string"?(s(),l("span",ve,p(t[i.order]),1)):d("",!0),i.type==="number"?(s(),l("span",xe,p(c(x)(t[i.order],0,!1)),1)):d("",!0),i.type==="dinero"?(s(),l("span",Ie,p(c(x)(t[i.order],0,!0)),1)):d("",!0),i.type==="date"?(s(),l("span",Se,p(c(I)(t[i.order],!1)),1)):d("",!0),i.type==="datetime"?(s(),l("span",$e,p(c(I)(t[i.order],!0)),1)):d("",!0),i.type==="foreign"?(s(),l("span",Pe,p((t==null?void 0:t[i==null?void 0:i.nameid])??""),1)):d("",!0)])),64))]))),128)),r("tr",Oe,[f.numberPermissions>1?(s(),l("td",Ve," - ")):d("",!0),a[9]||(a[9]=r("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"}," Total: ",-1)),r("td",Ne,p(o.total),1)])])])):(s(),l("h2",je,"Sin Registros"))]),o.total>0?(s(),l("div",Ce,[m(H,{links:o.fromController,filters:e.params},null,8,["links","filters"])])):d("",!0)])])]),_:1})],64)}}};export{nt as default};
