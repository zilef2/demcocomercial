import{q as U,l as z,Q as E,s as T,N as A,v as M,f as d,o as a,a as p,u as c,Z as Q,w as f,b as r,c as y,g as i,i as x,e as _,x as g,z as q,F as h,p as w,t as m,y as L,d as R}from"./app-BhGvptmL.js";import{_ as Z}from"./AuthenticatedLayout-CL8l85iP.js";import{_ as G}from"./Breadcrumb-u74U_Jre.js";import{_ as H}from"./TextInput-XsIzkty-.js";import{_ as O}from"./PrimaryButton-BkUg86Bs.js";import{_ as J}from"./DangerButton-rUt0gjYp.js";import{_ as K}from"./SelectInput-7A83KURJ.js";import{a as W,r as $,_ as X}from"./Pagination-BmLxT3rT.js";/* empty css             */import"./vue-select.es-CcZCZQ2N.js";/* empty css                   *//* empty css                                               */import Y from"./DeleteBulk-M0Jdwyor.js";import F from"./Delete-CCzAJvC6.js";import ee from"./Detalle-CEKRcy8e.js";import{_ as te}from"./Checkbox-CSTSBUgV.js";import{n as P,f as S}from"./global-Dn-lfq_U.js";import{r as re}from"./PencilIcon-KSwtZsAy.js";import"./index-B3YzOLPY.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./keyboard-qjXA3irW.js";import"./Toast-DwfMDwwm.js";/* empty css                                              */import"./Modal-CWveoFge.js";import"./SecondaryButton-sXq2m4Kv.js";const se={class:"space-y-4"},ae={class:"px-4 sm:px-0"},oe={class:"rounded-lg overflow-hidden w-fit"},le={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},de={class:"flex justify-between p-2"},ne={class:"flex space-x-2"},ie={class:"overflow-x-auto scrollbar-table"},pe={key:0,class:"w-full"},ce={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},me={class:"dark:bg-gray-900/50 text-left"},fe={class:"px-2 py-4 text-center"},ue={key:0,class:"px-2 py-4"},ye=["onClick"],be={class:"flex justify-between items-center"},_e={class:"px-2 py-4 cursor-pointer"},ge={class:"flex justify-between items-center"},he={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},ke=["value"],xe={key:0,class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3"},we={class:"justify-center items-center"},ve={class:"inline-flex rounded-md shadow-sm",role:"group"},Oe={class:"flex items-center"},$e=["onClick"],Pe={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Se={class:"whitespace-nowrap py-4 px-2 sm:py-3"},De={key:0},Ie={key:1},Ve={key:2},Ne={key:3},je={key:4},Be={key:5},Ce=["onClick"],Ue={class:"border-t border-gray-600"},ze={key:0,class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3 text-center"},Ee={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Te={key:1,class:"text-center text-xl my-8"},Ae={key:0,class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},ct={__name:"Index",props:{fromController:Object,total:Number,filters:Object,breadcrumbs:Object,perPage:Number,title:String,numberPermissions:Number,losSelect:Object},setup(u){const{_:D,debounce:I,pickBy:V}=U,n=u,e=z({params:{search:n.filters.search,field:n.filters.field,order:n.filters.order,perPage:n.perPage},DetalleOpen:!1,eldetalle:null,Ofertao:null,selectedId:[],multipleSelect:!1,deleteOpen:!1,deleteBulkOpen:!1,dataSet:E().props.app.perpage}),N=o=>{e.params.field=o,e.params.order=e.params.order==="asc"?"desc":"asc"};T(()=>D.cloneDeep(e.params),I(()=>{let o=V(e.params);A.get(route("Oferta.index"),o,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const j=o=>{var t;o.target.checked===!1?e.selectedId=[]:(t=n.fromController)==null||t.data.forEach(b=>{e.selectedId.push(b.id)})},B=()=>{var o;return e.multipleSelect=((o=n.fromController)==null?void 0:o.data.length)===e.selectedId.length},v=[{order:"codigo_oferta",label:"codigo_oferta",type:"text"},{order:"proyecto",label:"proyecto",type:"text"},{order:"TotalOferta",label:"TotalOferta",type:"dinero"},{order:"Userino",label:"user_id",type:"foreign",nameid:"Userino"},{order:"cargo",label:"cargo",type:"text"},{order:"empresa",label:"empresa",type:"text"},{order:"ciudad",label:"ciudad",type:"text"},{order:"fecha",label:"fecha",type:"date"}];function C(o){if(!o||!o.id){console.error("claseFromController no definido");return}window.open(route("Oferta.pdf",o.id),"_blank")}return(o,t)=>{const b=M("tooltip");return a(),d(h,null,[p(c(Q),{title:n.title},null,8,["title"]),p(Z,null,{default:f(()=>[p(G,{title:u.title,breadcrumbs:u.breadcrumbs,class:"capitalize text-xl font-bold"},null,8,["title","breadcrumbs"]),r("div",se,[r("div",ae,[r("div",oe,[o.can(["create oferta"])?(a(),y(c(x),{key:0,class:"rounded-none",href:"/NuevaOferta/1"},{default:f(()=>[p(O,{class:"rounded-none"},{default:f(()=>t[8]||(t[8]=[_(" Oferta plantilla 1")])),_:1,__:[8]})]),_:1})):i("",!0),o.can(["create oferta"])?(a(),y(c(x),{key:1,class:"rounded-none",href:"/NuevaOferta/2"},{default:f(()=>[p(O,{class:"rounded-none px-1"},{default:f(()=>t[9]||(t[9]=[_(" Oferta pruebas")])),_:1,__:[9]})]),_:1})):i("",!0),o.can(["delete oferta"])?(a(),y(F,{key:2,numberPermissions:n.numberPermissions,show:e.deleteOpen,onClose:t[0]||(t[0]=s=>e.deleteOpen=!1),Ofertaa:e.Ofertao,title:n.title},null,8,["numberPermissions","show","Ofertaa","title"])):i("",!0),p(ee,{show:e.DetalleOpen,eldetalle:e.eldetalle,onClose:t[1]||(t[1]=s=>e.DetalleOpen=!1),title:n.title,maintitle:"Oferta"},null,8,["show","eldetalle","title"]),p(Y,{show:e.deleteBulkOpen,onClose:t[2]||(t[2]=s=>(e.deleteBulkOpen=!1,e.multipleSelect=!1,e.selectedId=[])),selectedId:e.selectedId,title:n.title},null,8,["show","selectedId","title"])])]),r("div",le,[r("div",de,[r("div",ne,[p(K,{modelValue:e.params.perPage,"onUpdate:modelValue":t[3]||(t[3]=s=>e.params.perPage=s),dataSet:e.dataSet},null,8,["modelValue","dataSet"]),g((a(),y(J,{onClick:t[4]||(t[4]=s=>e.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:f(()=>[p(c(W),{class:"w-5 h-5"})]),_:1})),[[q,e.selectedId.length!=0&&o.can(["delete oferta"])],[b,o.lang().tooltip.delete_selected]])]),n.numberPermissions>1?(a(),y(H,{key:0,modelValue:e.params.search,"onUpdate:modelValue":t[5]||(t[5]=s=>e.params.search=s),type:"text",class:"block w-4/6 md:w-3/6 lg:w-2/6 rounded-lg",placeholder:"CÃ³digo, empresa o proyecto"},null,8,["modelValue"])):i("",!0)]),r("div",ie,[n.total>0?(a(),d("table",pe,[r("thead",ce,[r("tr",me,[r("th",fe,[p(te,{checked:e.multipleSelect,"onUpdate:checked":t[6]||(t[6]=s=>e.multipleSelect=s),onChange:j},null,8,["checked"])]),u.numberPermissions>1?(a(),d("th",ue,"Accion")):i("",!0),t[11]||(t[11]=r("th",{class:"px-2 py-4 text-center"},"#",-1)),(a(),d(h,null,w(v,s=>r("th",{class:"px-2 py-4 cursor-pointer",onClick:k=>N(s.order)},[r("div",be,[r("span",null,m(o.lang().label[s.label]),1),p(c($),{class:"w-4 h-4"})])],8,ye)),64)),r("th",_e,[r("div",ge,[t[10]||(t[10]=r("span",null,"Ver detalles",-1)),p(c($),{class:"w-4 h-4"})])])])]),r("tbody",null,[(a(!0),d(h,null,w(n.fromController.data,(s,k)=>(a(),d("tr",{key:k,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[r("td",he,[g(r("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:B,value:s.id,"onUpdate:modelValue":t[7]||(t[7]=l=>e.selectedId=l)},null,40,ke),[[L,e.selectedId]])]),u.numberPermissions>1?(a(),d("td",xe,[r("div",we,[r("div",ve,[o.can(["create oferta"])?(a(),y(c(x),{key:0,href:"/EditOferta/"+s.id,class:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-l-lg hover:bg-indigo-500 focus:z-10 focus:ring-1 focus:ring-indigo-800 focus:border-indigo-800 hover:text-white"},{default:f(()=>[r("span",Oe,[p(c(re),{class:"w-4 h-4 mr-1"}),t[12]||(t[12]=r("span",null,"Editar",-1))])]),_:2},1032,["href"])):i("",!0),g((a(),d("button",{onClick:R(l=>C(s),["prevent"]),class:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border-t border-b border-r border-gray-200 rounded-r-lg hover:bg-indigo-500 hover:text-white focus:z-10 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"},t[13]||(t[13]=[_(" Descargar PDF ")]),8,$e)),[[b,"Descargar PDF"]])])])])):i("",!0),r("td",Pe,m(++k),1),(a(),d(h,null,w(v,l=>r("td",Se,[l.type==="text"||l.type==="string"?(a(),d("span",De,m(s[l.order]),1)):i("",!0),l.type==="number"?(a(),d("span",Ie,m(c(P)(s[l.order],0,!1)),1)):i("",!0),l.type==="dinero"?(a(),d("span",Ve,m(c(P)(s[l.order],0,!0)),1)):i("",!0),l.type==="date"?(a(),d("span",Ne,m(c(S)(s[l.order],!1)),1)):i("",!0),l.type==="datetime"?(a(),d("span",je,m(c(S)(s[l.order],!0)),1)):i("",!0),l.type==="foreign"?(a(),d("span",Be,m((s==null?void 0:s[l==null?void 0:l.nameid])??""),1)):i("",!0)])),64)),g((a(),d("td",{onClick:l=>(e.DetalleOpen=!0,e.eldetalle=s),class:"whitespace-nowrap py-4 px-2 sm:py-3 cursor-pointer text-blue-600 dark:text-blue-400 font-bold underline"},[_(m(s.QuantityItems)+" Items ",1)],8,Ce)),[[b,o.lang().tooltip.v_alfa]])]))),128)),r("tr",Ue,[u.numberPermissions>1?(a(),d("td",ze," - ")):i("",!0),t[14]||(t[14]=r("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"}," Total:",-1)),r("td",Ee,m(n.total),1)])])])):(a(),d("h2",Te,"Sin Registros"))]),n.total>0?(a(),d("div",Ae,[p(X,{links:n.fromController,filters:e.params},null,8,["links","filters"])])):i("",!0)])])]),_:1})],64)}}};export{ct as default};
