import{k as n}from"./app-551012d8.js";async function l(e,o){const t=route("api.select.equipos")+"?q="+encodeURIComponent(e);try{const s=await fetch(t,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}});o.equiposOptions=await s.json()}catch(s){const r=`API Error | query: "${e}" | message: ${s.message}`;try{const i=route("api.log.error")+"?error="+encodeURIComponent(r);console.log("üîó URL generada para log:",i),await fetch(i,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}})}catch(i){console.error("‚ùå No se pudo registrar el error en el backend:",i)}console.error(r,s)}}function p(e,o,t){const s=e.target.value.replace(/[^\d]/g,"");t.equipos[o].equipo_selec.precio_de_lista=Number(s||0)}function a(e,o){const t=o.equipos[e],s=t.equipo_selec.descuento_basico??0,r=t.equipo_selec.descuento_proyectos??0,i=s>=r?s:r;o.equipos[e].descuento_final=Math.round(i*1e5)/1e5}function q(e,o,t,s){e<0&&(e=0);const r=o.equipos.length;for(;o.equipos.length<e;)o.equipos.push({nombre_item:"",equipo_selec:null,cantidad:1,descripcion:"",descuento_final:0,factor_final:1,costounitario:0,costototal:0,valorunitario:0,subtotalequip:0});for(;o.equipos.length>e;)o.equipos.pop();o.equipos.length>r&&c(o,t,s)}function c(e,o,t){let s=t;if(!s||!Number.isInteger(s))return;s=s-1;let i=e.equipos[e.equipos.length-1];i.factor_final=o.factores[s].value??1}function f(e,o,t,s){if(e<0||e>=o.items.length){console.error("√çndice fuera de rango:",e);return}t.hijosZeroFlags.splice(e,1),o.items.splice(e,1),o.equipos&&o.equipos.splice(e,1),s()}const g=n({focusedItemIndex:null,setFocusedItem(e){this.focusedItemIndex=e},clearFocusedItem(){this.focusedItemIndex=null}});export{q as a,l as b,f as d,g as f,p as o,a as s};
