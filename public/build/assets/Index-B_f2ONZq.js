import{f as l,o as t,b as a,q as F,l as L,Q as M,k as A,s as H,N as Z,m as q,v as j,c,w as h,g as n,a as u,x as y,e as Q,t as p,u as m,z as g,y as T,n as R,F as k,p as v}from"./app-Cq1znuMy.js";import{a as W,_ as J}from"./AuthenticatedLayout-Bq4Td3tW.js";import{_ as P}from"./TextInput-CxVKhdog.js";import{_ as V}from"./PrimaryButton-C4YOsuaB.js";import{_ as K}from"./SelectInput-DjH0LW8I.js";import{_ as S}from"./DangerButton-BmGSuYS8.js";import{r as X,_ as Y}from"./Pagination-BYYD9Bg-.js";import ee from"./Create-C43ftcon.js";import re from"./Edit-2QURORQE.js";import se from"./TerminarReporte-BHvboEJC.js";import te from"./Delete-0CF1SqLr.js";import oe from"./DeleteBulk-B7TPvl8f.js";import{_ as ae}from"./Checkbox-BbUHU8JM.js";import{_ as z,r as le}from"./InfoButton-B0TBRaLt.js";import{c as B,n as _,f as O}from"./global-C5jYNk1l.js";import{C as ne}from"./vue-select.es-wsHHmxmz.js";/* empty css                   *//* empty css             */import{r as I}from"./TrashIcon-BT-VIv2L.js";import"./index-Dwl7jS47.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./keyboard-BuN7yXbH.js";/* empty css                                              */import"./InputError-WpjbGGA7.js";import"./InputLabel-DT5ITww_.js";import"./Modal-qBkqJmba.js";import"./SecondaryButton-BnrCYek9.js";import"./vue-datepicker-C1EfqZL1.js";function de(f,x){return t(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M11.47 2.47a.75.75 0 0 1 1.06 0l3.75 3.75a.75.75 0 0 1-1.06 1.06l-2.47-2.47V21a.75.75 0 0 1-1.5 0V4.81L8.78 7.28a.75.75 0 0 1-1.06-1.06l3.75-3.75Z","clip-rule":"evenodd"})])}function ie(f,x){return t(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M1.72 5.47a.75.75 0 0 1 1.06 0L9 11.69l3.756-3.756a.75.75 0 0 1 .985-.066 12.698 12.698 0 0 1 4.575 6.832l.308 1.149 2.277-3.943a.75.75 0 1 1 1.299.75l-3.182 5.51a.75.75 0 0 1-1.025.275l-5.511-3.181a.75.75 0 0 1 .75-1.3l3.943 2.277-.308-1.149a11.194 11.194 0 0 0-3.528-5.617l-3.809 3.81a.75.75 0 0 1-1.06 0L1.72 6.53a.75.75 0 0 1 0-1.061Z","clip-rule":"evenodd"})])}const pe={class:"face"},me={__name:"ClockWorking",props:{},setup(f){return(x,w)=>(t(),l("div",pe,w[0]||(w[0]=[a("div",{class:"hand"},[a("div",{class:"hand"},[a("div",{class:"hour"}),a("div",{class:"minute"})])],-1)])))}},ce={class:"space-y-4"},ue={class:"px-4 sm:px-0"},ye={class:"grid grid-cols-1 sm:grid-cols-3 xs:gap-y-2 items-center rounded-lg overflow-hidden w-full mt-1"},fe={class:"bg-white dark:bg-gray-950 shadow sm:rounded-lg 2xl:rounded-2xl relative z-20 -pt-2 pb-2"},be={class:"flex relative z-20 px-2 my-1 h-20 overflow-x-auto overflow-y-hidden py-2"},he={class:"inline-flex gap-6"},ge={key:1,class:"mx-1 mt-4 w-40 flex gap-4"},_e={class:"my-1"},ke={class:"inline-flex my-1"},ve={key:0,class:"mt-4 flex flex-inline gap-4"},xe={class:"mx-4 relative z-20"},we={class:"bg-white dark:bg-gray-950 shadow sm:rounded-lg relative z-10"},Ce={class:"flex max-h-[630px] overflow-y-scroll"},Oe={key:0,class:"w-full"},$e={class:"-mt-1 top-0 bg-gray-200 sticky capitalize text-sm dark:border-gray-700 dark:bg-black"},Te={class:"dark:bg-gray-900/50 text-left"},Pe={key:0,class:"px-2 py-4 text-center dark:bg-black"},Ve=["onClick"],je={class:"flex justify-between items-center"},Se={key:0,class:"w-full bg-white border border-blue-500 inamovible"},ze={class:"dark:bg-gray-900/50 text-left"},Be={class:"px-2 py-4 text-center"},Ie={class:"px-2 py-4 cursor-pointer"},Ge={class:"flex justify-between items-center"},De={class:"w-20 text-sm"},Ee={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ne={key:0},Ue={key:1},Fe={key:2},Le={key:3},Me={key:4},Ae={key:5},He={key:6},Ze={key:7},qe={key:8},Qe={key:0,class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Re=["value"],We={class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3"},Je={class:"flex justify-center items-center"},Ke={class:"rounded-md overflow-hidden"},Xe={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Ye={class:"whitespace-wrap py-4 px-2 sm:py-3"},er={key:0},rr={key:1},sr={key:2},tr={key:3},or={key:4},ar={key:5},lr={key:6},nr={key:7},dr={key:8},ir={key:1,class:"text-center text-xl my-8"},pr={key:0,class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},Ur={__name:"Index",props:{fromController:Object,total:Number,filters:Object,breadcrumbs:Object,perPage:Number,title:String,numberPermissions:Number,losSelect:Object,valuesGoogleCabeza:Object,valuesGoogleBody:Object,Trabajadores:Object,losOT:Object},setup(f){const{_:x,debounce:w,pickBy:G}=F,o=f,r=L({params:{search:o.filters.searchDate,search2:o.filters.search2,field:o.filters.field,order:o.filters.order,perPage:o.perPage,searchdia:o.filters.searchdia,soloTiEstimado:o.filters.soloTiEstimado,ultimosmeses:o.filters.ultimosmeses,FiltroCentro:o.filters.FiltroCentro},generico:null,selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,TerminarOpen:!1,deleteOpen:!1,dataSet:M().props.app.perpage,totalEmpleados:0,deleteBulkOpen:!1,hayCongelado:0});A(()=>{});const D=(d,s)=>{s&&(r.params.field=d,r.params.order=r.params.order==="asc"?"desc":"asc")};H(()=>x.cloneDeep(r.params),w(()=>{let d=G(r.params);Z.get(route("reporte.index"),d,{replace:!0,preserveState:!0,preserveScroll:!0})},350));const E=d=>{var s;d.target.checked===!1?r.selectedId=[]:(s=o.fromController)==null||s.data.forEach(b=>{r.selectedId.push(b.id)})},N=()=>{var d;r.multipleSelect=((d=o.reportes)==null?void 0:d.data.length)===r.selectedId.length};q(()=>{});const C=[{order:"fecha",label:"fecha",type:"date",CanOrder:!0},{order:"operario_id",label:"operario",type:"foreign",nameid:"operario_s",CanOrder:!0},{order:"hora_inicial",label:"hora inicial",type:"time",CanOrder:!0},{order:"hora_final",label:"hora final",type:"time",CanOrder:!0},{order:"tiempo_transcurrido",label:"Tiempo Transcurrido (mins)",type:"decimal",nameid:"tiempo_transcurrido",CanOrder:!0},{order:"TiempoEstimado",label:"TiempoEstimado",type:"text",CanOrder:!0},{order:"actividad_id",label:"actividad",type:"foreign",nameid:"actividad_s",CanOrder:!0},{order:"centrotrabajo_id",label:"centrotrabajo",type:"foreign",nameid:"centrotrabajo_s",CanOrder:!0},{order:"OTItem",label:"CD o OT",type:"text",CanOrder:!1},{order:"disponibilidad_id",label:"disponibilidad",type:"foreign",nameid:"disponibilidad_s",CanOrder:!0},{order:"reproceso_id",label:"reproceso",type:"foreign",nameid:"reproceso_s",CanOrder:!0}];return(d,s)=>{const b=j("tooltip"),U=j("sticky");return t(),c(J,null,{default:h(()=>[a("div",ce,[a("div",ue,[a("div",ye,[d.can(["create reporte"])?(t(),c(ee,{key:0,numberPermissions:o.numberPermissions,show:r.createOpen,onClose:s[0]||(s[0]=e=>r.createOpen=!1),title:o.title,losSelect:o.losSelect,valuesGoogleCabeza:o.valuesGoogleCabeza,valuesGoogleBody:o.valuesGoogleBody,Trabajadores:o.Trabajadores,losOT:o.losOT},null,8,["numberPermissions","show","title","losSelect","valuesGoogleCabeza","valuesGoogleBody","Trabajadores","losOT"])):n("",!0),d.can(["update reporte"])&&f.numberPermissions>1?(t(),c(re,{key:1,numberPermissions:o.numberPermissions,show:r.editOpen,onClose:s[1]||(s[1]=e=>r.editOpen=!1),generica:r.generico,title:o.title,losSelect:o.losSelect,valuesGoogleCabeza:o.valuesGoogleCabeza,valuesGoogleBody:o.valuesGoogleBody,Trabajadores:o.Trabajadores},null,8,["numberPermissions","show","generica","title","losSelect","valuesGoogleCabeza","valuesGoogleBody","Trabajadores"])):n("",!0),d.can(["read reporte"])?(t(),c(se,{key:2,numberPermissions:o.numberPermissions,show:r.TerminarOpen,onClose:s[2]||(s[2]=e=>r.TerminarOpen=!1),generica:r.generico,title:o.title},null,8,["numberPermissions","show","generica","title"])):n("",!0),d.can(["delete reporte"])?(t(),c(te,{key:3,numberPermissions:o.numberPermissions,show:r.deleteOpen,onClose:s[3]||(s[3]=e=>r.deleteOpen=!1),generica:r.generico,title:o.title},null,8,["numberPermissions","show","generica","title"])):n("",!0),u(oe,{show:r.deleteBulkOpen,onClose:s[4]||(s[4]=e=>(r.deleteBulkOpen=!1,r.multipleSelect=!1,r.selectedId=[])),selectedId:r.selectedId,title:o.title},null,8,["show","selectedId","title"])])]),a("div",fe,[a("div",be,[a("div",he,[u(K,{modelValue:r.params.perPage,"onUpdate:modelValue":s[5]||(s[5]=e=>r.params.perPage=e),dataSet:r.dataSet,class:"mx-auto mt-4"},null,8,["modelValue","dataSet"]),d.can(["create reporte"])?(t(),c(V,{key:0,class:"rounded-md mt-4 mx-4 items-center w-[160px]",onClick:s[6]||(s[6]=e=>r.createOpen=!0)},{default:h(()=>[Q(p(d.lang().button.add)+" "+p(o.title),1)]),_:1})):n("",!0),y((t(),c(S,{onClick:s[7]||(s[7]=e=>r.deleteBulkOpen=!0),class:"px-3 py-1.5 h-10 my-auto"},{default:h(()=>[u(m(I),{class:"w-5 h-5"})]),_:1})),[[g,r.selectedId.length!==0&&d.can(["delete reporte"])],[b,d.lang().tooltip.delete_selected]]),y((t(),c(V,{onClick:s[8]||(s[8]=e=>r.hayCongelado=r.selectedId[0]),class:"px-3 py-1.5 h-10 my-auto"},{default:h(()=>[u(m(de),{class:"w-5 h-5"})]),_:1})),[[g,r.selectedId.length!==0&&d.can(["delete reporte"])],[b,"Congelar"]]),f.numberPermissions>1?(t(),l("div",ge,[a("div",_e,[s[19]||(s[19]=a("label",{for:"soloval",class:"text-sm mx-2 whitespace-nowrap"},"Tiempo Estimado",-1)),f.filters!==null?y((t(),l("input",{key:0,"onUpdate:modelValue":s[9]||(s[9]=e=>r.params.soloTiEstimado=e),id:"soloval",type:"checkbox",class:"bg-gray-200 h-5 w-5 ml-[12px]"},null,512)),[[T,r.params.soloTiEstimado]]):n("",!0),a("div",ke,[s[18]||(s[18]=a("label",{for:"soloval",class:"text-sm mx-2 whitespace-nowrap"},"Mostrar todos",-1)),f.filters!==null?y((t(),l("input",{key:0,"onUpdate:modelValue":s[10]||(s[10]=e=>r.params.ultimosmeses=e),id:"soloval",type:"checkbox",class:"bg-gray-200 h-5 w-5 ml-[34px]"},null,512)),[[T,r.params.ultimosmeses]]):n("",!0)])])])):n("",!0)]),f.numberPermissions>1?(t(),l("div",ve,[a("div",xe,[u(m(ne),{options:o.losSelect.centrotrabajo,label:"title",class:R(["dark:bg-gray-400 mt-1 w-[300px] fixed z-20",{"z-[9999] relative":!0}]),modelValue:r.params.FiltroCentro,"onUpdate:modelValue":s[11]||(s[11]=e=>r.params.FiltroCentro=e)},null,8,["options","modelValue"])]),o.numberPermissions>1?(t(),c(P,{key:0,modelValue:r.params.searchdia,"onUpdate:modelValue":s[12]||(s[12]=e=>r.params.searchdia=e),type:"number",max:"31",min:"0",class:"mx-1 xl:mr-2 w-32 rounded-lg sm:h-6 lg:h-12 mt-1",placeholder:"Día"},null,8,["modelValue"])):n("",!0),o.numberPermissions>1?(t(),c(P,{key:1,modelValue:r.params.search2,"onUpdate:modelValue":s[13]||(s[13]=e=>r.params.search2=e),type:"text",class:"mx-2 w-72 rounded-lg h-6 lg:h-12 mt-1",placeholder:"Persona"},null,8,["modelValue"])):n("",!0),o.numberPermissions>1?(t(),c(P,{key:2,modelValue:r.params.searchDate,"onUpdate:modelValue":s[14]||(s[14]=e=>r.params.searchDate=e),type:"date",class:"mx-1 xl:mr-2 w-32 rounded-lg sm:h-6 lg:h-12 mt-1"},null,8,["modelValue"])):n("",!0)])):n("",!0)])]),a("div",we,[a("div",Ce,[o.total>0?(t(),l("table",Oe,[a("thead",$e,[a("tr",Te,[o.numberPermissions>1?(t(),l("th",Pe,[u(ae,{checked:r.multipleSelect,"onUpdate:checked":s[15]||(s[15]=e=>r.multipleSelect=e),onChange:E},null,8,["checked"])])):n("",!0),s[20]||(s[20]=a("th",{class:"px-2 py-4"},"Accion",-1)),s[21]||(s[21]=a("th",{class:"px-2 py-4 text-center"},"#",-1)),(t(),l(k,null,v(C,e=>a("th",{class:"px-2 py-4 cursor-pointer min-w-min",onClick:$=>D(e.order,e.CanOrder)},[a("div",je,[a("span",null,p(d.lang().label[e.label]),1),e.CanOrder?(t(),c(m(X),{key:0,class:"w-4 h-4"})):n("",!0)])],8,Ve)),64))])]),a("tbody",null,[r.hayCongelado!==0?y((t(),l("div",Se,[a("tr",ze,[s[22]||(s[22]=a("th",{class:"px-2 py-4"},null,-1)),s[23]||(s[23]=a("th",{class:"px-2 py-4"},null,-1)),a("th",Be,[y((t(),c(V,{onClick:s[16]||(s[16]=e=>r.hayCongelado=0),class:"px-3 py-1.5"},{default:h(()=>[u(m(ie),{class:"w-5 h-5"})]),_:1})),[[g,r.hayCongelado&&d.can(["delete reporte"])],[b,"Descongelar"]])]),(t(),l(k,null,v(C,e=>a("th",Ie,[a("div",Ge,[a("p",De,p(d.lang().label[e.label]),1)])])),64))]),a("tr",null,[s[24]||(s[24]=a("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},null,-1)),s[25]||(s[25]=a("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},null,-1)),s[26]||(s[26]=a("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1)),(t(),l(k,null,v(C,e=>a("td",Ee,[e.type==="text"?(t(),l("span",Ne,p(o.fromController.data[0][e.order]),1)):n("",!0),e.type==="time"?(t(),l("span",Ue,p(m(B)(o.fromController.data[0][e.order])),1)):n("",!0),e.type==="number"?(t(),l("span",Fe,p(m(_)(o.fromController.data[0][e.order],0,!1)),1)):n("",!0),e.type==="decimal"?(t(),l("span",Le,p(m(_)(o.fromController.data[0][e.order],1,!1)),1)):n("",!0),e.type==="dinero"?(t(),l("span",Me,p(m(_)(o.fromController.data[0][e.order],0,!0)),1)):n("",!0),e.type==="date"?(t(),l("span",Ae,p(m(O)(o.fromController.data[0][e.order],"")),1)):n("",!0),e.type==="datetime"?(t(),l("span",He,p(m(O)(o.fromController.data[0][e.order],"conLaHora")),1)):n("",!0),e.type==="foreign"?(t(),l("span",Ze,p(o.fromController.data[0][e.nameid]),1)):n("",!0),e.order==="hora_final"&&o.fromController.data[0][e.order]==null?(t(),l("span",qe," - ")):n("",!0)])),64))])])),[[U,{zIndex:100}]]):n("",!0),(t(!0),l(k,null,v(o.fromController.data,(e,$)=>(t(),l("tr",{key:$,class:"hover:dark:bg-gray-900/20"},[o.numberPermissions>1?(t(),l("td",Qe,[y(a("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:N,value:e.id,"onUpdate:modelValue":s[17]||(s[17]=i=>r.selectedId=i)},null,40,Re),[[T,r.selectedId]])])):n("",!0),a("td",We,[a("div",Je,[a("div",Ke,[y((t(),c(z,{type:"button",onClick:i=>(r.editOpen=!0,r.generico=e),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[u(m(le),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[g,d.can(["update reporte"])],[b,d.lang().tooltip.edit]]),e.hora_final?n("",!0):y((t(),c(z,{key:0,type:"button",onClick:i=>(r.TerminarOpen=!0,r.generico=e),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[u(m(W),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[g,d.can(["create reporte"])],[b,d.lang().tooltip.finalizarTarea]]),y((t(),c(S,{type:"button",onClick:i=>(r.deleteOpen=!0,r.generico=e),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[u(m(I),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[g,d.can(["delete reporte"])],[b,d.lang().tooltip.delete]])])])]),a("td",Xe,p(++$),1),(t(),l(k,null,v(C,i=>a("td",Ye,[i.type==="text"?(t(),l("span",er,p(e[i.order]),1)):n("",!0),i.type==="time"?(t(),l("span",rr,p(m(B)(e[i.order])),1)):n("",!0),i.type==="number"?(t(),l("span",sr,p(m(_)(e[i.order],0,!1)),1)):n("",!0),i.type==="decimal"?(t(),l("span",tr,p(m(_)(e[i.order],1,!1)),1)):n("",!0),i.type==="dinero"?(t(),l("span",or,p(m(_)(e[i.order],0,!0)),1)):n("",!0),i.type==="date"?(t(),l("span",ar,p(m(O)(e[i.order],"")),1)):n("",!0),i.type==="datetime"?(t(),l("span",lr,p(m(O)(e[i.order],"conLaHora")),1)):n("",!0),i.type==="foreign"?(t(),l("span",nr,p(e[i.nameid]),1)):n("",!0),i.order==="hora_final"&&e[i.order]==null?(t(),l("span",dr,[u(me)])):n("",!0)])),64))]))),128))])])):(t(),l("h2",ir,"Sin Registros"))]),o.total>0?(t(),l("div",pr,[u(Y,{links:o.fromController,filters:r.params},null,8,["links","filters"])])):n("",!0)])])]),_:1})}}};export{Ur as default};
