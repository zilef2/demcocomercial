import{q as N,l as I,Q as B,s as D,N as U,v as F,f as l,o as t,a as c,u as m,Z as A,w as _,b as r,c as u,g as i,e as E,t as p,F as h,p as k,x as w,y as T,z as x}from"./app-Cq1znuMy.js";import{_ as q}from"./AuthenticatedLayout-Bq4Td3tW.js";import{_ as z}from"./Breadcrumb-TEnZiU5P.js";import{_ as L}from"./TextInput-CxVKhdog.js";import{_ as M}from"./PrimaryButton-C4YOsuaB.js";import{_ as Q}from"./SelectInput-DjH0LW8I.js";import{_ as R}from"./DangerButton-BmGSuYS8.js";import{r as Z,_ as G}from"./Pagination-BYYD9Bg-.js";import H from"./Create-BGRmxkJJ.js";import J from"./Edit-qkN0CeVf.js";import K from"./Delete-C67SLdsC.js";import{_ as W}from"./Checkbox-BbUHU8JM.js";import{_ as X,r as Y}from"./InfoButton-B0TBRaLt.js";import{n as v,f as S}from"./global-C5jYNk1l.js";import{r as ee}from"./TrashIcon-BT-VIv2L.js";import"./index-Dwl7jS47.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./keyboard-BuN7yXbH.js";/* empty css                                              */import"./InputError-WpjbGGA7.js";import"./InputLabel-DT5ITww_.js";import"./Modal-qBkqJmba.js";import"./SecondaryButton-BnrCYek9.js";import"./vue-select.es-wsHHmxmz.js";/* empty css                   */import"./vue-datepicker-C1EfqZL1.js";/* empty css             */const te={class:"space-y-4"},re={class:"px-4 sm:px-0"},se={class:"rounded-lg overflow-hidden w-fit"},oe={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},ae={class:"flex justify-between p-2"},ne={class:"flex space-x-2"},le={class:"overflow-x-auto scrollbar-table"},de={key:0,class:"w-full"},ie={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},pe={class:"dark:bg-gray-900/50 text-left"},ce={class:"px-2 py-4 text-center"},me={key:0,class:"px-2 py-4"},ue=["onClick"],fe={class:"flex justify-between items-center"},ye={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},be=["value"],_e={key:0,class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3"},he={class:"flex justify-center items-center"},ge={class:"rounded-md overflow-hidden"},ke={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},we={class:"whitespace-nowrap py-4 px-2 sm:py-3"},xe={key:0},ve={key:1},Se={key:2},$e={key:3},Pe={key:4},Ce={key:5},Oe={class:"border-t border-gray-600"},je={key:0,class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3 text-center"},Ve={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Ne={key:1,class:"text-center text-xl my-8"},Ie={key:0,class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},nt={__name:"Index",props:{fromController:Object,total:Number,filters:Object,breadcrumbs:Object,perPage:Number,title:String,numberPermissions:Number,Flash:String},setup(f){const{_:$,debounce:P,pickBy:C}=N,a=f,e=I({params:{search:a.filters.search,field:a.filters.field,order:a.filters.order,perPage:a.perPage},generico:null,selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,deleteOpen:!1,dataSet:B().props.app.perpage}),O=n=>{e.params.field=n,e.params.order=e.params.order==="asc"?"desc":"asc"};D(()=>$.cloneDeep(e.params),P(()=>{let n=C(e.params);U.get(route("ordentrabajo.index"),n,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const j=n=>{var s;n.target.checked===!1?e.selectedId=[]:(s=a.ordentrabajos)==null||s.data.forEach(b=>{e.selectedId.push(b.id)})},V=()=>{var n;((n=a.ordentrabajos)==null?void 0:n.data.length)==e.selectedId.length?e.multipleSelect=!0:e.multipleSelect=!1},y=[{order:"nombre",label:"nombre",type:"text"}];return(n,s)=>{const b=F("tooltip");return t(),l(h,null,[c(m(A),{title:a.title},null,8,["title"]),c(q,null,{default:_(()=>[c(z,{title:f.title,breadcrumbs:f.breadcrumbs},null,8,["title","breadcrumbs"]),r("div",te,[r("div",re,[r("div",se,[n.can(["create ordentrabajo"])?(t(),u(M,{key:0,class:"rounded-none",onClick:s[0]||(s[0]=o=>e.createOpen=!0)},{default:_(()=>[E(p(n.lang().button.add),1)]),_:1})):i("",!0),n.can(["create ordentrabajo"])?(t(),u(H,{key:1,numberPermissions:a.numberPermissions,titulos:y,show:e.createOpen,onClose:s[1]||(s[1]=o=>e.createOpen=!1),title:a.title,losSelect:a.losSelect},null,8,["numberPermissions","show","title","losSelect"])):i("",!0),n.can(["update ordentrabajo"])?(t(),u(J,{key:2,titulos:y,numberPermissions:a.numberPermissions,show:e.editOpen,onClose:s[2]||(s[2]=o=>e.editOpen=!1),generica:e.generico,title:a.title,losSelect:a.losSelect},null,8,["numberPermissions","show","generica","title","losSelect"])):i("",!0),n.can(["delete ordentrabajo"])?(t(),u(K,{key:3,numberPermissions:a.numberPermissions,show:e.deleteOpen,onClose:s[3]||(s[3]=o=>e.deleteOpen=!1),generica:e.generico,title:a.title},null,8,["numberPermissions","show","generica","title"])):i("",!0)])]),r("div",oe,[r("div",ae,[r("div",ne,[c(Q,{modelValue:e.params.perPage,"onUpdate:modelValue":s[4]||(s[4]=o=>e.params.perPage=o),dataSet:e.dataSet},null,8,["modelValue","dataSet"])]),a.numberPermissions>1?(t(),u(L,{key:0,modelValue:e.params.search,"onUpdate:modelValue":s[5]||(s[5]=o=>e.params.search=o),type:"text",class:"block w-4/6 md:w-3/6 lg:w-2/6 rounded-lg",placeholder:"Buscar..."},null,8,["modelValue"])):i("",!0)]),r("div",le,[a.total>0?(t(),l("table",de,[r("thead",ie,[r("tr",pe,[r("th",ce,[c(W,{checked:e.multipleSelect,"onUpdate:checked":s[6]||(s[6]=o=>e.multipleSelect=o),onChange:j},null,8,["checked"])]),f.numberPermissions>1?(t(),l("th",me,"Accion")):i("",!0),s[8]||(s[8]=r("th",{class:"px-2 py-4 text-center"},"#",-1)),(t(),l(h,null,k(y,o=>r("th",{class:"px-2 py-4 cursor-pointer",onClick:g=>O(o.order)},[r("div",fe,[r("span",null,p(n.lang().label[o.label]),1),c(m(Z),{class:"w-4 h-4"})])],8,ue)),64))])]),r("tbody",null,[(t(!0),l(h,null,k(a.fromController.data,(o,g)=>(t(),l("tr",{key:g,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[r("td",ye,[w(r("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:V,value:o.id,"onUpdate:modelValue":s[7]||(s[7]=d=>e.selectedId=d)},null,40,be),[[T,e.selectedId]])]),f.numberPermissions>1?(t(),l("td",_e,[r("div",he,[r("div",ge,[w((t(),u(X,{type:"button",onClick:d=>(e.editOpen=!0,e.generico=o),class:"px-2 py-1.5 rounded-none"},{default:_(()=>[c(m(Y),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[x,n.can(["update user"])],[b,n.lang().tooltip.edit]]),w((t(),u(R,{type:"button",onClick:d=>(e.deleteOpen=!0,e.generico=o),class:"px-2 py-1.5 rounded-none"},{default:_(()=>[c(m(ee),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[x,n.can(["delete user"])],[b,n.lang().tooltip.delete]])])])])):i("",!0),r("td",ke,p(++g),1),(t(),l(h,null,k(y,d=>r("td",we,[d.type=="text"?(t(),l("span",xe,p(o[d.order]),1)):i("",!0),d.type=="number"?(t(),l("span",ve,p(m(v)(o[d.order],0,!1)),1)):i("",!0),d.type=="dinero"?(t(),l("span",Se,p(m(v)(o[d.order],0,!0)),1)):i("",!0),d.type=="date"?(t(),l("span",$e,p(m(S)(o[d.order],!1)),1)):i("",!0),d.type=="datetime"?(t(),l("span",Pe,p(m(S)(o[d.order],!0)),1)):i("",!0),d.type=="foreign"?(t(),l("span",Ce,p(o[d.nameid]),1)):i("",!0)])),64))]))),128)),r("tr",Oe,[f.numberPermissions>1?(t(),l("td",je," - ")):i("",!0),s[9]||(s[9]=r("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"}," Total: ",-1)),r("td",Ve,p(a.total),1)])])])):(t(),l("h2",Ne,"Sin Registros"))]),a.total>0?(t(),l("div",Ie,[c(G,{links:a.fromController,filters:e.params},null,8,["links","filters"])])):i("",!0)])])]),_:1})],64)}}};export{nt as default};
