import{k as B,T as $,C as z,a9 as I,x as M,l as x,f as n,a as s,w as y,o as c,b as r,t as b,u as o,g as m,d as w,n as H,e as F}from"./app-c2754de5.js";import{_ as u}from"./InputError-f0dfe909.js";import{_ as v,a as f}from"./TextInput-05cac8ef.js";import{_ as G,a as q}from"./SecondaryButton-2a5bdb7b.js";import{_ as P}from"./PrimaryButton-9e8af232.js";import{C as p}from"./vue-select-bb897b0b.js";/* empty css             */import{T as X,a as R,D as J}from"./global-16c20635.js";const L={class:"space-y-6 dark:text-white"},W=["onSubmit"],K={class:"text-lg font-medium text-gray-900 dark:text-white"},Q={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-6"},Y={key:0,id:"opcinesActividadO",class:"xl:col-span-2 col-span-1"},Z=r("label",{class:"dark:text-white",name:""},[w(" Reportar en nombre de: "),r("small",null,"(Opcional) ")],-1),ee={id:"opcinesActividadO",class:"xl:col-span-2 col-span-1"},oe=r("label",{class:"dark:text-white"}," Tipo de reporte ",-1),ae={class:"xl:col-span-1 col-span-1"},te={class:"dark:text-white col-span-1"},ie={key:1,id:"Sordentrabajo",class:"xl:col-span-2 col-span-1"},le=r("label",{name:"ordentrabajo_ids",class:"dark:text-white"}," Orden de trabajo ",-1),se={key:2,class:"w-full lg:col-span-2 col-span-1 dark:text-white"},re={key:3,class:"w-full col-span-1 dark:text-white"},de={id:"Scentrotrabajo",class:"col-span-1"},ne=r("label",{name:"centrotrabajo_id",class:"dark:text-white"}," Centro de trabajo ",-1),ce={key:4,class:"col-span-1 dark:text-white"},me={key:5,id:"actividad",class:"xl:col-span-2 col-span-1"},ue=r("label",{name:"actividad_id",class:"dark:text-white"}," Actividad ",-1),pe={key:6,id:"reproceso",class:"xl:col-span-2 col-span-1"},_e=r("label",{name:"reproceso_id",class:"dark:text-white"}," Reproceso",-1),be={key:7,id:"disponibilidad",class:"xl:col-span-3 col-span-1"},ge=r("label",{name:"disponibilidad_id",class:"dark:text-white"}," Disponibilidad",-1),ve={class:"mb-8 mt-[360px] flex justify-end"},fe={key:0,class:"mx-12 px-8 text-lg font-medium text-red-600 bg-red-50 dark:text-white dark:bg-gray-800"},je={key:1,class:"mx-12 px-8 text-lg font-medium text-gray-800 dark:text-white dark:bg-gray-800"},Re={__name:"Create",props:{show:Boolean,title:String,roles:Object,losSelect:Object,numberPermissions:Number,valuesGoogleCabeza:Object,valuesGoogleBody:Object,Trabajadores:Object},emits:["close"],setup(S,{emit:j}){const d=S,i=B({params:{pregunta:""},actividad_id:d.losSelect.actividad,centrotrabajo_id:d.losSelect.centrotrabajo,disponibilidad_id:d.losSelect.disponibilidad,ordentrabajo_id:d.losSelect.ordentrabajo,reproceso_id:d.losSelect.reproceso,temp_disponibilidad_id:null,temp_reproceso_id:null,temp_actividad_id:null,valorInactivo:"NA",cabeza:d.valuesGoogleCabeza,nombresOT:Object.values(d.valuesGoogleBody),ordentrabajo_ids:[],mensajeFalta:"",BanderaTipo:!0,mensajeTiemposAuto:"",soloUnaVez:!0,limiteMinimo:"",tempCentro:0}),e=$({...Object.fromEntries(["tipoReporte","fecha","hora_inicial","hora_final","actividad_id","centrotrabajo_id","disponibilidad_id","operario_id","ordentrabajo_id","reproceso_id","ordentrabajo_ids","otitem","user_id","nombreTablero","OTItem","TiempoEstimado"].map(a=>[a,""]))}),V=()=>{let a=new Date;a.setHours(a.getHours()-1);let t=l=>l<10?`0${l}`:l;return`${t(a.getHours())}:${t(a.getMinutes())}`},A=a=>(a.preventDefault(),!1);z(()=>{i.limiteMinimo=V(),setInterval(()=>{i.limiteMinimo=V()},6e4),d.numberPermissions>9&&setTimeout(()=>{e.ordentrabajo_ids=i.ordentrabajo_ids[1],e.centrotrabajo_id=i.centrotrabajo_id[1],e.actividad_id=i.actividad_id[1],i.mensajeTiemposAuto="Super!"},500),document.body.addEventListener("contextmenu",A)}),I(()=>{});const g=["Tiempo_estimado_corte","Tiempo_estimado_doblez","Tiempo_estimado_soldadura","Tiempo_estimado_pulida","Tiempo_estimado_ensamble","Tiempo_estimado_cobre","Tiempo_estimado_cableado","Tiempo_estimado_Ing_mec","Tiempo_estimado_Ing_elec"];function E(){let a=0;for(e.centrotrabajo_id=i.centrotrabajo_id[1];i.nombresOT[e.ordentrabajo_ids.value][g[a]]===""&&a<=g.length;)a++;e.TiempoEstimado=i.nombresOT[e.ordentrabajo_ids.value][g[a]],console.log(a),a!==g.length?(e.centrotrabajo_id=i.centrotrabajo_id[a+1],i.mensajeTiemposAuto=""):i.mensajeTiemposAuto="Tiempos vacios!",i.soloUnaVez=!1}let h=a=>{let t="";try{a.forEach((l,_)=>{if(typeof e[l]>"u"||e[l]===null||e[l].value===null||e[l].length===0)throw t=l,new Error("BreakException")})}catch{}return t},N=()=>{let a=e.tipoReporte.value,t=!0;const l=". Campo obligatorio";let _=new Date().getHours();console.log(_),console.log(`espacio
`),console.log(e.hora_inicial),console.log(`espacio2
`);let C=J(_+":00",e.hora_inicial);if(console.log(C),C>0)return"Ha pasado mucho tiempo!";a===0&&(t=h(["ordentrabajo_ids","centrotrabajo_id","actividad_id"])),a===1&&(t=h(["centrotrabajo_id","ordentrabajo_ids","actividad_id","reproceso_id"])),a===2&&(t=h(["centrotrabajo_id","disponibilidad_id"]));let D={ordentrabajo_ids:"Orden trabajo",actividad_id:"Actividad",reproceso_id:"Reproceso",centrotrabajo_id:"Centro de trabajo",disponibilidad_id:"Disponibilidad"};return t!==""?D[t]+l:t};M(()=>{if(d.show){if(i.BanderaTipo&&(e.tipoReporte={title:"Actividad",value:0},i.BanderaTipo=!1),e.errors={},e.fecha===null||e.fecha===""){let a=new Date;e.fecha=X(a).substring(0,10),e.hora_inicial=R(),i.ordentrabajo_ids=i.nombresOT.map((t,l)=>{var _;return{title:(_=t.Item)==null?void 0:_.replace(/_/g," "),value:l}})}e.ordentrabajo_ids&&e.ordentrabajo_ids.value!=null&&(e.nombreTablero=i.nombresOT[e.ordentrabajo_ids.value][k[0]],e.OTItem=i.nombresOT[e.ordentrabajo_ids.value].Item,i.soloUnaVez&&E())}else i.BanderaTipo=!0}),x(()=>e.tipoReporte,a=>{e.actividad_id=null,e.centrotrabajo_id=null,e.disponibilidad_id=null,e.operario_id=null,e.ordentrabajo_id=null,e.reproceso_id=null,e.ordentrabajo_ids=null,e.otitem=null,e.nombreTablero=null,e.OTItem=null,e.TiempoEstimado=null}),x(()=>e.ordentrabajo_ids,a=>{i.soloUnaVez=!0}),x(()=>e.centrotrabajo_id,a=>{if(a&&typeof a.value<"u"){let t="centrotrabajo"+a.title;i.actividad_id=d.losSelect[t],e.tipoReporte.value!==2&&e.ordentrabajo_ids?(i.tempCentro=e.centrotrabajo_id.value-1,e.TiempoEstimado=i.nombresOT[e.ordentrabajo_ids.value][g[i.tempCentro]]):console.log(e.ordentrabajo_ids)}e.actividad_id={title:"Seleccione actividad",value:null}});const O=()=>{e.ordentrabajo_id=e.ordentrabajo_ids,i.mensajeFalta=N(),e.hora_inicial=R(),i.mensajeFalta===""&&setTimeout(e.post(route("reporte.store"),{preserveScroll:!0,onSuccess:()=>{j("close"),e.reset()},onError:()=>alert(JSON.stringify(e.errors,null,4)),onFinish:()=>null}),500)},U=[{title:"Actividad",value:0},{title:"Reproceso",value:1},{title:"Disponibilidad(paro)",value:2}],T=["Nombre Tablero","% avance","OT+Item","Tiempo estimado"],k=["Nombre_tablero","avance"];return(a,t)=>(c(),n("section",L,[s(G,{show:d.show,onClose:t[11]||(t[11]=l=>j("close")),maxWidth:"4xl"},{default:y(()=>[r("form",{class:"px-6 my-8",onSubmit:F(O,["prevent"])},[r("h2",K,b(a.lang().label.add)+" "+b(d.title),1),r("div",Q,[d.numberPermissions>1?(c(),n("div",Y,[Z,s(o(p),{options:d.Trabajadores,label:"title",class:"dark:bg-gray-400",modelValue:o(e).user_id,"onUpdate:modelValue":t[0]||(t[0]=l=>o(e).user_id=l)},null,8,["options","modelValue"])])):m("",!0),r("div",ee,[oe,s(o(p),{options:U,label:"title",class:"dark:bg-gray-400",modelValue:o(e).tipoReporte,"onUpdate:modelValue":t[1]||(t[1]=l=>o(e).tipoReporte=l)},null,8,["modelValue"])]),r("div",ae,[s(v,{for:"fecha",value:a.lang().label.fecha,class:"dark:text-white"},null,8,["value"]),s(f,{id:"fecha",type:"date",class:"mt-1 block w-full bg-gray-200 dark:text-white",modelValue:o(e).fecha,"onUpdate:modelValue":t[2]||(t[2]=l=>o(e).fecha=l),disabled:"",placeholder:"fecha",error:o(e).errors.fecha},null,8,["modelValue","error"]),s(u,{class:"mt-2",message:o(e).errors.fecha},null,8,["message"])]),r("div",te,[s(v,{for:"hora_inicial",value:a.lang().label["hora inicial"]},null,8,["value"]),s(f,{id:"hora_inicial",type:"time",class:"mt-1 block w-full",disabled:"",modelValue:o(e).hora_inicial,"onUpdate:modelValue":t[3]||(t[3]=l=>o(e).hora_inicial=l),placeholder:"hora_inicial",error:o(e).errors.hora_inicial,step:"60"},null,8,["modelValue","error"]),s(u,{class:"mt-2",message:o(e).errors.hora_inicial},null,8,["message"])]),o(e).tipoReporte.value!==2?(c(),n("div",ie,[le,s(o(p),{options:i.ordentrabajo_ids,label:"title",class:"dark:bg-gray-400",modelValue:o(e).ordentrabajo_ids,"onUpdate:modelValue":t[4]||(t[4]=l=>o(e).ordentrabajo_ids=l)},null,8,["options","modelValue"]),s(u,{class:"mt-2",message:o(e).errors.ordentrabajo_id},null,8,["message"])])):m("",!0),o(e).ordentrabajo_ids&&o(e).tipoReporte.value!==2?(c(),n("div",se,[s(v,{for:a.index,value:T[0],class:""},null,8,["for","value"]),s(f,{id:a.index,type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",value:i.nombresOT[o(e).ordentrabajo_ids.value][k[0]]},null,8,["id","value"])])):m("",!0),o(e).ordentrabajo_ids&&o(e).tipoReporte.value!==2?(c(),n("div",re,[s(v,{for:a.index,value:T[1]},null,8,["for","value"]),s(f,{id:a.index,type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",value:i.nombresOT[o(e).ordentrabajo_ids.value][k[1]]},null,8,["id","value"])])):m("",!0),r("div",de,[ne,s(o(p),{options:i.centrotrabajo_id,label:"title",class:"dark:bg-gray-400",modelValue:o(e).centrotrabajo_id,"onUpdate:modelValue":t[5]||(t[5]=l=>o(e).centrotrabajo_id=l)},null,8,["options","modelValue"]),s(u,{class:"mt-2",message:o(e).errors.centrotrabajo_id},null,8,["message"])]),o(e).ordentrabajo_ids&&o(e).centrotrabajo_id&&o(e).tipoReporte.value!==2?(c(),n("div",ce,[s(v,{for:a.index,value:T[3]},null,8,["for","value"]),s(f,{id:a.index,type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200 dark:bg-gray-400 dark:text-white",modelValue:o(e).TiempoEstimado,"onUpdate:modelValue":t[6]||(t[6]=l=>o(e).TiempoEstimado=l)},null,8,["id","modelValue"])])):m("",!0),o(e).tipoReporte.value==0||o(e).tipoReporte.value==1?(c(),n("div",me,[ue,s(o(p),{options:i.actividad_id,label:"title",required:"",modelValue:o(e).actividad_id,"onUpdate:modelValue":t[7]||(t[7]=l=>o(e).actividad_id=l),class:"dark:bg-gray-400"},null,8,["options","modelValue"]),s(u,{class:"mt-2",message:o(e).errors.actividad_id},null,8,["message"])])):m("",!0),o(e).tipoReporte.value==1?(c(),n("div",pe,[_e,s(o(p),{options:i.reproceso_id,label:"title",required:"",modelValue:o(e).reproceso_id,"onUpdate:modelValue":t[8]||(t[8]=l=>o(e).reproceso_id=l),class:"dark:bg-gray-400"},null,8,["options","modelValue"]),s(u,{class:"mt-2",message:o(e).errors.reproceso_id},null,8,["message"])])):m("",!0),o(e).tipoReporte.value==2?(c(),n("div",be,[ge,s(o(p),{options:i.disponibilidad_id,label:"title",required:"",modelValue:o(e).disponibilidad_id,"onUpdate:modelValue":t[9]||(t[9]=l=>o(e).disponibilidad_id=l),class:"dark:bg-gray-400"},null,8,["options","modelValue"]),s(u,{class:"mt-2",message:o(e).errors.disponibilidad_id},null,8,["message"])])):m("",!0)]),r("div",ve,[i.mensajeFalta!==""?(c(),n("h2",fe,b(i.mensajeFalta),1)):m("",!0),i.mensajeTiemposAuto!==""?(c(),n("h2",je,b(i.mensajeTiemposAuto),1)):m("",!0),s(q,{disabled:o(e).processing,onClick:t[10]||(t[10]=l=>j("close"))},{default:y(()=>[w(b(a.lang().button.close),1)]),_:1},8,["disabled"]),s(P,{class:H(["ml-3",{"opacity-25":o(e).processing}]),disabled:o(e).processing,onClick:O},{default:y(()=>[w(b(o(e).processing?a.lang().button.add+"...":a.lang().button.add),1)]),_:1},8,["class","disabled"])])],40,W)]),_:1},8,["show"])]))}};export{Re as default};
