import{l as q,T as x,k as F,m as U,f as p,o as u,a,w as m,b as c,d as N,t as v,g as A,F as y,p as h,u as s,e as g,n as B}from"./app-Cq1znuMy.js";import{_}from"./InputError-WpjbGGA7.js";import{_ as b}from"./InputLabel-DT5ITww_.js";import{_ as M}from"./Modal-qBkqJmba.js";import{_ as V}from"./PrimaryButton-C4YOsuaB.js";import{_ as O}from"./SecondaryButton-BnrCYek9.js";import{_ as k}from"./TextInput-CxVKhdog.js";/* empty css                   */import{_ as H}from"./DangerButton-BmGSuYS8.js";import{C as P}from"./vue-select.es-wsHHmxmz.js";const T={class:"space-y-6"},z={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},D={class:"grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-3 gap-6 2xl:gap-8"},I={key:0,id:"SelectVue"},L={key:1,class:""},Q={class:"flex my-5 gap-8"},R={class:"my-8 flex justify-end"},re={__name:"Edit",props:{show:Boolean,title:String,Equipoa:Object,titulos:Object,losSelect:Object},emits:["close"],setup(E,{emit:S}){const t=E,f=S,d=q({printForm:[],provedores:[],recuperar:!0});function w(){d.provedores.push(0),console.log("=>(Edit.vue:33) data.provedores",d.provedores),e.proveedor_id.push(t.losSelect[0][0])}let $=()=>{d.provedores.length>1&&(d.provedores.length=d.provedores.length-1,e.proveedor_id.length=e.proveedor_id.length-1)};const C=t.titulos.map(l=>l.order),e=x({...Object.fromEntries(C.map(l=>[l,""])),proveedor_id:[]});F(()=>{if(t.numberPermissions>9){const l=Math.floor(Math.random()*9+1);e.nombre="admin orden trabajo "+l,e.codigo=l}}),t.titulos.forEach(l=>{d.printForm.push({idd:l.order,label:l.label,type:l.type,value:e[l.order]})}),U(()=>{t.show?(e.errors={},d.provedores.length=0,d.recuperar&&l()):(e.reset(),d.recuperar=!0);function l(){d.recuperar=!1,t.titulos.forEach(r=>{e[r.order]=t.Equipoa[r.order]}),t.Equipoa.proveedor_ids.forEach((r,o)=>{d.provedores.push(0);const n=t.losSelect[0].find(i=>i.value===r);e.proveedor_id.push(n),console.log("=>(Edit.vue:73) encontrado",n)})}});const j=()=>{var l;e.put(route("Equipo.update",(l=t.Equipoa)==null?void 0:l.id),{preserveScroll:!0,onSuccess:()=>{f("close")},onError:()=>null,onFinish:()=>{e.reset(),d.provedores.length=0}})};return(l,r)=>(u(),p("section",T,[a(M,{show:t.show,onClose:r[4]||(r[4]=o=>f("close")),maxWidth:"xl7"},{default:m(()=>[c("form",{class:"p-6",onSubmit:r[3]||(r[3]=N((...o)=>l.create&&l.create(...o),["prevent"]))},[c("h2",z,v(l.lang().label.edit)+" "+v(t.title),1),c("div",D,[(u(!0),p(y,null,h(d.printForm,(o,n)=>(u(),p("div",{key:n},[o.type==="time"?(u(),p("div",I,[a(b,{for:o.label,value:l.lang().label[o.label]},null,8,["for","value"]),a(k,{id:o.idd,type:o.type,class:"mt-1 block w-full",modelValue:s(e)[o.idd],"onUpdate:modelValue":i=>s(e)[o.idd]=i,required:"",placeholder:o.label,error:s(e).errors[o.idd],step:"3600"},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder","error"]),a(_,{class:"mt-2",message:s(e).errors[o.idd]},null,8,["message"])])):(u(),p("div",L,[a(b,{for:o.label,value:l.lang().label[o.label]},null,8,["for","value"]),a(k,{id:o.idd,type:o.type,class:"mt-1 block w-full",modelValue:s(e)[o.idd],"onUpdate:modelValue":i=>s(e)[o.idd]=i,required:"",placeholder:o.label,error:s(e).errors[o.idd]},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder","error"]),a(_,{class:"mt-2",message:s(e).errors[o.idd]},null,8,["message"])]))]))),128)),Array.isArray(d.provedores)&&d.provedores.length?(u(!0),p(y,{key:0},h(d.provedores,(o,n)=>(u(),p("div",{key:n,id:"SelectVue",class:""},[r[5]||(r[5]=c("label",{name:"labelSelectVue"}," Proveedor ",-1)),a(s(P),{options:t.losSelect[0],modelValue:s(e).proveedor_id[n],"onUpdate:modelValue":i=>s(e).proveedor_id[n]=i,label:"title"},null,8,["options","modelValue","onUpdate:modelValue"]),a(_,{class:"mt-2",message:s(e).errors["proveedor_id."+n+".value"]},null,8,["message"])]))),128)):A("",!0),c("div",Q,[a(V,{type:"button",disabled:s(e).processing,onClick:r[0]||(r[0]=o=>w())},{default:m(()=>r[6]||(r[6]=[g(" Agregar proveedor ")])),_:1,__:[6]},8,["disabled"]),a(H,{type:"button",disabled:s(e).processing,onClick:r[1]||(r[1]=o=>s($)())},{default:m(()=>r[7]||(r[7]=[g(" Quitar proveedor ")])),_:1,__:[7]},8,["disabled"])])]),c("div",R,[a(O,{disabled:s(e).processing,onClick:r[2]||(r[2]=o=>f("close"))},{default:m(()=>[g(v(l.lang().button.close),1)]),_:1},8,["disabled"]),a(V,{class:B(["ml-3",{"opacity-25":s(e).processing}]),disabled:s(e).processing,onClick:j},{default:m(()=>[g(v(s(e).processing?l.lang().button.save+"...":l.lang().button.save),1)]),_:1},8,["class","disabled"])])],32)]),_:1},8,["show"])]))}};export{re as default};
