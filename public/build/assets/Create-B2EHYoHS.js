import{l as W,T as J,k as K,m as Q,s as T,f as c,o as p,a as i,w as h,b as s,d as X,c as Y,g as j,t as u,F as I,p as B,u as t,e as g,x as O,G as R,n as Z}from"./app-Cq1znuMy.js";import{_}from"./InputError-WpjbGGA7.js";import{_ as b}from"./InputLabel-DT5ITww_.js";import{_ as ee}from"./Modal-qBkqJmba.js";import{_ as le}from"./PrimaryButton-C4YOsuaB.js";import{_ as oe}from"./SecondaryButton-BnrCYek9.js";import{_ as v}from"./TextInput-CxVKhdog.js";/* empty css             */import{C as ae}from"./vue-select.es-wsHHmxmz.js";/* empty css                   */import P from"./Add_Sub_equipos-h-xPCDm8.js";const se={class:"space-y-6"},te={class:"text-xl 2xl:text-3xl font-bold tracking-tight text-gray-900 dark:text-white my-6"},re={class:"grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-4 gap-8"},ie={key:0,id:"SelectVue"},de={key:1,class:""},ne={key:2,class:""},ue={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-6 gap-16 my-4"},pe=["name"],me={class:"grid grid-cols-2 mt-2"},ce={class:"mx-1 mt-6 text-lg"},ge={class:"inline-block"},_e=["onUpdate:modelValue"],be={class:"inline-block col-span-full"},ve=["onUpdate:modelValue"],ye={class:"flex"},qe={class:"inline-block mx-1 text-sm"},fe={class:"inline-block mx-1 text-sm"},he={class:"inline-block mx-1 text-sm"},Ve={class:"inline-block mx-1 text-sm"},ke={class:"grid grid-cols-1 md:grid-cols-3 2xl:grid-cols-5 gap-8 my-8 hover:bg-gray-50"},xe={class:"col-span-1"},we={class:"col-span-1"},Ue={class:"col-span-1"},Ee={class:"my-8 flex justify-end"},Re={__name:"Create",props:{show:Boolean,title:String,roles:Object,titulos:Object,losSelect:Object,numberPermissions:Number},emits:["close"],setup(z,{emit:A}){const m=z,q=A,r=W({params:{pregunta:""},subtotal:0,equipos:[{equipo_selec:null,cantidad:1}]});function V(o){for(;r.equipos.length<o;)r.equipos.push({equipo_selec:null,cantidad:1});for(;r.equipos.length>o;)r.equipos.pop()}const D=["numero","valor_unitario_item","valor_total_item","oferta_id","conteo_items","cantidad"],G=[];let H=m.titulos.map(o=>{if(!G.includes(o.order))return o.order});const f=[];m.titulos.forEach(o=>{D.includes(o.order)||f.push({idd:o.order,label:o.label,type:o.type})});const e=J({...Object.fromEntries(H.map(o=>[o,""]))});K(()=>{if(e.conteo_items=1,m.numberPermissions>9){const o=Math.floor(Math.random()*90+1);e.numero="numero gen "+o,e.nombre="nombre gen "+o,e.descripcion="descripcion gen "+o,e.valor_unitario_item=0,e.cantidad=0}}),Q(()=>{m.show&&(e.errors={})}),T(()=>e.cantidad,()=>k(),{deep:!0}),T(()=>r.equipos,()=>k(),{deep:!0});function k(){r.equipos.forEach((o,a)=>{var n;const l=parseFloat((n=o==null?void 0:o.equipo_selec)==null?void 0:n.Valor_Unit)||0,d=parseInt(o==null?void 0:o.cantidad)||0;l&&d&&(r.equipos[a].subtotalequip=l*d)}),console.table(r.equipos),e.valor_unitario_item=0,r.equipos.forEach(o=>{e.valor_unitario_item+=parseFloat(o.subtotalequip)||0}),e.valor_total_item=e.valor_unitario_item*e.cantidad}function L(){let o=!0;return f.forEach(a=>{if(!e[a.idd])return o=!1,o}),o}const x=()=>{L()?e.post(route("Item.store"),{preserveScroll:!0,onSuccess:()=>{q("close"),e.reset()},onError:()=>null,onFinish:()=>null}):console.log("Hay campos vacios")};return(o,a)=>(p(),c("section",se,[i(ee,{show:m.show,onClose:a[4]||(a[4]=l=>q("close")),maxWidth:"xl10"},{default:h(()=>[s("form",{class:"py-12 px-8 xl:px-20 mb-16",onSubmit:X(x,["prevent"])},[s("h2",te," 🛠️ Registrar Nuevo "+u(m.title),1),s("div",re,[(p(),c(I,null,B(f,(l,d)=>s("div",{key:d},[l.type==="time"?(p(),c("div",ie,[i(b,{for:l.label,value:o.lang().label[l.label]},null,8,["for","value"]),i(v,{id:l.idd,type:l.type,class:"mt-1 block w-full",modelValue:t(e)[l.idd],"onUpdate:modelValue":n=>t(e)[l.idd]=n,required:"",placeholder:l.label,error:t(e).errors[l.idd],step:"3600"},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder","error"]),i(_,{class:"mt-2",message:t(e).errors[l.idd]},null,8,["message"])])):l.type==="integer"?(p(),c("div",de,[i(b,{for:l.label,value:o.lang().label[l.label]},null,8,["for","value"]),i(v,{id:l.idd,type:"number",class:"mt-1 block w-full",modelValue:t(e)[l.idd],"onUpdate:modelValue":n=>t(e)[l.idd]=n,required:"",placeholder:l.label,error:t(e).errors[l.idd]},null,8,["id","modelValue","onUpdate:modelValue","placeholder","error"]),i(_,{class:"mt-2",message:t(e).errors[l.idd]},null,8,["message"])])):l.type==="text"||l.type==="string"?(p(),c("div",ne,[i(b,{for:l.label,value:o.lang().label[l.label]+" del Item"},null,8,["for","value"]),i(v,{id:l.idd,type:l.type,class:"mt-1 block w-full",modelValue:t(e)[l.idd],"onUpdate:modelValue":n=>t(e)[l.idd]=n,required:"",placeholder:l.label,error:t(e).errors[l.idd]},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder","error"]),i(_,{class:"mt-2",message:t(e).errors[l.idd]},null,8,["message"])])):j("",!0)])),64))]),a[13]||(a[13]=s("hr",{class:"border-collapse border border-b-2 border-gray-300 my-4"},null,-1)),a[14]||(a[14]=s("h2",{class:"text-lg 2xl:text-2xl font-medium text-gray-900 dark:text-gray-100 mt-3"}," Agrege los equipos ",-1)),i(P,{initialEquipos:r.equipos.length,onUpdateEquipos:V},null,8,["initialEquipos"]),s("div",ue,[(p(!0),c(I,null,B(r.equipos,(l,d)=>{var n,w,U,E,S,C,$,F,M,N;return p(),c("div",{key:d,id:"SelectVue",class:"col-span-2 xl:col-span-2"},[s("label",{name:"labelSelectVue_"+d},"Equipo "+u(d+1),9,pe),i(t(ae),{options:m.losSelect.Equipo,modelValue:r.equipos[d].equipo_selec,"onUpdate:modelValue":y=>r.equipos[d].equipo_selec=y,label:"title",class:"mt-1 block w-full col-span-2"},null,8,["options","modelValue","onUpdate:modelValue"]),s("div",me,[s("label",ce,[a[5]||(a[5]=s("b",null,"Val Unitario: ",-1)),g(u(((w=(n=r.equipos[d])==null?void 0:n.equipo_selec)==null?void 0:w.Valor_Unit)??""),1)]),s("div",ge,[a[6]||(a[6]=s("label",{class:"font-semibold"},"Cantidad:",-1)),O(s("input",{type:"number",min:"1","onUpdate:modelValue":y=>r.equipos[d].cantidad=y,class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 rounded-md shadow-sm mt-1 block w-full"},null,8,_e),[[R,r.equipos[d].cantidad,void 0,{number:!0}]])]),s("div",be,[a[7]||(a[7]=s("label",{class:"font-semibold"},"Total Equipo:",-1)),O(s("input",{type:"number",disabled:"","onUpdate:modelValue":y=>r.equipos[d].subtotalequip=y,class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 bg-gray-300 dark:bg-gray-600 rounded-md shadow-sm mt-1 block w-full"},null,8,ve),[[R,r.equipos[d].subtotalequip,void 0,{number:!0}]])]),a[12]||(a[12]=s("hr",{class:"border-[1px] border-gray-300 my-2 col-span-full"},null,-1)),s("div",ye,[s("label",qe,[a[8]||(a[8]=s("b",null,"Tipo: ",-1)),g(u(((E=(U=r.equipos[d])==null?void 0:U.equipo_selec)==null?void 0:E.Tipo)??""),1)]),s("label",fe,[a[9]||(a[9]=s("b",null,"Ref: ",-1)),g(u(((C=(S=r.equipos[d])==null?void 0:S.equipo_selec)==null?void 0:C.Referencia)??""),1)]),s("label",he,[a[10]||(a[10]=s("b",null,"Marca: ",-1)),g(u(((F=($=r.equipos[d])==null?void 0:$.equipo_selec)==null?void 0:F.Marca)??""),1)]),s("label",Ve,[a[11]||(a[11]=s("b",null,"Unidad: ",-1)),g(u(((N=(M=r.equipos[d])==null?void 0:M.equipo_selec)==null?void 0:N.Uni)??""),1)])])])])}),128))]),r.equipos.length>6?(p(),Y(P,{key:0,initialEquipos:r.equipos.length,onUpdateEquipos:V},null,8,["initialEquipos"])):j("",!0),a[15]||(a[15]=s("hr",{class:"border-collapse border border-b-2 border-gray-300 my-4"},null,-1)),a[16]||(a[16]=s("h2",{class:"text-lg 2xl:text-2xl font-medium text-gray-900 dark:text-gray-100 mt-3"}," Total del item ",-1)),s("div",ke,[s("div",xe,[i(b,{value:o.lang().label.cantidad+" del Item"},null,8,["value"]),i(v,{type:"number",class:"mt-1 block w-full",modelValue:t(e).cantidad,"onUpdate:modelValue":a[0]||(a[0]=l=>t(e).cantidad=l),required:"",placeholder:o.lang().placeholder.cantidad,max:"10000000",error:t(e).errors.cantidad},null,8,["modelValue","placeholder","error"]),i(_,{class:"mt-2",message:t(e).errors.cantidad},null,8,["message"])]),s("div",we,[i(b,{value:o.lang().label.valor_unitario_item},null,8,["value"]),i(v,{type:"number",class:"mt-1 block w-full bg-gray-300",modelValue:t(e).valor_unitario_item,"onUpdate:modelValue":a[1]||(a[1]=l=>t(e).valor_unitario_item=l),disabled:"",placeholder:o.lang().placeholder.valor_unitario_item,error:t(e).errors.valor_unitario_item},null,8,["modelValue","placeholder","error"]),i(_,{class:"mt-2",message:t(e).errors.valor_unitario_item},null,8,["message"])]),s("div",Ue,[i(b,{value:o.lang().label.valor_total_item},null,8,["value"]),i(v,{type:"number",class:"mt-1 block w-full bg-gray-300",modelValue:t(e).valor_total_item,"onUpdate:modelValue":a[2]||(a[2]=l=>t(e).valor_total_item=l),disabled:"",placeholder:o.lang().placeholder.valor_total_item,error:t(e).errors.valor_total_item},null,8,["modelValue","placeholder","error"]),i(_,{class:"mt-2",message:t(e).errors.valor_total_item},null,8,["message"])])]),s("div",Ee,[i(oe,{disabled:t(e).processing,onClick:a[3]||(a[3]=l=>q("close"))},{default:h(()=>[g(u(o.lang().button.close),1)]),_:1},8,["disabled"]),i(le,{class:Z(["ml-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing,onClick:x},{default:h(()=>[g(u(o.lang().button.add)+" "+u(t(e).processing?"...":""),1)]),_:1},8,["class","disabled"])])],32)]),_:1},8,["show"])]))}};export{Re as default};
