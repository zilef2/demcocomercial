import{l as x,T as $,m as C,f as u,o as f,a as o,w as g,b as i,d as V,t as m,u as t,F as j,p as E,x as B,y as F,e as _,n as N}from"./app-Cq1znuMy.js";import{_ as v}from"./InputError-WpjbGGA7.js";import{_ as d}from"./InputLabel-DT5ITww_.js";import{_ as U}from"./Modal-qBkqJmba.js";import{_ as D}from"./PrimaryButton-C4YOsuaB.js";import{_ as M}from"./SecondaryButton-BnrCYek9.js";import{_ as O}from"./TextInput-CxVKhdog.js";import{_ as T}from"./Checkbox-BbUHU8JM.js";const q={class:"space-y-6"},z={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},A={class:"my-6 space-y-4"},L={class:"flex justify-start items-center space-x-2 mt-2"},G={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mt-2"},H=["id","value"],I={class:"flex justify-end"},Z={__name:"Edit",props:{show:Boolean,title:String,role:Object,permissions:Object},emits:["close"],setup(y,{emit:b}){const a=y,n=x({multipleSelect:!1}),c=b,e=$({name:"",permissions:[]}),h=()=>{var s;e.put(route("role.update",(s=a.role)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{c("close"),e.reset(),n.multipleSelect=!1},onError:()=>null,onFinish:()=>null})};C(()=>{var s,l,r;a.show&&(e.errors={},e.name=(s=a.role)==null?void 0:s.name,e.permissions=(l=a.role.permissions)==null?void 0:l.map(p=>p.id)),a.permissions.length==((r=a.role)==null?void 0:r.permissions.length)?n.multipleSelect=!0:n.multipleSelect=!1});const k=s=>{s.target.checked===!1?e.permissions=[]:(e.permissions=[],a.permissions.forEach(l=>{e.permissions.push(l.id)}))},S=()=>{a.permissions.length==e.permissions.length?n.multipleSelect=!0:n.multipleSelect=!1};return(s,l)=>(f(),u("section",q,[o(U,{show:a.show,onClose:l[4]||(l[4]=r=>c("close"))},{default:g(()=>[i("form",{class:"p-6",onSubmit:V(h,["prevent"])},[i("h2",z,m(s.lang().label.edit)+" "+m(a.title),1),i("div",A,[i("div",null,[o(d,{for:"name",value:s.lang().label.role},null,8,["value"]),o(O,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:t(e).name,"onUpdate:modelValue":l[0]||(l[0]=r=>t(e).name=r),required:"",placeholder:s.lang().placeholder.name,error:t(e).errors.name},null,8,["modelValue","placeholder","error"]),o(v,{class:"mt-2",message:t(e).errors.name},null,8,["message"])]),i("div",null,[o(d,{value:s.lang().label.permission},null,8,["value"]),o(v,{class:"mt-2",message:t(e).errors.permissions},null,8,["message"]),i("div",L,[o(T,{id:"permission-all",checked:n.multipleSelect,"onUpdate:checked":l[1]||(l[1]=r=>n.multipleSelect=r),onChange:k},null,8,["checked"]),o(d,{for:"permission-all",value:s.lang().label.check_all},null,8,["value"])]),i("div",G,[(f(!0),u(j,null,E(a.permissions,(r,p)=>(f(),u("div",{class:"flex items-center justify-start space-x-2",key:p},[B(i("input",{onChange:S,class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",id:"permission_"+r.id,value:r.id,"onUpdate:modelValue":l[2]||(l[2]=w=>t(e).permissions=w)},null,40,H),[[F,t(e).permissions]]),o(d,{for:"permission_"+r.id,value:r.name},null,8,["for","value"])]))),128))])])]),i("div",I,[o(M,{disabled:t(e).processing,onClick:l[3]||(l[3]=r=>c("close"))},{default:g(()=>[_(m(s.lang().button.close),1)]),_:1},8,["disabled"]),o(D,{class:N(["ml-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing,onClick:h},{default:g(()=>[_(m(t(e).processing?s.lang().button.save+"...":s.lang().button.save),1)]),_:1},8,["class","disabled"])])],32)]),_:1},8,["show"])]))}};export{Z as default};
