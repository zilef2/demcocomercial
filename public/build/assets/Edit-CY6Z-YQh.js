import{l as N,T as M,k as O,m as F,s as U,f as p,o as f,a as s,w as d,b as i,d as D,t as c,u as r,F as H,p as T,e as m,n as P}from"./app-Cq1znuMy.js";import{_}from"./InputError-WpjbGGA7.js";import{_ as h}from"./InputLabel-DT5ITww_.js";import{_ as q}from"./Modal-qBkqJmba.js";import{_ as b}from"./PrimaryButton-C4YOsuaB.js";import{_ as z}from"./SecondaryButton-BnrCYek9.js";import{_ as L}from"./TextInput-CxVKhdog.js";import{C as w}from"./vue-select.es-wsHHmxmz.js";/* empty css                   */import"./vue-datepicker-C1EfqZL1.js";import{r as A,a as G}from"./XCircleIcon-CzOHyAOq.js";const I={class:"space-y-6"},J={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-56 scrollbar-sidebar"},Q={class:""},R={id:"SelectVue"},W={class:"flex my-5 gap-8"},X={class:"my-8 flex justify-end"},de={__name:"Edit",props:{show:Boolean,title:String,generica:Object,titulos:Object,losSelect:Object},emits:["close"],setup(y,{emit:k}){const l=y,u=k,a=N({centros:[0],valido:!0,mensajeError:""}),E=l.titulos.map(o=>o.order),e=M({...Object.fromEntries(E.map(o=>[o,""])),centro_id:[l.losSelect[0]]});O(()=>{});const V=[];l.titulos.forEach(o=>{V.push({idd:o.order,label:o.label,type:o.type,value:e[o.order]})});function j(){a.centros.push(0),e.centro_id.push(l.losSelect[0])}let S=()=>{a.centros.length=a.centros.length-1,e.centro_id.length=e.centro_id.length-1};function C(){a.centros=l.generica.centro_trabajos,a.centros.map((o,t)=>{let n={title:o.nombre,value:o.id};return e.centro_id[t]=n,n})}F(()=>{l.show?(e.errors={},l.titulos.forEach(o=>{e[o.order]=l.generica[o.order]})):e.centro_id[0]={title:"Disponibilidad no seleccionada",value:0}}),U(()=>l.show,o=>{o&&C()});let $=()=>{try{if(a.valido=!0,!e.nombre||!e.tipo)throw a.valido=!1,console.log(e.nombre,"form.nombre"),console.log(e.tipo,"form.tipo"),new Error("BreakException");e.centro_id.forEach(o=>{if(o.value===0)throw a.valido=!1,new Error("BreakException")})}catch{a.valido=!1}};const g=()=>{var o;$(),a.valido?e.put(route("disponibilidad.update",(o=l.generica)==null?void 0:o.id),{preserveScroll:!0,onSuccess:()=>{u("close"),e.reset()},onError:()=>null,onFinish:()=>null}):(a.mensajeError="Hay elementos vacios",alert(a.mensajeError))},x=[{title:"Seleccione un tipo",value:0},{title:"Programado",value:"Programado"},{title:"No programado",value:"No programado"}];return(o,t)=>(f(),p("section",I,[s(q,{show:l.show,onClose:t[5]||(t[5]=n=>u("close"))},{default:d(()=>[i("form",{class:"p-6",onSubmit:D(g,["prevent"])},[i("h2",J,c(o.lang().label.edit)+" "+c(l.title),1),i("div",K,[i("div",Q,[s(h,{for:"nombre",value:o.lang().label.nombre},null,8,["value"]),s(L,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:r(e).nombre,"onUpdate:modelValue":t[0]||(t[0]=n=>r(e).nombre=n),required:"",placeholder:o.nombre,error:r(e).errors.nombre},null,8,["modelValue","placeholder","error"]),s(_,{class:"mt-2",message:r(e).errors.nombre},null,8,["message"])]),i("div",null,[s(h,{for:"tipo",value:o.lang().label.Tipo},null,8,["value"]),s(r(w),{options:x,label:"title",class:"mt-1 dark:bg-gray-500 rounded-lg dark:text-gray-600",modelValue:r(e).tipo,"onUpdate:modelValue":t[1]||(t[1]=n=>r(e).tipo=n)},null,8,["modelValue"])]),(f(!0),p(H,null,T(a.centros,(n,v)=>(f(),p("div",R,[t[6]||(t[6]=i("label",{name:"labelSelectVue",class:"dark:text-white"}," Centro de trabajo ",-1)),s(r(w),{options:l.losSelect,label:"title",class:"dark:bg-gray-500 rounded-lg dark:text-gray-600",modelValue:r(e).centro_id[v],"onUpdate:modelValue":B=>r(e).centro_id[v]=B},null,8,["options","modelValue","onUpdate:modelValue"]),s(_,{class:"mt-2",message:r(e).errors.centro_id},null,8,["message"])]))),256)),i("div",W,[s(b,{type:"button",disabled:r(e).processing,onClick:t[2]||(t[2]=n=>j())},{default:d(()=>[s(r(A),{class:"w-6 h-6"}),t[7]||(t[7]=m(" Mas centros "))]),_:1,__:[7]},8,["disabled"]),s(b,{type:"button",class:"bg-red-500",disabled:r(e).processing,onClick:t[3]||(t[3]=n=>r(S)())},{default:d(()=>[s(r(G),{class:"w-6 h-6"}),t[8]||(t[8]=m(" Menos centros "))]),_:1,__:[8]},8,["disabled"])])]),i("div",X,[s(z,{disabled:r(e).processing,onClick:t[4]||(t[4]=n=>u("close"))},{default:d(()=>[m(c(o.lang().button.close),1)]),_:1},8,["disabled"]),s(b,{class:P(["ml-3",{"opacity-25":r(e).processing}]),disabled:r(e).processing,onClick:g},{default:d(()=>[m(c(r(e).processing?o.lang().button.save+"...":o.lang().button.save),1)]),_:1},8,["class","disabled"])])],32)]),_:1},8,["show"])]))}};export{de as default};
