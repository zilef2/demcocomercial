import{k as N,K as j,p as I,O as U,q as B,f as l,a as c,u as m,w as _,F as h,s as T,o as t,Z as z,b as s,c as u,d as w,t as p,g as d,i as L,m as g,v as x,x as R,y as v}from"./app-551012d8.js";import{_ as A}from"./AuthenticatedLayout-876c1694.js";import{_ as M}from"./Breadcrumb-f8dcf550.js";import{_ as K}from"./TextInput-4b8270d6.js";import{_ as P}from"./PrimaryButton-bd076b11.js";import{_ as Z}from"./SelectInput-de862fb7.js";import{_ as G}from"./DangerButton-1248510a.js";import{r as H,a as J,_ as Q}from"./Pagination-dcee69fa.js";import W from"./Create-556e6a6c.js";import X from"./Edit-3b2ab277.js";import Y from"./Delete-ff7c9162.js";import{_ as F}from"./Checkbox-f37bd788.js";import{_ as ee}from"./InfoButton-f9740252.js";import{n as S,f as $}from"./global-6d1c7c87.js";import{r as te}from"./PencilIcon-7035d21d.js";import"./index-6dbb85e0.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./open-closed-305ccb86.js";import"./Toast-07128877.js";/* empty css                                              */import"./InputError-23c0a787.js";import"./InputLabel-8615b764.js";import"./Modal-e8455b5b.js";import"./SecondaryButton-ec5b0153.js";/* empty css             */import"./vue-select.es-e7a5a940.js";/* empty css                   */const re={class:"space-y-4"},se={class:"px-4 sm:px-0"},oe={class:"rounded-lg overflow-hidden w-fit"},ae={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},ie={class:"flex justify-between p-2"},ne={class:"flex space-x-2"},le={class:"overflow-x-auto scrollbar-table"},de={key:0,class:"w-full"},pe={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},ce={class:"dark:bg-gray-900/50 text-left"},me={class:"px-2 py-4 text-center"},ue={key:0,class:"px-2 py-4"},be=s("th",{class:"px-1 py-4 text-center"},"#",-1),_e=["onClick"],ye={class:"mx-2 flex justify-between items-center"},fe={class:"flex-wrap"},he={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},ke=["value"],ge={key:0,class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3"},xe={class:"flex justify-center items-center"},we={class:"rounded-md overflow-hidden"},ve={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Pe={class:"max-w-lg overflow-hidden text-ellipsis"},Se={key:0,class:"block px-2 flex-wrap"},$e={key:1},qe={key:2},Oe={key:3},Ee={key:4},Ce={key:5},Ve={key:6},De={class:"border-t border-gray-600"},Ne={key:0,class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3 text-center"},je=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"}," Total: ",-1),Ie={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Ue={key:1,class:"text-center text-xl my-8"},Be={key:0,class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},ct={__name:"Index",props:{fromController:Object,total:Number,filters:Object,breadcrumbs:Object,perPage:Number,title:String,numberPermissions:Number,losSelect:Object},setup(b){const a=b,{_:q,debounce:O,pickBy:E}=T,e=N({params:{search:a.filters.search,field:a.filters.field,order:a.filters.order,perPage:a.perPage},Equipoo:null,selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,deleteOpen:!1,dataSet:j().props.app.perpage}),C=o=>{e.params.field=o,e.params.order=e.params.order==="asc"?"desc":"asc"};I(()=>q.cloneDeep(e.params),O(()=>{let o=E(e.params);U.get(route("Equipo.index"),o,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const V=o=>{var n;o.target.checked===!1?e.selectedId=[]:(n=a.fromController)==null||n.data.forEach(f=>{e.selectedId.push(f.id)})},D=()=>{var o;return e.multipleSelect=((o=a.fromController)==null?void 0:o.data.length)===e.selectedId.length},y=[{order:"codigo",label:"Codigo",type:"text"},{order:"descripcion",label:"Descripcion",type:"text"},{order:"tipo_fabricante",label:"Tipo Fabricante",type:"text"},{order:"proveeNombre",label:"proveeNombre",type:"text"},{order:"referencia_fabricante",label:"Referencia Fabricante",type:"text"},{order:"marca",label:"Marca",type:"text"},{order:"unidad_de_compra",label:"Unidad de Compra",type:"text"},{order:"precio_de_lista",label:"Precio de Lista",type:"number"},{order:"fecha_actualizacion",label:"Fecha actualizacion",type:"date"},{order:"descuento_basico",label:"Descuento Basico",type:"percent"},{order:"descuento_proyectos",label:"Descuento Proyectos",type:"percent"},{order:"precio_con_descuento",label:"Precio con Descuento",type:"number"},{order:"precio_con_descuento_proyecto",label:"Precio con Descuento Proyecto",type:"number"},{order:"precio_ultima_compra",label:"Precio Ultima Compra",type:"number"},{order:"precios_de_listas",label:"Precios de Listas",type:"text"},{order:"ruta_tiempos",label:"Ruta Tiempos",type:"text"},{order:"tiempos_chapisteria",label:"Tiempos Chapisteria",type:"number"}];return(o,n)=>{const f=B("tooltip");return t(),l(h,null,[c(m(z),{title:a.title},null,8,["title"]),c(A,null,{default:_(()=>[c(M,{title:b.title,breadcrumbs:b.breadcrumbs,class:"capitalize text-xl font-bold"},null,8,["title","breadcrumbs"]),s("div",re,[s("div",se,[s("div",oe,[o.can(["create equipo"])?(t(),u(P,{key:0,class:"rounded-none",onClick:n[0]||(n[0]=r=>e.createOpen=!0)},{default:_(()=>[w(p(o.lang().button.newo),1)]),_:1})):d("",!0),c(P,{class:"rounded-none"},{default:_(()=>[o.can(["create equipo"])?(t(),u(m(L),{key:0,href:o.route("EquipoUploadExcel")},{default:_(()=>[w(p(o.lang().button.upload),1)]),_:1},8,["href"])):d("",!0)]),_:1}),o.can(["create equipo"])?(t(),u(W,{key:1,numberPermissions:a.numberPermissions,titulos:y,show:e.createOpen,onClose:n[1]||(n[1]=r=>e.createOpen=!1),title:a.title,losSelect:a.losSelect},null,8,["numberPermissions","show","title","losSelect"])):d("",!0),o.can(["update equipo"])?(t(),u(X,{key:2,titulos:y,numberPermissions:a.numberPermissions,show:e.editOpen,onClose:n[2]||(n[2]=r=>e.editOpen=!1),Equipoa:e.Equipoo,title:a.title,losSelect:a.losSelect},null,8,["numberPermissions","show","Equipoa","title","losSelect"])):d("",!0),o.can(["delete equipo"])?(t(),u(Y,{key:3,numberPermissions:a.numberPermissions,show:e.deleteOpen,onClose:n[3]||(n[3]=r=>e.deleteOpen=!1),Equipoa:e.Equipoo,title:a.title},null,8,["numberPermissions","show","Equipoa","title"])):d("",!0)])]),s("div",ae,[s("div",ie,[s("div",ne,[c(Z,{modelValue:e.params.perPage,"onUpdate:modelValue":n[4]||(n[4]=r=>e.params.perPage=r),dataSet:e.dataSet},null,8,["modelValue","dataSet"])]),a.numberPermissions>1?(t(),u(K,{key:0,modelValue:e.params.search,"onUpdate:modelValue":n[5]||(n[5]=r=>e.params.search=r),type:"text",class:"block w-4/6 md:w-3/6 lg:w-2/6 rounded-lg",placeholder:"Codigo"},null,8,["modelValue"])):d("",!0)]),s("div",le,[a.total>0?(t(),l("table",de,[s("thead",pe,[s("tr",ce,[s("th",me,[c(F,{checked:e.multipleSelect,"onUpdate:checked":n[6]||(n[6]=r=>e.multipleSelect=r),onChange:V},null,8,["checked"])]),b.numberPermissions>1?(t(),l("th",ue,"Accion")):d("",!0),be,(t(),l(h,null,g(y,r=>s("th",{class:"px-2 py-4 cursor-pointer",onClick:k=>C(r.order)},[s("div",ye,[s("span",fe,p(o.lang().label[r.label]),1),c(m(H),{class:"w-4 h-4"})])],8,_e)),64))])]),s("tbody",null,[(t(!0),l(h,null,g(a.fromController.data,(r,k)=>(t(),l("tr",{key:k,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[s("td",he,[x(s("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:D,value:r.id,"onUpdate:modelValue":n[7]||(n[7]=i=>e.selectedId=i)},null,40,ke),[[R,e.selectedId]])]),b.numberPermissions>1?(t(),l("td",ge,[s("div",xe,[s("div",we,[x((t(),u(ee,{type:"button",onClick:i=>(e.editOpen=!0,e.Equipoo=r),class:"px-2 py-1.5 rounded-none"},{default:_(()=>[c(m(te),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[v,o.can(["update equipo"])],[f,o.lang().tooltip.edit]]),x((t(),u(G,{type:"button",onClick:i=>(e.deleteOpen=!0,e.Equipoo=r),class:"px-2 py-1.5 rounded-none"},{default:_(()=>[c(m(J),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[v,o.can(["delete equipo"])],[f,o.lang().tooltip.delete]])])])])):d("",!0),s("td",ve,p(++k),1),(t(),l(h,null,g(y,i=>s("td",Pe,[i.type==="text"?(t(),l("span",Se,p(r[i.order]),1)):d("",!0),i.type==="number"?(t(),l("span",$e,p(m(S)(r[i.order],0,!1)),1)):d("",!0),i.type==="dinero"?(t(),l("span",qe,p(m(S)(r[i.order],0,!0)),1)):d("",!0),i.type==="date"?(t(),l("span",Oe,p(m($)(r[i.order],!1)),1)):d("",!0),i.type==="datetime"?(t(),l("span",Ee,p(m($)(r[i.order],!0)),1)):d("",!0),i.type==="foreign"?(t(),l("span",Ce,p((r==null?void 0:r[i==null?void 0:i.nameid])??""),1)):d("",!0),i.type==="percent"?(t(),l("span",Ve,p(r[i.order]*100)+"% ",1)):d("",!0)])),64))]))),128)),s("tr",De,[b.numberPermissions>1?(t(),l("td",Ne," - ")):d("",!0),je,s("td",Ie,p(a.total),1)])])])):(t(),l("h2",Ue,"Sin Registros"))]),a.total>0?(t(),l("div",Be,[c(Q,{links:a.fromController,filters:e.params},null,8,["links","filters"])])):d("",!0)])])]),_:1})],64)}}};export{ct as default};
