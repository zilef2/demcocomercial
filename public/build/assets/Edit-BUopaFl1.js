import{l as X,T as H,k as K,m as Q,s as R,f as n,o as p,a as r,w as k,b as s,d as W,t as v,g as c,u as a,e as F,n as Y}from"./app-BhGvptmL.js";import{_ as b}from"./InputError-Ck0A_nV9.js";import{_ as f}from"./InputLabel-Fsg0RhcG.js";import{_ as Z}from"./Modal-CWveoFge.js";import{_ as ee}from"./PrimaryButton-BkUg86Bs.js";import{_ as oe}from"./SecondaryButton-sXq2m4Kv.js";import{_ as j}from"./TextInput-XsIzkty-.js";import{C as _}from"./vue-select.es-CcZCZQ2N.js";/* empty css                   */import"./vue-datepicker-BZOCypyi.js";import{L as T}from"./global-Dn-lfq_U.js";const ae={class:"space-y-6"},ie={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-4 gap-6"},de={key:0,id:"opcinesActividadO",class:"xl:col-span-2 col-span-1"},le={id:"opcinesActividadO",class:"xl:col-span-2 col-span-1"},re={class:"xl:col-span-1 col-span-1"},se={class:"col-span-1"},ne={key:1,id:"Sordentrabajo",class:"xl:col-span-2 col-span-1"},pe={key:2,class:"w-full lg:col-span-2 col-span-1"},ce={key:3,class:"w-full col-span-1"},me={id:"Scentrotrabajo",class:"col-span-1"},ue={key:4,class:"col-span-1"},be={key:5,id:"Sactividad",class:"xl:col-span-2 col-span-1"},_e={key:6,id:"Sreproceso",class:"xl:col-span-2 col-span-1"},ve={key:7,id:"Sdisponibilidad",class:"xl:col-span-3 col-span-1"},ge={class:"mb-8 mt-[360px] flex justify-end"},fe={key:0,class:"mx-12 px-8 text-lg font-medium text-red-600 bg-red-50 dark:text-gray-100"},je={key:1,class:"mx-12 px-8 text-lg font-medium text-gray-800 dark:text-gray-100"},Ie={__name:"Edit",props:{show:Boolean,title:String,generica:Object,losSelect:Object,numberPermissions:Number,valuesGoogleCabeza:Object,valuesGoogleBody:Object,Trabajadores:Object},emits:["close"],setup(G,{emit:M}){const t=G,y=M,S=[{title:"Actividad",value:0},{title:"Reproceso",value:1},{title:"Disponibilidad(paro)",value:2}],V=["Nombre Tablero","% avance","OT+Item","Tiempo estimado"],x=["Nombre_tablero","avance"],d=X({params:{pregunta:""},actividad_id:t.losSelect.actividad,centrotrabajo_id:t.losSelect.centrotrabajo,disponibilidad_id:t.losSelect.disponibilidad,ordentrabajo_id:t.losSelect.ordentrabajo,ordenTemporal:[],reproceso_id:t.losSelect.reproceso,temp_disponibilidad_id:null,temp_reproceso_id:null,temp_actividad_id:null,valorInactivo:"NA",cabeza:t.valuesGoogleCabeza,nombresOT:Object.values(t.valuesGoogleBody),ordentrabajo_ids:[],mensajeFalta:"",BanderaTipo:!0,mensajeTiemposAuto:"",soloUnaVez:!0}),e=H({...Object.fromEntries(["tipoReporte","fecha","hora_inicial","hora_final","actividad_id","centrotrabajo_id","disponibilidad_id","operario_id","ordentrabajo_id","reproceso_id","ordentrabajo_ids","otitem","user_id","numero_oferta","OTItem","TiempoEstimado"].map(i=>[i,""]))});K(()=>{t.numberPermissions>9});const h=["Tiempo_estimado_corte","Tiempo_estimado_doblez","Tiempo_estimado_soldadura","Tiempo_estimado_pulida","Tiempo_estimado_ensamble","Tiempo_estimado_cobre","Tiempo_estimado_cableado","Tiempo_estimado_Ing_mec","Tiempo_estimado_Ing_elec"];Q(()=>{if(t.show){if(e.errors={},e.ordentrabajo_ids&&e.ordentrabajo_ids.value!=null){e.numero_oferta=d.nombresOT[e.ordentrabajo_ids.value][x[0]],e.OTItem=d.nombresOT[e.ordentrabajo_ids.value].Item;let i=e.centrotrabajo_id.value-1;e.TiempoEstimado=d.nombresOT[e.ordentrabajo_ids.value][h[i]]}}else d.BanderaTipo=!0});let O=i=>{let o="";try{i.forEach((l,g)=>{if(typeof e[l]>"u"||e[l]===null||e[l].length===0)throw o=l,new Error("BreakException")})}catch{}return o},q=()=>{let i=e.tipoReporte.value,o=!0;const l=" es obligatorio";i==0&&(o=O(["ordentrabajo_ids","centrotrabajo_id","actividad_id"])),i==1&&(o=O(["centrotrabajo_id","ordentrabajo_ids","actividad_id","reproceso_id"])),i==2&&(o=O(["centrotrabajo_id","disponibilidad_id"]));let g={ordentrabajo_ids:"Orden trabajo",actividad_id:"Actividad",reproceso_id:"Reproceso",centrotrabajo_id:"Centro de trabajo",disponibilidad_id:"Disponibilidad"};return o!=""?g[o]+l:o};const P=()=>{var o;e.ordentrabajo_id=e.ordentrabajo_ids,console.log("ðŸ§ˆ debu form.tipoReporte.value:",e.tipoReporte.value),d.mensajeFalta=q();let i;i=T(t.losSelect.centrotrabajo,e.centrotrabajo_id),e.centrotrabajo_id=i!=""?i:"",e.tipoReporte.value===0&&(i=T(t.losSelect.actividad,e.actividad_id),e.actividad_id=i!=""?i:""),e.tipoReporte.value===1&&(i=T(t.losSelect.actividad,e.actividad_id),e.actividad_id=i!=""?i:"",i=T(t.losSelect.reproceso,e.reproceso_id),e.reproceso_id=i!=""?i:""),e.tipoReporte.value===2&&(i=T(t.losSelect.disponibilidad,e.disponibilidad_id),e.disponibilidad_id=i!=""?i:""),d.mensajeFalta==""&&e.put(route("reporte.update",(o=t.generica)==null?void 0:o.id),{preserveScroll:!0,onSuccess:()=>{y("close"),e.reset()},onError:()=>alert(JSON.stringify(e.errors,null,4)),onFinish:()=>null})};return R(()=>e.ordentrabajo_ids,i=>{d.soloUnaVez=!0,e.tipoReporte.value!==2&&e.ordentrabajo_ids?(d.tempCentro=e.centrotrabajo_id.value-1,e.TiempoEstimado=d.nombresOT[e.ordentrabajo_ids.value][h[d.tempCentro]]):console.log(e.ordentrabajo_ids)}),R(()=>t.show,()=>{var i,o,l,g,w,C,E,I,B,N,U,A,z,D;if(d.BanderaTipo){d.BanderaTipo=!1,e.tipoReporte=S[(i=t.generica)==null?void 0:i.tipoReporte],d.ordentrabajo_ids=d.nombresOT.map((u,m)=>{var $;return{title:($=u.Item)==null?void 0:$.replace(/_/g," "),value:m}}),d.ordenTemporal=d.nombresOT.map((u,m)=>({value:m,valueID:u.id}));let L=d.ordenTemporal.findIndex(u=>{var m;return u.valueID==((m=t.generica)==null?void 0:m.ordentrabajo_id)});e.ordentrabajo_ids=d.ordentrabajo_ids[L],e.centrotrabajo_id=d.centrotrabajo_id[(o=t.generica)==null?void 0:o.centrotrabajo_id],e.actividad_id=d.actividad_id[(l=t.generica)==null?void 0:l.actividad_id]?d.actividad_id[(g=t.generica)==null?void 0:g.actividad_id]:null,e.disponibilidad_id=d.disponibilidad_id[(w=t.generica)==null?void 0:w.disponibilidad_id]?d.disponibilidad_id[(C=t.generica)==null?void 0:C.disponibilidad_id]:null,e.reproceso_id=d.reproceso_id[(E=t.generica)==null?void 0:E.reproceso_id]?d.reproceso_id[(I=t.generica)==null?void 0:I.reproceso_id]:null,e.cantidad=(B=t.generica)==null?void 0:B.cantidad,e.fecha=(N=t.generica)==null?void 0:N.fecha,e.hora_inicial=(U=t.generica)==null?void 0:U.hora_inicial;let J=t.Trabajadores.findIndex(u=>{var m;return u.value==((m=t.generica)==null?void 0:m.operario_id)});e.user_id=t.Trabajadores[J],e.numero_oferta=(A=t.generica)==null?void 0:A.numero_oferta,e.OTItem=(z=t.generica)==null?void 0:z.OTItem,e.TiempoEstimado=(D=t.generica)==null?void 0:D.TiempoEstimado}else d.BanderaTipo=!t.show}),R(()=>e.centrotrabajo_id,(i,o)=>{if(i&&typeof i.value<"u"){let l="centrotrabajo"+i.title;d.actividad_id=t.losSelect[l],i.value!==t.generica.centrotrabajo_id&&(e.actividad_id={title:"Seleccione actividad",value:null})}}),(i,o)=>(p(),n("section",ae,[r(Z,{show:t.show,onClose:o[12]||(o[12]=l=>(y("close"),d.BanderaTipo=!0))},{default:k(()=>[s("form",{class:"px-6 my-8",onSubmit:o[11]||(o[11]=W((...l)=>i.create&&i.create(...l),["prevent"]))},[s("h2",ie,v(i.lang().label.edit)+" "+v(t.title),1),s("div",te,[t.numberPermissions>8?(p(),n("div",de,[o[13]||(o[13]=s("label",{name:""}," Reportar en nombre de: ",-1)),r(a(_),{options:t.Trabajadores,disabled:"",label:"title",modelValue:a(e).user_id,"onUpdate:modelValue":o[0]||(o[0]=l=>a(e).user_id=l)},null,8,["options","modelValue"])])):c("",!0),s("div",le,[o[14]||(o[14]=s("label",{name:""}," Tipo de reporte ",-1)),r(a(_),{options:S,label:"title",disabled:"",modelValue:a(e).tipoReporte,"onUpdate:modelValue":o[1]||(o[1]=l=>a(e).tipoReporte=l)},null,8,["modelValue"])]),s("div",re,[r(f,{for:"fecha",value:i.lang().label.fecha},null,8,["value"]),r(j,{id:"fecha",type:"date",class:"mt-1 block w-full bg-gray-200",modelValue:a(e).fecha,"onUpdate:modelValue":o[2]||(o[2]=l=>a(e).fecha=l),disabled:"",placeholder:"fecha",error:a(e).errors.fecha},null,8,["modelValue","error"]),r(b,{class:"mt-2",message:a(e).errors.fecha},null,8,["message"])]),s("div",se,[r(f,{for:"hora_inicial",value:i.lang().label["hora inicial"]},null,8,["value"]),r(j,{id:"hora_inicial",type:"time",class:"mt-1 block w-full bg-gray-200",modelValue:a(e).hora_inicial,"onUpdate:modelValue":o[3]||(o[3]=l=>a(e).hora_inicial=l),placeholder:"hora_inicial",error:a(e).errors.hora_inicial,step:"60"},null,8,["modelValue","error"]),r(b,{class:"mt-2",message:a(e).errors.hora_inicial},null,8,["message"])]),a(e).tipoReporte.value!=2?(p(),n("div",ne,[o[15]||(o[15]=s("label",{name:"ordentrabajo_ids"}," Orden de trabajo ",-1)),r(a(_),{options:d.ordentrabajo_ids,label:"title",modelValue:a(e).ordentrabajo_ids,"onUpdate:modelValue":o[4]||(o[4]=l=>a(e).ordentrabajo_ids=l)},null,8,["options","modelValue"]),r(b,{class:"mt-2",message:a(e).errors.ordentrabajo_id},null,8,["message"])])):c("",!0),a(e).ordentrabajo_ids&&a(e).tipoReporte.value!=2?(p(),n("div",pe,[r(f,{for:"index",value:V[0]},null,8,["value"]),r(j,{id:"index",type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",value:d.nombresOT[a(e).ordentrabajo_ids.value][x[0]]},null,8,["value"])])):c("",!0),a(e).ordentrabajo_ids&&a(e).tipoReporte.value!=2?(p(),n("div",ce,[r(f,{for:"index",value:V[1]},null,8,["value"]),r(j,{id:"index",type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",value:d.nombresOT[a(e).ordentrabajo_ids.value][x[1]]},null,8,["value"])])):c("",!0),s("div",me,[o[16]||(o[16]=s("label",{name:"centrotrabajo_id"}," Centro de trabajo ",-1)),r(a(_),{options:d.centrotrabajo_id,label:"title",modelValue:a(e).centrotrabajo_id,"onUpdate:modelValue":o[5]||(o[5]=l=>a(e).centrotrabajo_id=l)},null,8,["options","modelValue"]),r(b,{class:"mt-2",message:a(e).errors.centrotrabajo_id},null,8,["message"])]),a(e).ordentrabajo_ids&&a(e).centrotrabajo_id&&a(e).tipoReporte.value!=2?(p(),n("div",ue,[r(f,{for:"index",value:V[3]},null,8,["value"]),r(j,{id:"index",type:"text",disabled:"",class:"mt-1 block w-full bg-gray-200",modelValue:a(e).TiempoEstimado,"onUpdate:modelValue":o[6]||(o[6]=l=>a(e).TiempoEstimado=l)},null,8,["modelValue"])])):c("",!0),a(e).tipoReporte.value==0||a(e).tipoReporte.value==1?(p(),n("div",be,[o[17]||(o[17]=s("label",{name:"label_actividad_id"}," Actividad ",-1)),r(a(_),{options:d.actividad_id,label:"title",required:"",modelValue:a(e).actividad_id,"onUpdate:modelValue":o[7]||(o[7]=l=>a(e).actividad_id=l)},null,8,["options","modelValue"]),r(b,{class:"mt-2",message:a(e).errors.actividad_id},null,8,["message"])])):c("",!0),a(e).tipoReporte.value==1?(p(),n("div",_e,[o[18]||(o[18]=s("label",{name:"reproceso_id"}," Reproceso",-1)),r(a(_),{options:d.reproceso_id,label:"title",required:"",modelValue:a(e).reproceso_id,"onUpdate:modelValue":o[8]||(o[8]=l=>a(e).reproceso_id=l)},null,8,["options","modelValue"]),r(b,{class:"mt-2",message:a(e).errors.reproceso_id},null,8,["message"])])):c("",!0),a(e).tipoReporte.value==2?(p(),n("div",ve,[o[19]||(o[19]=s("label",{name:"disponibilidad_id"}," Disponibilidad",-1)),r(a(_),{options:d.disponibilidad_id,label:"title",required:"",modelValue:a(e).disponibilidad_id,"onUpdate:modelValue":o[9]||(o[9]=l=>a(e).disponibilidad_id=l)},null,8,["options","modelValue"]),r(b,{class:"mt-2",message:a(e).errors.disponibilidad_id},null,8,["message"])])):c("",!0)]),s("div",ge,[d.mensajeFalta!=""?(p(),n("h2",fe,v(d.mensajeFalta),1)):c("",!0),d.mensajeTiemposAuto!=""?(p(),n("h2",je,v(d.mensajeTiemposAuto),1)):c("",!0),r(oe,{disabled:a(e).processing,onClick:o[10]||(o[10]=l=>y("close"))},{default:k(()=>[F(v(i.lang().button.close),1)]),_:1},8,["disabled"]),r(ee,{class:Y(["ml-3",{"opacity-25":a(e).processing}]),disabled:a(e).processing,onClick:P},{default:k(()=>[F(v(a(e).processing?i.lang().button.save+"...":i.lang().button.save),1)]),_:1},8,["class","disabled"])])],32)]),_:1},8,["show"])]))}};export{Ie as default};
