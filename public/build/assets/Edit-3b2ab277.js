import{k as $,T as q,j as x,l as F,f as p,a as t,w as m,o as c,b as u,t as v,F as h,m as y,u as r,g as M,d as g,n as U,e as N}from"./app-551012d8.js";import{_ as f}from"./InputError-23c0a787.js";import{_ as b}from"./InputLabel-8615b764.js";import{M as A}from"./Modal-e8455b5b.js";import{_ as V}from"./PrimaryButton-bd076b11.js";import{_ as B}from"./SecondaryButton-ec5b0153.js";import{_ as E}from"./TextInput-4b8270d6.js";/* empty css                   */import{_ as O}from"./DangerButton-1248510a.js";import{C as H}from"./vue-select.es-e7a5a940.js";const P={class:"space-y-6"},T={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},z={class:"grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-3 gap-6 2xl:gap-8"},D={key:0,id:"SelectVue"},I={key:1,class:""},L=u("label",{name:"labelSelectVue"}," Proveedor ",-1),Q={class:"flex my-5 gap-8"},R={class:"my-8 flex justify-end"},re={__name:"Edit",props:{show:Boolean,title:String,Equipoa:Object,titulos:Object,losSelect:Object},emits:["close"],setup(k,{emit:_}){const a=k,s=$({printForm:[],provedores:[],recuperar:!0});function S(){s.provedores.push(0),console.log("=>(Edit.vue:33) data.provedores",s.provedores),e.proveedor_id.push(a.losSelect[0][0])}let w=()=>{s.provedores.length>1&&(s.provedores.length=s.provedores.length-1,e.proveedor_id.length=e.proveedor_id.length-1)};const j=a.titulos.map(l=>l.order),e=q({...Object.fromEntries(j.map(l=>[l,""])),proveedor_id:[]});x(()=>{if(a.numberPermissions>9){const l=Math.floor(Math.random()*9+1);e.nombre="admin orden trabajo "+l,e.codigo=l}}),a.titulos.forEach(l=>{s.printForm.push({idd:l.order,label:l.label,type:l.type,value:e[l.order]})}),F(()=>{a.show?(e.errors={},s.provedores.length=0,s.recuperar&&l()):(e.reset(),s.recuperar=!0);function l(){s.recuperar=!1,a.titulos.forEach(d=>{e[d.order]=a.Equipoa[d.order]}),a.Equipoa.proveedor_ids.forEach((d,o)=>{s.provedores.push(0);const n=a.losSelect[0].find(i=>i.value===d);e.proveedor_id.push(n),console.log("=>(Edit.vue:73) encontrado",n)})}});const C=()=>{var l;e.put(route("Equipo.update",(l=a.Equipoa)==null?void 0:l.id),{preserveScroll:!0,onSuccess:()=>{_("close")},onError:()=>null,onFinish:()=>{e.reset(),s.provedores.length=0}})};return(l,d)=>(c(),p("section",P,[t(A,{show:a.show,onClose:d[4]||(d[4]=o=>_("close")),maxWidth:"xl7"},{default:m(()=>[u("form",{class:"p-6",onSubmit:d[3]||(d[3]=N((...o)=>l.create&&l.create(...o),["prevent"]))},[u("h2",T,v(l.lang().label.edit)+" "+v(a.title),1),u("div",z,[(c(!0),p(h,null,y(s.printForm,(o,n)=>(c(),p("div",{key:n},[o.type==="time"?(c(),p("div",D,[t(b,{for:o.label,value:l.lang().label[o.label]},null,8,["for","value"]),t(E,{id:o.idd,type:o.type,class:"mt-1 block w-full",modelValue:r(e)[o.idd],"onUpdate:modelValue":i=>r(e)[o.idd]=i,required:"",placeholder:o.label,error:r(e).errors[o.idd],step:"3600"},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder","error"]),t(f,{class:"mt-2",message:r(e).errors[o.idd]},null,8,["message"])])):(c(),p("div",I,[t(b,{for:o.label,value:l.lang().label[o.label]},null,8,["for","value"]),t(E,{id:o.idd,type:o.type,class:"mt-1 block w-full",modelValue:r(e)[o.idd],"onUpdate:modelValue":i=>r(e)[o.idd]=i,required:"",placeholder:o.label,error:r(e).errors[o.idd]},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder","error"]),t(f,{class:"mt-2",message:r(e).errors[o.idd]},null,8,["message"])]))]))),128)),Array.isArray(s.provedores)&&s.provedores.length?(c(!0),p(h,{key:0},y(s.provedores,(o,n)=>(c(),p("div",{key:n,id:"SelectVue",class:""},[L,t(r(H),{options:a.losSelect[0],modelValue:r(e).proveedor_id[n],"onUpdate:modelValue":i=>r(e).proveedor_id[n]=i,label:"title"},null,8,["options","modelValue","onUpdate:modelValue"]),t(f,{class:"mt-2",message:r(e).errors["proveedor_id."+n+".value"]},null,8,["message"])]))),128)):M("",!0),u("div",Q,[t(V,{type:"button",disabled:r(e).processing,onClick:d[0]||(d[0]=o=>S())},{default:m(()=>[g(" Agregar proveedor ")]),_:1},8,["disabled"]),t(O,{type:"button",disabled:r(e).processing,onClick:d[1]||(d[1]=o=>r(w)())},{default:m(()=>[g(" Quitar proveedor ")]),_:1},8,["disabled"])])]),u("div",R,[t(B,{disabled:r(e).processing,onClick:d[2]||(d[2]=o=>_("close"))},{default:m(()=>[g(v(l.lang().button.close),1)]),_:1},8,["disabled"]),t(V,{class:U(["ml-3",{"opacity-25":r(e).processing}]),disabled:r(e).processing,onClick:C},{default:m(()=>[g(v(r(e).processing?l.lang().button.save+"...":l.lang().button.save),1)]),_:1},8,["class","disabled"])])],32)]),_:1},8,["show"])]))}};export{re as default};
