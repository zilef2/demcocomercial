import{o as r,f as l,b as o,k as N,K as L,l as M,O as A,x as H,m as P,c,w as h,p as W,d as q,t as p,g as n,a as u,u as m,q as y,v as b,s as O,F as k,j as v}from"./app-c2754de5.js";import{_ as K,a as R}from"./AuthenticatedLayout-fae700c5.js";import{a as T}from"./TextInput-05cac8ef.js";import{_ as $}from"./PrimaryButton-9e8af232.js";import{_ as J}from"./SelectInput-882fe2d9.js";import{_ as S}from"./DangerButton-20d0504c.js";import{r as V,_ as Q,a as X}from"./Pagination-8756d78a.js";import Y from"./Create-9cdfb9fa.js";import Z from"./Edit-2a6eeeee.js";import ee from"./TerminarReporte-280f0ec6.js";import te from"./Delete-6e4b79be.js";import re from"./DeleteBulk-6a202996.js";import{_ as se}from"./Checkbox-f5e88407.js";import{_ as B,r as oe}from"./InfoButton-38bf06a5.js";import{b as z,n as g,f as x}from"./global-16c20635.js";import{C as ae}from"./vue-select-bb897b0b.js";/* empty css             */import"./index-67172e5c.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./InputError-f0dfe909.js";import"./SecondaryButton-2a5bdb7b.js";import"./vue-datepicker-25a82099.js";function le(_,s){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M11.47 2.47a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06l-2.47-2.47V21a.75.75 0 01-1.5 0V4.81L8.78 7.28a.75.75 0 01-1.06-1.06l3.75-3.75z","clip-rule":"evenodd"})])}function ne(_,s){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M1.72 5.47a.75.75 0 011.06 0L9 11.69l3.756-3.756a.75.75 0 01.985-.066 12.698 12.698 0 014.575 6.832l.308 1.149 2.277-3.943a.75.75 0 111.299.75l-3.182 5.51a.75.75 0 01-1.025.275l-5.511-3.181a.75.75 0 01.75-1.3l3.943 2.277-.308-1.149a11.194 11.194 0 00-3.528-5.617l-3.809 3.81a.75.75 0 01-1.06 0L1.72 6.53a.75.75 0 010-1.061z","clip-rule":"evenodd"})])}const de={class:"face"},ie=o("div",{class:"hand"},[o("div",{class:"hand"},[o("div",{class:"hour"}),o("div",{class:"minute"})])],-1),pe=[ie],me={__name:"ClockWorking",props:{},setup(_){return(s,j)=>(r(),l("div",de,pe))}};const ce={class:"space-y-4"},ue={class:"px-4 sm:px-0"},_e={class:"rounded-lg overflow-hidden w-fit my-2"},ye={key:1,class:"absolute top-[66px] z-[50] md:left-1/3 lg:left-1/2"},fe=o("label",{name:"centrotrabajo_id",class:"mx-2 mt-1 -mb-1 text-sm dark:text-white"}," Centro de trabajo ",-1),he={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},be={class:"flex justify-between px-0 my-1 h-22 overflow-x-auto overflow-y-hidden pb-2 z-50"},ge={class:"z-[10] inline-flex gap-2"},ke={key:0,class:"mx-1 mt-4 w-40 flex gap-4"},ve={class:"my-1"},we=o("label",{for:"soloval",class:"text-sm mx-2 whitespace-nowrap"},"Tiempo Estimado",-1),xe={class:"inline-flex my-1"},Ce=o("label",{for:"soloval",class:"text-sm mx-2 whitespace-nowrap"},"Mostrar todos",-1),Oe={key:0,class:"mt-4 sm:flex-wrap lg:flex-inline gap-4 right-0"},$e={class:"max-h-[630px] overflow-y-scroll"},je={key:0,class:"w-full z-20"},Pe={class:"-mt-1 top-0 bg-gray-200 sticky z-[5] capitalize text-sm dark:border-gray-700 dark:bg-black"},Te={class:"dark:bg-gray-900/50 text-left"},Se={key:0,class:"px-2 py-4 text-center dark:bg-black"},Ve=o("th",{class:"px-2 py-4"},"Accion",-1),Be=o("th",{class:"px-2 py-4 text-center"},"#",-1),ze=["onClick"],Ie={class:"flex justify-between items-center"},Ge={key:0,class:"w-full bg-white border border-blue-500 inamovible"},Ee={class:"dark:bg-gray-900/50 text-left"},De=o("th",{class:"px-2 py-4"},null,-1),Fe=o("th",{class:"px-2 py-4"},null,-1),Ue={class:"px-2 py-4 text-center"},Ne={class:"px-2 py-4 cursor-pointer"},Le={class:"flex justify-between items-center"},Me={class:"w-20 text-sm"},Ae=o("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},null,-1),He=o("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},null,-1),We=o("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),qe={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ke={key:0},Re={key:1},Je={key:2},Qe={key:3},Xe={key:4},Ye={key:5},Ze={key:6},et={key:7},tt={key:8},rt={key:0,class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},st=["value"],ot={class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3"},at={class:"flex justify-center items-center"},lt={class:"rounded-md overflow-hidden"},nt={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},dt={class:"whitespace-wrap py-4 px-2 sm:py-3"},it={key:0},pt={key:1},mt={key:2},ct={key:3},ut={key:4},_t={key:5},yt={key:6},ft={key:7},ht={key:8},bt={key:1,class:"text-center text-xl my-8"},gt={key:0,class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},Mt={__name:"Index",props:{fromController:Object,total:Number,filters:Object,breadcrumbs:Object,perPage:Number,title:String,numberPermissions:Number,losSelect:Object,valuesGoogleCabeza:Object,valuesGoogleBody:Object,Trabajadores:Object},setup(_){const s=_,{_:j,debounce:I,pickBy:G}=W,t=N({params:{search:s.filters.searchDate,field:s.filters.field,order:s.filters.order,perPage:s.perPage,searchdia:s.filters.searchdia,soloTiEstimado:s.filters.soloTiEstimado,ultimosmeses:s.filters.ultimosmeses,FiltroCentro:s.filters.FiltroCentro},generico:null,selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,TerminarOpen:!1,deleteOpen:!1,dataSet:L().props.app.perpage,totalEmpleados:0,deleteBulkOpen:!1,hayCongelado:0}),E=(d,a)=>{a&&(t.params.field=d,t.params.order=t.params.order==="asc"?"desc":"asc")};M(()=>j.cloneDeep(t.params),I(()=>{let d=G(t.params);A.get(route("reporte.index"),d,{replace:!0,preserveState:!0,preserveScroll:!0})},350));const D=d=>{var a;d.target.checked===!1?t.selectedId=[]:(a=s.fromController)==null||a.data.forEach(f=>{t.selectedId.push(f.id)})},F=()=>{var d;t.multipleSelect=((d=s.reportes)==null?void 0:d.data.length)===t.selectedId.length};H(()=>{});const w=[{order:"fecha",label:"fecha",type:"date",CanOrder:!0},{order:"operario_id",label:"operario",type:"foreign",nameid:"operario_s",CanOrder:!0},{order:"hora_inicial",label:"hora inicial",type:"time",CanOrder:!0},{order:"hora_final",label:"hora final",type:"time",CanOrder:!0},{order:"tiempo_transcurrido",label:"Tiempo Transcurrido",type:"decimal",nameid:"tiempo_transcurrido",CanOrder:!0},{order:"actividad_id",label:"actividad",type:"foreign",nameid:"actividad_s",CanOrder:!0},{order:"centrotrabajo_id",label:"centrotrabajo",type:"foreign",nameid:"centrotrabajo_s",CanOrder:!0},{order:"OTItem",label:"ordentrabajo",type:"text",CanOrder:!1},{order:"TiempoEstimado",label:"TiempoEstimado",type:"text",CanOrder:!0},{order:"disponibilidad_id",label:"disponibilidad",type:"foreign",nameid:"disponibilidad_s",CanOrder:!0},{order:"reproceso_id",label:"reproceso",type:"foreign",nameid:"reproceso_s",CanOrder:!0}];return(d,a)=>{const f=P("tooltip"),U=P("sticky");return r(),c(K,null,{default:h(()=>[o("div",ce,[o("div",ue,[o("div",_e,[d.can(["create reporte"])?(r(),c($,{key:0,class:"rounded-md mt-4 my-2 items-center",onClick:a[0]||(a[0]=e=>t.createOpen=!0)},{default:h(()=>[q(p(d.lang().button.add)+" "+p(s.title),1)]),_:1})):n("",!0),_.numberPermissions>1?(r(),l("div",ye,[fe,u(m(ae),{options:s.losSelect.centrotrabajo,label:"title",class:"fixed dark:bg-gray-400 w-64 mt-1 z-[100]",modelValue:t.params.FiltroCentro,"onUpdate:modelValue":a[1]||(a[1]=e=>t.params.FiltroCentro=e)},null,8,["options","modelValue"])])):n("",!0),d.can(["create reporte"])?(r(),c(Y,{key:2,numberPermissions:s.numberPermissions,show:t.createOpen,onClose:a[2]||(a[2]=e=>t.createOpen=!1),title:s.title,losSelect:s.losSelect,valuesGoogleCabeza:s.valuesGoogleCabeza,valuesGoogleBody:s.valuesGoogleBody,Trabajadores:s.Trabajadores},null,8,["numberPermissions","show","title","losSelect","valuesGoogleCabeza","valuesGoogleBody","Trabajadores"])):n("",!0),d.can(["update reporte"])&&_.numberPermissions>1?(r(),c(Z,{key:3,numberPermissions:s.numberPermissions,show:t.editOpen,onClose:a[3]||(a[3]=e=>t.editOpen=!1),generica:t.generico,title:s.title,losSelect:s.losSelect,valuesGoogleCabeza:s.valuesGoogleCabeza,valuesGoogleBody:s.valuesGoogleBody,Trabajadores:s.Trabajadores},null,8,["numberPermissions","show","generica","title","losSelect","valuesGoogleCabeza","valuesGoogleBody","Trabajadores"])):n("",!0),d.can(["read reporte"])?(r(),c(ee,{key:4,numberPermissions:s.numberPermissions,show:t.TerminarOpen,onClose:a[4]||(a[4]=e=>t.TerminarOpen=!1),generica:t.generico,title:s.title},null,8,["numberPermissions","show","generica","title"])):n("",!0),d.can(["delete reporte"])?(r(),c(te,{key:5,numberPermissions:s.numberPermissions,show:t.deleteOpen,onClose:a[5]||(a[5]=e=>t.deleteOpen=!1),generica:t.generico,title:s.title},null,8,["numberPermissions","show","generica","title"])):n("",!0),u(re,{show:t.deleteBulkOpen,onClose:a[6]||(a[6]=e=>(t.deleteBulkOpen=!1,t.multipleSelect=!1,t.selectedId=[])),selectedId:t.selectedId,title:s.title},null,8,["show","selectedId","title"])])]),o("div",he,[o("div",be,[o("div",ge,[u(J,{modelValue:t.params.perPage,"onUpdate:modelValue":a[7]||(a[7]=e=>t.params.perPage=e),dataSet:t.dataSet,class:"ml-2 mt-4 h-12"},null,8,["modelValue","dataSet"]),y((r(),c(S,{onClick:a[8]||(a[8]=e=>t.deleteBulkOpen=!0),class:"px-3 py-1.5 h-10 my-auto"},{default:h(()=>[u(m(V),{class:"w-5 h-5"})]),_:1})),[[b,t.selectedId.length!==0&&d.can(["delete reporte"])],[f,d.lang().tooltip.delete_selected]]),y((r(),c($,{onClick:a[9]||(a[9]=e=>t.hayCongelado=t.selectedId[0]),class:"px-3 py-1.5 h-10 my-auto"},{default:h(()=>[u(m(le),{class:"w-5 h-5"})]),_:1})),[[b,t.selectedId.length!==0&&d.can(["delete reporte"])],[f,"Congelar"]]),_.numberPermissions>1?(r(),l("div",ke,[o("div",ve,[we,_.filters!==null?y((r(),l("input",{key:0,"onUpdate:modelValue":a[10]||(a[10]=e=>t.params.soloTiEstimado=e),id:"soloval",type:"checkbox",class:"bg-gray-200 h-5 w-5 ml-[12px]"},null,512)),[[O,t.params.soloTiEstimado]]):n("",!0),o("div",xe,[Ce,_.filters!==null?y((r(),l("input",{key:0,"onUpdate:modelValue":a[11]||(a[11]=e=>t.params.ultimosmeses=e),id:"soloval",type:"checkbox",class:"bg-gray-200 h-5 w-5 ml-[34px]"},null,512)),[[O,t.params.ultimosmeses]]):n("",!0)])])])):n("",!0)]),_.numberPermissions>1?(r(),l("div",Oe,[s.numberPermissions>1?(r(),c(T,{key:0,modelValue:t.params.searchdia,"onUpdate:modelValue":a[12]||(a[12]=e=>t.params.searchdia=e),type:"number",max:"31",min:"0",class:"mx-1 xl:mr-2 w-32 rounded-lg sm:h-6 lg:h-12 mt-1",placeholder:"Buscar día"},null,8,["modelValue"])):n("",!0),s.numberPermissions>1?(r(),c(T,{key:1,modelValue:t.params.searchDate,"onUpdate:modelValue":a[13]||(a[13]=e=>t.params.searchDate=e),type:"date",class:"mx-1 xl:mr-2 w-32 rounded-lg sm:h-6 lg:h-12 mt-1",placeholder:"Buscar por Fecha (mes o año) "},null,8,["modelValue"])):n("",!0)])):n("",!0)]),o("div",$e,[s.total>0?(r(),l("table",je,[o("thead",Pe,[o("tr",Te,[s.numberPermissions>1?(r(),l("th",Se,[u(se,{checked:t.multipleSelect,"onUpdate:checked":a[14]||(a[14]=e=>t.multipleSelect=e),onChange:D},null,8,["checked"])])):n("",!0),Ve,Be,(r(),l(k,null,v(w,e=>o("th",{class:"px-2 py-4 cursor-pointer min-w-min",onClick:C=>E(e.order,e.CanOrder)},[o("div",Ie,[o("span",null,p(d.lang().label[e.label]),1),e.CanOrder?(r(),c(m(X),{key:0,class:"w-4 h-4"})):n("",!0)])],8,ze)),64))])]),o("tbody",null,[t.hayCongelado!==0?y((r(),l("div",Ge,[o("tr",Ee,[De,Fe,o("th",Ue,[y((r(),c($,{onClick:a[15]||(a[15]=e=>t.hayCongelado=0),class:"px-3 py-1.5"},{default:h(()=>[u(m(ne),{class:"w-5 h-5"})]),_:1})),[[b,t.hayCongelado&&d.can(["delete reporte"])],[f,"Descongelar"]])]),(r(),l(k,null,v(w,e=>o("th",Ne,[o("div",Le,[o("p",Me,p(d.lang().label[e.label]),1)])])),64))]),o("tr",null,[Ae,He,We,(r(),l(k,null,v(w,e=>o("td",qe,[e.type==="text"?(r(),l("span",Ke,p(s.fromController.data[0][e.order]),1)):n("",!0),e.type==="time"?(r(),l("span",Re,p(m(z)(s.fromController.data[0][e.order])),1)):n("",!0),e.type==="number"?(r(),l("span",Je,p(m(g)(s.fromController.data[0][e.order],0,!1)),1)):n("",!0),e.type==="decimal"?(r(),l("span",Qe,p(m(g)(s.fromController.data[0][e.order],1,!1)),1)):n("",!0),e.type==="dinero"?(r(),l("span",Xe,p(m(g)(s.fromController.data[0][e.order],0,!0)),1)):n("",!0),e.type==="date"?(r(),l("span",Ye,p(m(x)(s.fromController.data[0][e.order],"")),1)):n("",!0),e.type==="datetime"?(r(),l("span",Ze,p(m(x)(s.fromController.data[0][e.order],"conLaHora")),1)):n("",!0),e.type==="foreign"?(r(),l("span",et,p(s.fromController.data[0][e.nameid]),1)):n("",!0),e.order==="hora_final"&&s.fromController.data[0][e.order]==null?(r(),l("span",tt," - ")):n("",!0)])),64))])])),[[U,{zIndex:100}]]):n("",!0),(r(!0),l(k,null,v(s.fromController.data,(e,C)=>(r(),l("tr",{key:C,class:"hover:dark:bg-gray-900/20"},[s.numberPermissions>1?(r(),l("td",rt,[y(o("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:F,value:e.id,"onUpdate:modelValue":a[16]||(a[16]=i=>t.selectedId=i)},null,40,st),[[O,t.selectedId]])])):n("",!0),o("td",ot,[o("div",at,[o("div",lt,[y((r(),c(B,{type:"button",onClick:i=>(t.editOpen=!0,t.generico=e),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[u(m(oe),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[b,d.can(["update reporte"])],[f,d.lang().tooltip.edit]]),e.hora_final?n("",!0):y((r(),c(B,{key:0,type:"button",onClick:i=>(t.TerminarOpen=!0,t.generico=e),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[u(m(R),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[b,d.can(["create reporte"])],[f,d.lang().tooltip.finalizarTarea]]),y((r(),c(S,{type:"button",onClick:i=>(t.deleteOpen=!0,t.generico=e),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[u(m(V),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[b,d.can(["delete reporte"])],[f,d.lang().tooltip.delete]])])])]),o("td",nt,p(++C),1),(r(),l(k,null,v(w,i=>o("td",dt,[i.type==="text"?(r(),l("span",it,p(e[i.order]),1)):n("",!0),i.type==="time"?(r(),l("span",pt,p(m(z)(e[i.order])),1)):n("",!0),i.type==="number"?(r(),l("span",mt,p(m(g)(e[i.order],0,!1)),1)):n("",!0),i.type==="decimal"?(r(),l("span",ct,p(m(g)(e[i.order],1,!1)),1)):n("",!0),i.type==="dinero"?(r(),l("span",ut,p(m(g)(e[i.order],0,!0)),1)):n("",!0),i.type==="date"?(r(),l("span",_t,p(m(x)(e[i.order],"")),1)):n("",!0),i.type==="datetime"?(r(),l("span",yt,p(m(x)(e[i.order],"conLaHora")),1)):n("",!0),i.type==="foreign"?(r(),l("span",ft,p(e[i.nameid]),1)):n("",!0),i.order==="hora_final"&&e[i.order]==null?(r(),l("span",ht,[u(me)])):n("",!0)])),64))]))),128))])])):(r(),l("h2",bt,"Sin Registros"))]),s.total>0?(r(),l("div",gt,[u(Q,{links:s.fromController,filters:t.params},null,8,["links","filters"])])):n("",!0)])])]),_:1})}}};export{Mt as default};
