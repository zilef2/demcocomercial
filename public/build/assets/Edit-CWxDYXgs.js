import{l as B,T as N,k as M,m as O,s as A,f as p,o as f,a as l,w as d,b as i,d as F,t as c,u as s,F as U,p as H,e as m,n as D}from"./app-BhGvptmL.js";import{_}from"./InputError-Ck0A_nV9.js";import{_ as h}from"./InputLabel-Fsg0RhcG.js";import{_ as q}from"./Modal-CWveoFge.js";import{_ as b}from"./PrimaryButton-BkUg86Bs.js";import{_ as z}from"./SecondaryButton-sXq2m4Kv.js";import{_ as L}from"./TextInput-XsIzkty-.js";import{C as w}from"./vue-select.es-CcZCZQ2N.js";/* empty css                   */import"./vue-datepicker-BZOCypyi.js";import{r as G,a as I}from"./XCircleIcon-Cqz5F7ml.js";const J={class:"space-y-6"},K={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},P={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-56"},Q={class:""},R={id:"SelectVue"},W={class:"flex my-5 gap-8"},X={class:"my-8 flex justify-end"},de={__name:"Edit",props:{show:Boolean,title:String,generica:Object,titulos:Object,losSelect:Object},emits:["close"],setup(y,{emit:V}){const r=y,u=V,a=B({}),k=r.titulos.map(e=>e.order),o=N({...Object.fromEntries(k.map(e=>[e,""])),centro_id:[r.losSelect[0]]});M(()=>{});const E=[];r.titulos.forEach(e=>{E.push({idd:e.order,label:e.label,type:e.type,value:o[e.order]})});function S(){a.centros=r.generica.centro_trabajos,a.centros.map((e,t)=>{let n={title:e.nombre,value:e.id};return o.centro_id[t]=n,n})}O(()=>{r.show&&(o.errors={},r.titulos.forEach(e=>{o[e.order]=r.generica[e.order]}))}),A(()=>r.show,e=>{e&&S()});function j(){a.centros.push(0),o.centro_id.push(r.losSelect[0])}let C=()=>{a.centros.length=a.centros.length-1,o.centro_id.length=o.centro_id.length-1},$=()=>{try{if(a.valido=!0,!o.nombre||!o.tipo)throw a.valido=!1,new Error("BreakException");o.centro_id.forEach(e=>{if(e.value===0)throw a.valido=!1,new Error("BreakException")})}catch{a.valido=!1}};const g=()=>{var e;$(),a.valido?o.put(route("actividad.update",(e=r.generica)==null?void 0:e.id),{preserveScroll:!0,onSuccess:()=>{u("close"),o.reset()},onError:()=>null,onFinish:()=>null}):(a.mensajeError="Hay elementos vacios",alert(a.mensajeError))},x=[{title:"Seleccione un tipo",value:0},{title:"TVA",value:"TVA"},{title:"TNVA",value:"TNVA"}];return(e,t)=>(f(),p("section",J,[l(q,{show:r.show,onClose:t[5]||(t[5]=n=>u("close"))},{default:d(()=>[i("form",{class:"px-6 pt-6",onSubmit:F(g,["prevent"])},[i("h2",K,c(e.lang().label.edit)+" "+c(r.title),1),i("div",P,[i("div",Q,[l(h,{for:"nombre",value:e.lang().label.nombre},null,8,["value"]),l(L,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:s(o).nombre,"onUpdate:modelValue":t[0]||(t[0]=n=>s(o).nombre=n),required:"",placeholder:e.nombre,error:s(o).errors.nombre},null,8,["modelValue","placeholder","error"]),l(_,{class:"mt-2",message:s(o).errors.nombre},null,8,["message"])]),i("div",null,[l(h,{for:"tipo",value:e.lang().label.Tipo},null,8,["value"]),l(s(w),{options:x,label:"title",class:"mt-1 dark:bg-gray-500 rounded-lg dark:text-gray-600",modelValue:s(o).tipo,"onUpdate:modelValue":t[1]||(t[1]=n=>s(o).tipo=n)},null,8,["modelValue"])]),(f(!0),p(U,null,H(a.centros,(n,v)=>(f(),p("div",R,[t[6]||(t[6]=i("label",{name:"labelSelectVue",class:"dark:text-white"}," Centro de trabajo ",-1)),l(s(w),{options:r.losSelect,label:"title",class:"dark:bg-gray-500 rounded-lg dark:text-gray-600",modelValue:s(o).centro_id[v],"onUpdate:modelValue":T=>s(o).centro_id[v]=T},null,8,["options","modelValue","onUpdate:modelValue"]),l(_,{class:"mt-2",message:s(o).errors.centro_id},null,8,["message"])]))),256)),i("div",W,[l(b,{type:"button",disabled:s(o).processing,onClick:t[2]||(t[2]=n=>j())},{default:d(()=>[l(s(G),{class:"w-6 h-6"}),t[7]||(t[7]=m(" Mas centros "))]),_:1,__:[7]},8,["disabled"]),l(b,{type:"button",class:"bg-red-500",disabled:s(o).processing,onClick:t[3]||(t[3]=n=>s(C)())},{default:d(()=>[l(s(I),{class:"w-6 h-6"}),t[8]||(t[8]=m(" Menos centros "))]),_:1,__:[8]},8,["disabled"])])]),i("div",X,[l(z,{disabled:s(o).processing,onClick:t[4]||(t[4]=n=>u("close"))},{default:d(()=>[m(c(e.lang().button.close),1)]),_:1},8,["disabled"]),l(b,{class:D(["ml-3",{"opacity-25":s(o).processing}]),disabled:s(o).processing,onClick:g},{default:d(()=>[m(c(s(o).processing?e.lang().button.save+"...":e.lang().button.save),1)]),_:1},8,["class","disabled"])])],32)]),_:1},8,["show"])]))}};export{de as default};
