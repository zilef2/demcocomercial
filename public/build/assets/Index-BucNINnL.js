import{q as D,l as C,Q as U,s as B,N as z,v as A,f as n,o as a,a as c,u as m,Z as E,w as g,b as s,c as f,g as d,i as Q,e as x,F as b,p as k,t as p,x as w,y as R}from"./app-Cq1znuMy.js";import{_ as T}from"./AuthenticatedLayout-Bq4Td3tW.js";import{_ as q}from"./Breadcrumb-TEnZiU5P.js";import{_ as L}from"./TextInput-CxVKhdog.js";import{_ as M}from"./PrimaryButton-C4YOsuaB.js";import{_ as Z}from"./SelectInput-DjH0LW8I.js";import{r as v,_ as G}from"./Pagination-BYYD9Bg-.js";import H from"./Create-CnXbfy6s.js";import J from"./Edit-Q2EIeEm_.js";import K from"./Delete-B88njQuG.js";import{_ as W}from"./Checkbox-BbUHU8JM.js";import{n as O,f as S}from"./global-C5jYNk1l.js";import"./index-Dwl7jS47.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./keyboard-BuN7yXbH.js";/* empty css                                              */import"./InputError-WpjbGGA7.js";import"./InputLabel-DT5ITww_.js";import"./Modal-qBkqJmba.js";import"./SecondaryButton-BnrCYek9.js";/* empty css             */import"./vue-select.es-wsHHmxmz.js";/* empty css                   */import"./DangerButton-BmGSuYS8.js";const X={class:"space-y-4"},Y={class:"px-4 sm:px-0"},F={class:"rounded-lg overflow-hidden w-fit"},ee={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},te={class:"flex justify-between p-2"},se={class:"flex space-x-2"},re={class:"overflow-x-auto scrollbar-table"},ae={key:0,class:"w-full"},oe={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},le={class:"dark:bg-gray-900/50 text-left"},ne={class:"px-2 py-4 text-center"},ie={key:0,class:"px-2 py-4"},de=["onClick"],pe={class:"flex justify-between items-center"},ce={class:"px-2 py-4 cursor-pointer"},me={class:"flex justify-between items-center"},ue={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},fe=["value"],ye={key:0,class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3"},be={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},_e={class:"whitespace-nowrap py-4 px-2 sm:py-3"},he={key:0},ge={key:1},ke={key:2},xe={key:3},we={key:4},ve={key:5},Oe=["onClick"],Se={class:"border-t border-gray-600"},Pe={key:0,class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3 text-center"},$e={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Ve={key:1,class:"text-center text-xl my-8"},Ne={key:0,class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},et={__name:"Index",props:{fromController:Object,total:Number,filters:Object,breadcrumbs:Object,perPage:Number,title:String,numberPermissions:Number,losSelect:Object},setup(u){const{_:P,debounce:$,pickBy:V}=D,o=u,e=C({params:{search:o.filters.search,field:o.filters.field,order:o.filters.order,perPage:o.perPage},DetalleOpen:!1,eldetalle:null,Ofertao:null,selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,deleteOpen:!1,dataSet:U().props.app.perpage}),N=i=>{e.params.field=i,e.params.order=e.params.order==="asc"?"desc":"asc"};B(()=>P.cloneDeep(e.params),$(()=>{let i=V(e.params);z.get(route("Oferta.index"),i,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const I=i=>{var t;i.target.checked===!1?e.selectedId=[]:(t=o.fromController)==null||t.data.forEach(_=>{e.selectedId.push(_.id)})},j=()=>{var i;return e.multipleSelect=((i=o.fromController)==null?void 0:i.data.length)===e.selectedId.length},y=[{order:"cargo",label:"cargo",type:"text"},{order:"empresa",label:"empresa",type:"text"},{order:"ciudad",label:"ciudad",type:"text"},{order:"proyecto",label:"proyecto",type:"text"},{order:"fecha",label:"fecha",type:"date"},{order:"Userino",label:"user_id",type:"foreign",nameid:"Userino"}];return(i,t)=>{const _=A("tooltip");return a(),n(b,null,[c(m(E),{title:o.title},null,8,["title"]),c(T,null,{default:g(()=>[c(q,{title:u.title,breadcrumbs:u.breadcrumbs,class:"capitalize text-xl font-bold"},null,8,["title","breadcrumbs"]),s("div",X,[s("div",Y,[s("div",F,[i.can(["create oferta"])?(a(),f(m(Q),{key:0,class:"rounded-none",href:"/NuevaOferta"},{default:g(()=>[c(M,{class:"rounded-none"},{default:g(()=>t[7]||(t[7]=[x(" Realizar Oferta")])),_:1,__:[7]})]),_:1})):d("",!0),i.can(["create oferta"])?(a(),f(H,{key:1,numberPermissions:o.numberPermissions,titulos:y,show:e.createOpen,onClose:t[0]||(t[0]=r=>e.createOpen=!1),title:o.title,losSelect:o.losSelect},null,8,["numberPermissions","show","title","losSelect"])):d("",!0),i.can(["update oferta"])?(a(),f(J,{key:2,titulos:y,numberPermissions:o.numberPermissions,show:e.editOpen,onClose:t[1]||(t[1]=r=>e.editOpen=!1),Ofertaa:e.Ofertao,title:o.title,losSelect:o.losSelect},null,8,["numberPermissions","show","Ofertaa","title","losSelect"])):d("",!0),i.can(["delete oferta"])?(a(),f(K,{key:3,numberPermissions:o.numberPermissions,show:e.deleteOpen,onClose:t[2]||(t[2]=r=>e.deleteOpen=!1),Ofertaa:e.Ofertao,title:o.title},null,8,["numberPermissions","show","Ofertaa","title"])):d("",!0)])]),s("div",ee,[s("div",te,[s("div",se,[c(Z,{modelValue:e.params.perPage,"onUpdate:modelValue":t[3]||(t[3]=r=>e.params.perPage=r),dataSet:e.dataSet},null,8,["modelValue","dataSet"])]),o.numberPermissions>1?(a(),f(L,{key:0,modelValue:e.params.search,"onUpdate:modelValue":t[4]||(t[4]=r=>e.params.search=r),type:"text",class:"block w-4/6 md:w-3/6 lg:w-2/6 rounded-lg",placeholder:"CÃ³digo, empresa o proyecto"},null,8,["modelValue"])):d("",!0)]),s("div",re,[o.total>0?(a(),n("table",ae,[s("thead",oe,[s("tr",le,[s("th",ne,[c(W,{checked:e.multipleSelect,"onUpdate:checked":t[5]||(t[5]=r=>e.multipleSelect=r),onChange:I},null,8,["checked"])]),u.numberPermissions>1?(a(),n("th",ie,"Accion")):d("",!0),t[9]||(t[9]=s("th",{class:"px-2 py-4 text-center"},"#",-1)),(a(),n(b,null,k(y,r=>s("th",{class:"px-2 py-4 cursor-pointer",onClick:h=>N(r.order)},[s("div",pe,[s("span",null,p(i.lang().label[r.label]),1),c(m(v),{class:"w-4 h-4"})])],8,de)),64)),s("th",ce,[s("div",me,[t[8]||(t[8]=s("span",null,"Ver detalles",-1)),c(m(v),{class:"w-4 h-4"})])])])]),s("tbody",null,[(a(!0),n(b,null,k(o.fromController.data,(r,h)=>(a(),n("tr",{key:h,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[s("td",ue,[w(s("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:j,value:r.id,"onUpdate:modelValue":t[6]||(t[6]=l=>e.selectedId=l)},null,40,fe),[[R,e.selectedId]])]),u.numberPermissions>1?(a(),n("td",ye)):d("",!0),s("td",be,p(++h),1),(a(),n(b,null,k(y,l=>s("td",_e,[l.type==="text"||l.type==="string"?(a(),n("span",he,p(r[l.order]),1)):d("",!0),l.type==="number"?(a(),n("span",ge,p(m(O)(r[l.order],0,!1)),1)):d("",!0),l.type==="dinero"?(a(),n("span",ke,p(m(O)(r[l.order],0,!0)),1)):d("",!0),l.type==="date"?(a(),n("span",xe,p(m(S)(r[l.order],!1)),1)):d("",!0),l.type==="datetime"?(a(),n("span",we,p(m(S)(r[l.order],!0)),1)):d("",!0),l.type==="foreign"?(a(),n("span",ve,p((r==null?void 0:r[l==null?void 0:l.nameid])??""),1)):d("",!0)])),64)),w((a(),n("td",{onClick:l=>(e.DetalleOpen=!0,e.eldetalle=r),class:"whitespace-nowrap py-4 px-2 sm:py-3 cursor-pointer text-blue-600 dark:text-blue-400 font-bold underline"},[x(p(r.QuantityItems)+" Items ",1)],8,Oe)),[[_,i.lang().tooltip.v_alfa]])]))),128)),s("tr",Se,[u.numberPermissions>1?(a(),n("td",Pe," - ")):d("",!0),t[10]||(t[10]=s("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"}," Total: ",-1)),s("td",$e,p(o.total),1)])])])):(a(),n("h2",Ve,"Sin Registros"))]),o.total>0?(a(),n("div",Ne,[c(G,{links:o.fromController,filters:e.params},null,8,["links","filters"])])):d("",!0)])])]),_:1})],64)}}};export{et as default};
