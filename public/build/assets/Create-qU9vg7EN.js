import{l as N,T as B,k as O,m as F,f as p,o as f,a as r,w as m,b as a,d as M,t as d,u as s,F as U,p as H,e as c,n as P}from"./app-BhGvptmL.js";import{_ as v}from"./InputError-Ck0A_nV9.js";import{_ as y}from"./InputLabel-Fsg0RhcG.js";import{_ as T}from"./Modal-CWveoFge.js";import{_ as g}from"./PrimaryButton-BkUg86Bs.js";import{_ as q}from"./SecondaryButton-sXq2m4Kv.js";import{_ as z}from"./TextInput-XsIzkty-.js";import{C as h}from"./vue-select.es-CcZCZQ2N.js";/* empty css                   */import"./vue-datepicker-BZOCypyi.js";/* empty css             */const D={class:"space-y-6"},L={class:"mb-[230px]"},A={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},I={class:""},J={id:"SelectVue"},K={class:"flex my-5 gap-8"},Q={class:"my-8 flex justify-end"},R={class:"text-lg mx-8 text-red-500"},ne={__name:"Create",props:{show:Boolean,title:String,roles:Object,titulos:Object,losSelect:Object,numberPermissions:Number},emits:["close"],setup(k,{emit:w}){const n=k,u=w,l=N({params:{pregunta:""},centros:[0],valido:!0,mensajeError:""}),V=n.titulos.map(o=>o.order),e=B({...Object.fromEntries(V.map(o=>[o,""])),centro_id:[n.losSelect[0]]});O(()=>{});const E=[];n.titulos.forEach(o=>E.push({idd:o.order,label:o.label,type:o.type}));let j=()=>{try{if(l.valido=!0,!e.nombre||!e.tipo)throw l.valido=!1,console.log(e.nombre,"form.nombre"),console.log(e.tipo,"form.tipo"),new Error("BreakException");e.centro_id.forEach(o=>{if(o.value===0)throw l.valido=!1,console.log(o,"element"),new Error("BreakException")})}catch{}};const b=()=>{j(),l.valido?e.post(route("disponibilidad.store"),{preserveScroll:!0,onSuccess:()=>{u("close"),e.reset()},onError:()=>null,onFinish:()=>null}):(l.mensajeError="Hay elementos vacios",alert(l.mensajeError))};F(()=>{n.show&&(e.errors={})});function x(){l.centros.push(0),e.centro_id.push(n.losSelect[0])}let S=()=>{l.centros.length=l.centros.length-1,e.centro_id.length=e.centro_id.length-1};const C=[{title:"Seleccione un tipo",value:0},{title:"Programado",value:"Programado"},{title:"No programado",value:"No programado"}];return(o,t)=>(f(),p("section",D,[r(T,{show:n.show,onClose:t[5]||(t[5]=i=>u("close"))},{default:m(()=>[a("form",{class:"p-6",onSubmit:M(b,["prevent"])},[a("div",L,[a("h2",A,d(o.lang().label.add)+" "+d(n.title),1),a("div",G,[a("div",I,[r(y,{for:"nombre",value:o.lang().label.nombre},null,8,["value"]),r(z,{id:"nombre",type:"text",class:"h-9 mt-1 block w-full",modelValue:s(e).nombre,"onUpdate:modelValue":t[0]||(t[0]=i=>s(e).nombre=i),required:"",placeholder:o.nombre,error:s(e).errors.nombre},null,8,["modelValue","placeholder","error"]),r(v,{class:"mt-2",message:s(e).errors.nombre},null,8,["message"])]),a("div",null,[r(y,{for:"tipo",value:o.lang().label.Tipo},null,8,["value"]),r(s(h),{options:C,label:"title",class:"mt-1 dark:bg-gray-500 rounded-lg dark:text-gray-600",modelValue:s(e).tipo,"onUpdate:modelValue":t[1]||(t[1]=i=>s(e).tipo=i)},null,8,["modelValue"])]),(f(!0),p(U,null,H(l.centros,(i,_)=>(f(),p("div",J,[t[6]||(t[6]=a("label",{name:"labelSelectVue",class:"dark:text-white"}," Centro de trabajo ",-1)),r(s(h),{options:n.losSelect,label:"title",class:"dark:bg-gray-500 rounded-lg dark:text-gray-600",modelValue:s(e).centro_id[_],"onUpdate:modelValue":$=>s(e).centro_id[_]=$},null,8,["options","modelValue","onUpdate:modelValue"]),r(v,{class:"mt-2",message:s(e).errors.centro_id},null,8,["message"])]))),256))]),a("div",K,[r(g,{type:"button",disabled:s(e).processing,onClick:t[2]||(t[2]=i=>x())},{default:m(()=>t[7]||(t[7]=[c(" Mas centros ")])),_:1,__:[7]},8,["disabled"]),r(g,{type:"button",disabled:s(e).processing,onClick:t[3]||(t[3]=i=>s(S)())},{default:m(()=>t[8]||(t[8]=[c(" Menos centros ")])),_:1,__:[8]},8,["disabled"])])]),a("div",Q,[a("p",R,d(l.mensajeError),1),r(q,{disabled:s(e).processing,onClick:t[4]||(t[4]=i=>u("close"))},{default:m(()=>[c(d(o.lang().button.close),1)]),_:1},8,["disabled"]),r(g,{class:P(["ml-3",{"opacity-25":s(e).processing}]),disabled:s(e).processing,onClick:b},{default:m(()=>[c(d(o.lang().button.add)+" "+d(s(e).processing?"...":""),1)]),_:1},8,["class","disabled"])])],32)]),_:1},8,["show"])]))}};export{ne as default};
