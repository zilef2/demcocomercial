import{o as t,f as l,b as o,k as N,K as L,j as M,p as A,O as H,l as W,q as j,c,w as h,s as q,g as n,a as u,d as K,t as p,v as y,y as b,u as m,x as O,F as k,m as v}from"./app-551012d8.js";import{_ as R}from"./AuthenticatedLayout-876c1694.js";import{_ as $}from"./TextInput-4b8270d6.js";import{_ as T}from"./PrimaryButton-bd076b11.js";import{_ as J}from"./SelectInput-de862fb7.js";import{_ as V}from"./DangerButton-1248510a.js";import{a as S,r as Q,_ as X}from"./Pagination-dcee69fa.js";import Y from"./Create-be0d12d3.js";import Z from"./Edit-b1bdda01.js";import ee from"./TerminarReporte-f2a172d6.js";import re from"./Delete-b342d576.js";import te from"./DeleteBulk-9a1a335d.js";import{_ as se}from"./Checkbox-f37bd788.js";import{_ as B}from"./InfoButton-f9740252.js";import{c as z,n as g,f as w}from"./global-6d1c7c87.js";import{C as oe}from"./vue-select.es-e7a5a940.js";/* empty css                   *//* empty css             */import{r as ae}from"./PencilIcon-7035d21d.js";import{r as le}from"./Toast-07128877.js";import"./index-6dbb85e0.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./open-closed-305ccb86.js";import"./InputError-23c0a787.js";import"./InputLabel-8615b764.js";import"./Modal-e8455b5b.js";import"./SecondaryButton-ec5b0153.js";import"./vue-datepicker-b15d2936.js";/* empty css                                              */function ne(_,s){return t(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M11.47 2.47a.75.75 0 011.06 0l3.75 3.75a.75.75 0 01-1.06 1.06l-2.47-2.47V21a.75.75 0 01-1.5 0V4.81L8.78 7.28a.75.75 0 01-1.06-1.06l3.75-3.75z","clip-rule":"evenodd"})])}function de(_,s){return t(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[o("path",{"fill-rule":"evenodd",d:"M1.72 5.47a.75.75 0 011.06 0L9 11.69l3.756-3.756a.75.75 0 01.985-.066 12.698 12.698 0 014.575 6.832l.308 1.149 2.277-3.943a.75.75 0 111.299.75l-3.182 5.51a.75.75 0 01-1.025.275l-5.511-3.181a.75.75 0 01.75-1.3l3.943 2.277-.308-1.149a11.194 11.194 0 00-3.528-5.617l-3.809 3.81a.75.75 0 01-1.06 0L1.72 6.53a.75.75 0 010-1.061z","clip-rule":"evenodd"})])}const ie={class:"face"},pe=o("div",{class:"hand"},[o("div",{class:"hand"},[o("div",{class:"hour"}),o("div",{class:"minute"})])],-1),me=[pe],ce={__name:"ClockWorking",props:{},setup(_){return(s,P)=>(t(),l("div",ie,me))}};const ue={class:"space-y-4"},ye={class:"px-4 sm:px-0"},_e={class:"grid grid-cols-1 sm:grid-cols-3 xs:gap-y-2 items-center rounded-lg overflow-hidden w-full mt-1"},fe={class:"bg-white dark:bg-gray-950 shadow sm:rounded-lg 2xl:rounded-2xl relative z-20 -pt-2 pb-2"},he={class:"flex relative z-20 px-2 my-1 h-20 overflow-x-auto overflow-y-hidden py-2"},be={class:"inline-flex gap-6"},ge={key:1,class:"mx-1 mt-4 w-40 flex gap-4"},ke={class:"my-1"},ve=o("label",{for:"soloval",class:"text-sm mx-2 whitespace-nowrap"},"Tiempo Estimado",-1),xe={class:"inline-flex my-1"},we=o("label",{for:"soloval",class:"text-sm mx-2 whitespace-nowrap"},"Mostrar todos",-1),Ce={key:0,class:"mt-4 flex flex-inline gap-4"},Oe={class:"mx-4 relative z-20"},$e={class:"bg-white dark:bg-gray-950 shadow sm:rounded-lg relative z-10"},Te={class:"flex max-h-[630px] overflow-y-scroll"},Pe={key:0,class:"w-full"},je={class:"-mt-1 top-0 bg-gray-200 sticky capitalize text-sm dark:border-gray-700 dark:bg-black"},Ve={class:"dark:bg-gray-900/50 text-left"},Se={key:0,class:"px-2 py-4 text-center dark:bg-black"},Be=o("th",{class:"px-2 py-4"},"Accion",-1),ze=o("th",{class:"px-2 py-4 text-center"},"#",-1),Ie=["onClick"],Ge={class:"flex justify-between items-center"},De={key:0,class:"w-full bg-white border border-blue-500 inamovible"},Ee={class:"dark:bg-gray-900/50 text-left"},Ue=o("th",{class:"px-2 py-4"},null,-1),Fe=o("th",{class:"px-2 py-4"},null,-1),Ne={class:"px-2 py-4 text-center"},Le={class:"px-2 py-4 cursor-pointer"},Me={class:"flex justify-between items-center"},Ae={class:"w-20 text-sm"},He=o("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},null,-1),We=o("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},null,-1),qe=o("td",{class:"whitespace-nowrap py-4 px-2 sm:py-3"},null,-1),Ke={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Re={key:0},Je={key:1},Qe={key:2},Xe={key:3},Ye={key:4},Ze={key:5},er={key:6},rr={key:7},tr={key:8},sr={key:0,class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},or=["value"],ar={class:"whitespace-nowrap py-4 w-12 px-2 sm:py-3"},lr={class:"flex justify-center items-center"},nr={class:"rounded-md overflow-hidden"},dr={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},ir={class:"whitespace-wrap py-4 px-2 sm:py-3"},pr={key:0},mr={key:1},cr={key:2},ur={key:3},yr={key:4},_r={key:5},fr={key:6},hr={key:7},br={key:8},gr={key:1,class:"text-center text-xl my-8"},kr={key:0,class:"flex justify-between items-center p-2 border-t border-gray-200 dark:border-gray-700"},Qr={__name:"Index",props:{fromController:Object,total:Number,filters:Object,breadcrumbs:Object,perPage:Number,title:String,numberPermissions:Number,losSelect:Object,valuesGoogleCabeza:Object,valuesGoogleBody:Object,Trabajadores:Object,losOT:Object},setup(_){const s=_,{_:P,debounce:I,pickBy:G}=q,r=N({params:{search:s.filters.searchDate,search2:s.filters.search2,field:s.filters.field,order:s.filters.order,perPage:s.perPage,searchdia:s.filters.searchdia,soloTiEstimado:s.filters.soloTiEstimado,ultimosmeses:s.filters.ultimosmeses,FiltroCentro:s.filters.FiltroCentro},generico:null,selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,TerminarOpen:!1,deleteOpen:!1,dataSet:L().props.app.perpage,totalEmpleados:0,deleteBulkOpen:!1,hayCongelado:0});M(()=>{});const D=(d,a)=>{a&&(r.params.field=d,r.params.order=r.params.order==="asc"?"desc":"asc")};A(()=>P.cloneDeep(r.params),I(()=>{let d=G(r.params);H.get(route("reporte.index"),d,{replace:!0,preserveState:!0,preserveScroll:!0})},350));const E=d=>{var a;d.target.checked===!1?r.selectedId=[]:(a=s.fromController)==null||a.data.forEach(f=>{r.selectedId.push(f.id)})},U=()=>{var d;r.multipleSelect=((d=s.reportes)==null?void 0:d.data.length)===r.selectedId.length};W(()=>{});const x=[{order:"fecha",label:"fecha",type:"date",CanOrder:!0},{order:"operario_id",label:"operario",type:"foreign",nameid:"operario_s",CanOrder:!0},{order:"hora_inicial",label:"hora inicial",type:"time",CanOrder:!0},{order:"hora_final",label:"hora final",type:"time",CanOrder:!0},{order:"tiempo_transcurrido",label:"Tiempo Transcurrido (mins)",type:"decimal",nameid:"tiempo_transcurrido",CanOrder:!0},{order:"TiempoEstimado",label:"TiempoEstimado",type:"text",CanOrder:!0},{order:"actividad_id",label:"actividad",type:"foreign",nameid:"actividad_s",CanOrder:!0},{order:"centrotrabajo_id",label:"centrotrabajo",type:"foreign",nameid:"centrotrabajo_s",CanOrder:!0},{order:"OTItem",label:"CD o OT",type:"text",CanOrder:!1},{order:"disponibilidad_id",label:"disponibilidad",type:"foreign",nameid:"disponibilidad_s",CanOrder:!0},{order:"reproceso_id",label:"reproceso",type:"foreign",nameid:"reproceso_s",CanOrder:!0}];return(d,a)=>{const f=j("tooltip"),F=j("sticky");return t(),c(R,null,{default:h(()=>[o("div",ue,[o("div",ye,[o("div",_e,[d.can(["create reporte"])?(t(),c(Y,{key:0,numberPermissions:s.numberPermissions,show:r.createOpen,onClose:a[0]||(a[0]=e=>r.createOpen=!1),title:s.title,losSelect:s.losSelect,valuesGoogleCabeza:s.valuesGoogleCabeza,valuesGoogleBody:s.valuesGoogleBody,Trabajadores:s.Trabajadores,losOT:s.losOT},null,8,["numberPermissions","show","title","losSelect","valuesGoogleCabeza","valuesGoogleBody","Trabajadores","losOT"])):n("",!0),d.can(["update reporte"])&&_.numberPermissions>1?(t(),c(Z,{key:1,numberPermissions:s.numberPermissions,show:r.editOpen,onClose:a[1]||(a[1]=e=>r.editOpen=!1),generica:r.generico,title:s.title,losSelect:s.losSelect,valuesGoogleCabeza:s.valuesGoogleCabeza,valuesGoogleBody:s.valuesGoogleBody,Trabajadores:s.Trabajadores},null,8,["numberPermissions","show","generica","title","losSelect","valuesGoogleCabeza","valuesGoogleBody","Trabajadores"])):n("",!0),d.can(["read reporte"])?(t(),c(ee,{key:2,numberPermissions:s.numberPermissions,show:r.TerminarOpen,onClose:a[2]||(a[2]=e=>r.TerminarOpen=!1),generica:r.generico,title:s.title},null,8,["numberPermissions","show","generica","title"])):n("",!0),d.can(["delete reporte"])?(t(),c(re,{key:3,numberPermissions:s.numberPermissions,show:r.deleteOpen,onClose:a[3]||(a[3]=e=>r.deleteOpen=!1),generica:r.generico,title:s.title},null,8,["numberPermissions","show","generica","title"])):n("",!0),u(te,{show:r.deleteBulkOpen,onClose:a[4]||(a[4]=e=>(r.deleteBulkOpen=!1,r.multipleSelect=!1,r.selectedId=[])),selectedId:r.selectedId,title:s.title},null,8,["show","selectedId","title"])])]),o("div",fe,[o("div",he,[o("div",be,[u(J,{modelValue:r.params.perPage,"onUpdate:modelValue":a[5]||(a[5]=e=>r.params.perPage=e),dataSet:r.dataSet,class:"mx-auto mt-4"},null,8,["modelValue","dataSet"]),d.can(["create reporte"])?(t(),c(T,{key:0,class:"rounded-md mt-4 mx-4 items-center w-[160px]",onClick:a[6]||(a[6]=e=>r.createOpen=!0)},{default:h(()=>[K(p(d.lang().button.add)+" "+p(s.title),1)]),_:1})):n("",!0),y((t(),c(V,{onClick:a[7]||(a[7]=e=>r.deleteBulkOpen=!0),class:"px-3 py-1.5 h-10 my-auto"},{default:h(()=>[u(m(S),{class:"w-5 h-5"})]),_:1})),[[b,r.selectedId.length!==0&&d.can(["delete reporte"])],[f,d.lang().tooltip.delete_selected]]),y((t(),c(T,{onClick:a[8]||(a[8]=e=>r.hayCongelado=r.selectedId[0]),class:"px-3 py-1.5 h-10 my-auto"},{default:h(()=>[u(m(ne),{class:"w-5 h-5"})]),_:1})),[[b,r.selectedId.length!==0&&d.can(["delete reporte"])],[f,"Congelar"]]),_.numberPermissions>1?(t(),l("div",ge,[o("div",ke,[ve,_.filters!==null?y((t(),l("input",{key:0,"onUpdate:modelValue":a[9]||(a[9]=e=>r.params.soloTiEstimado=e),id:"soloval",type:"checkbox",class:"bg-gray-200 h-5 w-5 ml-[12px]"},null,512)),[[O,r.params.soloTiEstimado]]):n("",!0),o("div",xe,[we,_.filters!==null?y((t(),l("input",{key:0,"onUpdate:modelValue":a[10]||(a[10]=e=>r.params.ultimosmeses=e),id:"soloval",type:"checkbox",class:"bg-gray-200 h-5 w-5 ml-[34px]"},null,512)),[[O,r.params.ultimosmeses]]):n("",!0)])])])):n("",!0)]),_.numberPermissions>1?(t(),l("div",Ce,[o("div",Oe,[u(m(oe),{options:s.losSelect.centrotrabajo,label:"title",class:"dark:bg-gray-400 mt-3 w-[300px] fixed z-20",modelValue:r.params.FiltroCentro,"onUpdate:modelValue":a[11]||(a[11]=e=>r.params.FiltroCentro=e),"append-to-body":""},null,8,["options","modelValue"])]),s.numberPermissions>1?(t(),c($,{key:0,modelValue:r.params.searchdia,"onUpdate:modelValue":a[12]||(a[12]=e=>r.params.searchdia=e),type:"number",max:"31",min:"0",class:"mx-1 xl:mr-2 w-32 rounded-lg sm:h-6 lg:h-12 mt-1",placeholder:"Día"},null,8,["modelValue"])):n("",!0),s.numberPermissions>1?(t(),c($,{key:1,modelValue:r.params.search2,"onUpdate:modelValue":a[13]||(a[13]=e=>r.params.search2=e),type:"text",class:"mx-2 w-72 rounded-lg h-6 lg:h-12 mt-1",placeholder:"Persona"},null,8,["modelValue"])):n("",!0),s.numberPermissions>1?(t(),c($,{key:2,modelValue:r.params.searchDate,"onUpdate:modelValue":a[14]||(a[14]=e=>r.params.searchDate=e),type:"date",class:"mx-1 xl:mr-2 w-32 rounded-lg sm:h-6 lg:h-12 mt-1"},null,8,["modelValue"])):n("",!0)])):n("",!0)])]),o("div",$e,[o("div",Te,[s.total>0?(t(),l("table",Pe,[o("thead",je,[o("tr",Ve,[s.numberPermissions>1?(t(),l("th",Se,[u(se,{checked:r.multipleSelect,"onUpdate:checked":a[15]||(a[15]=e=>r.multipleSelect=e),onChange:E},null,8,["checked"])])):n("",!0),Be,ze,(t(),l(k,null,v(x,e=>o("th",{class:"px-2 py-4 cursor-pointer min-w-min",onClick:C=>D(e.order,e.CanOrder)},[o("div",Ge,[o("span",null,p(d.lang().label[e.label]),1),e.CanOrder?(t(),c(m(Q),{key:0,class:"w-4 h-4"})):n("",!0)])],8,Ie)),64))])]),o("tbody",null,[r.hayCongelado!==0?y((t(),l("div",De,[o("tr",Ee,[Ue,Fe,o("th",Ne,[y((t(),c(T,{onClick:a[16]||(a[16]=e=>r.hayCongelado=0),class:"px-3 py-1.5"},{default:h(()=>[u(m(de),{class:"w-5 h-5"})]),_:1})),[[b,r.hayCongelado&&d.can(["delete reporte"])],[f,"Descongelar"]])]),(t(),l(k,null,v(x,e=>o("th",Le,[o("div",Me,[o("p",Ae,p(d.lang().label[e.label]),1)])])),64))]),o("tr",null,[He,We,qe,(t(),l(k,null,v(x,e=>o("td",Ke,[e.type==="text"?(t(),l("span",Re,p(s.fromController.data[0][e.order]),1)):n("",!0),e.type==="time"?(t(),l("span",Je,p(m(z)(s.fromController.data[0][e.order])),1)):n("",!0),e.type==="number"?(t(),l("span",Qe,p(m(g)(s.fromController.data[0][e.order],0,!1)),1)):n("",!0),e.type==="decimal"?(t(),l("span",Xe,p(m(g)(s.fromController.data[0][e.order],1,!1)),1)):n("",!0),e.type==="dinero"?(t(),l("span",Ye,p(m(g)(s.fromController.data[0][e.order],0,!0)),1)):n("",!0),e.type==="date"?(t(),l("span",Ze,p(m(w)(s.fromController.data[0][e.order],"")),1)):n("",!0),e.type==="datetime"?(t(),l("span",er,p(m(w)(s.fromController.data[0][e.order],"conLaHora")),1)):n("",!0),e.type==="foreign"?(t(),l("span",rr,p(s.fromController.data[0][e.nameid]),1)):n("",!0),e.order==="hora_final"&&s.fromController.data[0][e.order]==null?(t(),l("span",tr," - ")):n("",!0)])),64))])])),[[F,{zIndex:100}]]):n("",!0),(t(!0),l(k,null,v(s.fromController.data,(e,C)=>(t(),l("tr",{key:C,class:"hover:dark:bg-gray-900/20"},[s.numberPermissions>1?(t(),l("td",sr,[y(o("input",{class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",onChange:U,value:e.id,"onUpdate:modelValue":a[17]||(a[17]=i=>r.selectedId=i)},null,40,or),[[O,r.selectedId]])])):n("",!0),o("td",ar,[o("div",lr,[o("div",nr,[y((t(),c(B,{type:"button",onClick:i=>(r.editOpen=!0,r.generico=e),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[u(m(ae),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[b,d.can(["update reporte"])],[f,d.lang().tooltip.edit]]),e.hora_final?n("",!0):y((t(),c(B,{key:0,type:"button",onClick:i=>(r.TerminarOpen=!0,r.generico=e),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[u(m(le),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[b,d.can(["create reporte"])],[f,d.lang().tooltip.finalizarTarea]]),y((t(),c(V,{type:"button",onClick:i=>(r.deleteOpen=!0,r.generico=e),class:"px-2 py-1.5 rounded-none"},{default:h(()=>[u(m(S),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[b,d.can(["delete reporte"])],[f,d.lang().tooltip.delete]])])])]),o("td",dr,p(++C),1),(t(),l(k,null,v(x,i=>o("td",ir,[i.type==="text"?(t(),l("span",pr,p(e[i.order]),1)):n("",!0),i.type==="time"?(t(),l("span",mr,p(m(z)(e[i.order])),1)):n("",!0),i.type==="number"?(t(),l("span",cr,p(m(g)(e[i.order],0,!1)),1)):n("",!0),i.type==="decimal"?(t(),l("span",ur,p(m(g)(e[i.order],1,!1)),1)):n("",!0),i.type==="dinero"?(t(),l("span",yr,p(m(g)(e[i.order],0,!0)),1)):n("",!0),i.type==="date"?(t(),l("span",_r,p(m(w)(e[i.order],"")),1)):n("",!0),i.type==="datetime"?(t(),l("span",fr,p(m(w)(e[i.order],"conLaHora")),1)):n("",!0),i.type==="foreign"?(t(),l("span",hr,p(e[i.nameid]),1)):n("",!0),i.order==="hora_final"&&e[i.order]==null?(t(),l("span",br,[u(ce)])):n("",!0)])),64))]))),128))])])):(t(),l("h2",gr,"Sin Registros"))]),s.total>0?(t(),l("div",kr,[u(X,{links:s.fromController,filters:r.params},null,8,["links","filters"])])):n("",!0)])])]),_:1})}}};export{Qr as default};
