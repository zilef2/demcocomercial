import{k as W,T as G,j as J,l as K,p as N,f as m,a as r,w as f,o as u,b as s,t as c,F as T,m as B,u as a,g as I,d as _,v as O,B as R,c as Q,n as X,e as Y}from"./app-551012d8.js";import{_ as g}from"./InputError-23c0a787.js";import{_ as b}from"./InputLabel-8615b764.js";import{M as Z}from"./Modal-e8455b5b.js";import{_ as ee}from"./PrimaryButton-bd076b11.js";import{_ as le}from"./SecondaryButton-ec5b0153.js";import{_ as h}from"./TextInput-4b8270d6.js";/* empty css             */import{C as oe}from"./vue-select.es-e7a5a940.js";/* empty css                   */import P from"./Add_Sub_equipos-f939d446.js";const se={class:"space-y-6"},ae=["onSubmit"],te={class:"text-xl 2xl:text-3xl font-bold tracking-tight text-gray-900 dark:text-white my-6"},re={class:"grid grid-cols-1 md:grid-cols-2 2xl:grid-cols-4 gap-8"},ie={key:0,id:"SelectVue"},de={key:1,class:""},ne={key:2,class:""},ce=s("hr",{class:"border-collapse border border-b-2 border-gray-300 my-4"},null,-1),ue=s("h2",{class:"text-lg 2xl:text-2xl font-medium text-gray-900 dark:text-gray-100 mt-3"}," Agrege los equipos ",-1),pe={class:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-6 gap-16 my-4"},me=["name"],_e={class:"grid grid-cols-2 mt-2"},ge={class:"mx-1 mt-6 text-lg"},be=s("b",null,"Val Unitario: ",-1),he={class:"inline-block"},ve=s("label",{class:"font-semibold"},"Cantidad:",-1),ye=["onUpdate:modelValue"],qe={class:"inline-block col-span-full"},fe=s("label",{class:"font-semibold"},"Total Equipo:",-1),Ve=["onUpdate:modelValue"],ke=s("hr",{class:"border-[1px] border-gray-300 my-2 col-span-full"},null,-1),xe={class:"flex"},we={class:"inline-block mx-1 text-sm"},Ue=s("b",null,"Tipo: ",-1),Ee={class:"inline-block mx-1 text-sm"},Se=s("b",null,"Ref: ",-1),Ce={class:"inline-block mx-1 text-sm"},Me=s("b",null,"Marca: ",-1),$e={class:"inline-block mx-1 text-sm"},je=s("b",null,"Unidad: ",-1),Fe=s("hr",{class:"border-collapse border border-b-2 border-gray-300 my-4"},null,-1),Ne=s("h2",{class:"text-lg 2xl:text-2xl font-medium text-gray-900 dark:text-gray-100 mt-3"}," Total del item ",-1),Te={class:"grid grid-cols-1 md:grid-cols-3 2xl:grid-cols-5 gap-8 my-8 hover:bg-gray-50"},Be={class:"col-span-1"},Ie={class:"col-span-1"},Oe={class:"col-span-1"},Re={class:"my-8 flex justify-end"},Xe={__name:"Create",props:{show:Boolean,title:String,roles:Object,titulos:Object,losSelect:Object,numberPermissions:Number},emits:["close"],setup(z,{emit:y}){const p=z,t=W({params:{pregunta:""},subtotal:0,equipos:[{equipo_selec:null,cantidad:1}]});function V(o){for(;t.equipos.length<o;)t.equipos.push({equipo_selec:null,cantidad:1});for(;t.equipos.length>o;)t.equipos.pop()}const A=["numero","valor_unitario_item","valor_total_item","oferta_id","conteo_items","cantidad"],D=[];let H=p.titulos.map(o=>{if(!D.includes(o.order))return o.order});const q=[];p.titulos.forEach(o=>{A.includes(o.order)||q.push({idd:o.order,label:o.label,type:o.type})});const e=G({...Object.fromEntries(H.map(o=>[o,""]))});J(()=>{if(e.conteo_items=1,p.numberPermissions>9){const o=Math.floor(Math.random()*90+1);e.numero="numero gen "+o,e.nombre="nombre gen "+o,e.descripcion="descripcion gen "+o,e.valor_unitario_item=0,e.cantidad=0}}),K(()=>{p.show&&(e.errors={})}),N(()=>e.cantidad,()=>k(),{deep:!0}),N(()=>t.equipos,()=>k(),{deep:!0});function k(){t.equipos.forEach((o,d)=>{var n;const l=parseFloat((n=o==null?void 0:o.equipo_selec)==null?void 0:n.Valor_Unit)||0,i=parseInt(o==null?void 0:o.cantidad)||0;l&&i&&(t.equipos[d].subtotalequip=l*i)}),console.table(t.equipos),e.valor_unitario_item=0,t.equipos.forEach(o=>{e.valor_unitario_item+=parseFloat(o.subtotalequip)||0}),e.valor_total_item=e.valor_unitario_item*e.cantidad}function L(){let o=!0;return q.forEach(d=>{if(!e[d.idd])return o=!1,o}),o}const x=()=>{L()?e.post(route("Item.store"),{preserveScroll:!0,onSuccess:()=>{y("close"),e.reset()},onError:()=>null,onFinish:()=>null}):console.log("Hay campos vacios")};return(o,d)=>(u(),m("section",se,[r(Z,{show:p.show,onClose:d[4]||(d[4]=l=>y("close")),maxWidth:"xl10"},{default:f(()=>[s("form",{class:"py-12 px-8 xl:px-20 mb-16",onSubmit:Y(x,["prevent"])},[s("h2",te," 🛠️ Registrar Nuevo "+c(p.title),1),s("div",re,[(u(),m(T,null,B(q,(l,i)=>s("div",{key:i},[l.type==="time"?(u(),m("div",ie,[r(b,{for:l.label,value:o.lang().label[l.label]},null,8,["for","value"]),r(h,{id:l.idd,type:l.type,class:"mt-1 block w-full",modelValue:a(e)[l.idd],"onUpdate:modelValue":n=>a(e)[l.idd]=n,required:"",placeholder:l.label,error:a(e).errors[l.idd],step:"3600"},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder","error"]),r(g,{class:"mt-2",message:a(e).errors[l.idd]},null,8,["message"])])):l.type==="integer"?(u(),m("div",de,[r(b,{for:l.label,value:o.lang().label[l.label]},null,8,["for","value"]),r(h,{id:l.idd,type:"number",class:"mt-1 block w-full",modelValue:a(e)[l.idd],"onUpdate:modelValue":n=>a(e)[l.idd]=n,required:"",placeholder:l.label,error:a(e).errors[l.idd]},null,8,["id","modelValue","onUpdate:modelValue","placeholder","error"]),r(g,{class:"mt-2",message:a(e).errors[l.idd]},null,8,["message"])])):l.type==="text"||l.type==="string"?(u(),m("div",ne,[r(b,{for:l.label,value:o.lang().label[l.label]+" del Item"},null,8,["for","value"]),r(h,{id:l.idd,type:l.type,class:"mt-1 block w-full",modelValue:a(e)[l.idd],"onUpdate:modelValue":n=>a(e)[l.idd]=n,required:"",placeholder:l.label,error:a(e).errors[l.idd]},null,8,["id","type","modelValue","onUpdate:modelValue","placeholder","error"]),r(g,{class:"mt-2",message:a(e).errors[l.idd]},null,8,["message"])])):I("",!0)])),64))]),ce,ue,r(P,{initialEquipos:t.equipos.length,onUpdateEquipos:V},null,8,["initialEquipos"]),s("div",pe,[(u(!0),m(T,null,B(t.equipos,(l,i)=>{var n,w,U,E,S,C,M,$,j,F;return u(),m("div",{key:i,id:"SelectVue",class:"col-span-2 xl:col-span-2"},[s("label",{name:"labelSelectVue_"+i},"Equipo "+c(i+1),9,me),r(a(oe),{options:p.losSelect.Equipo,modelValue:t.equipos[i].equipo_selec,"onUpdate:modelValue":v=>t.equipos[i].equipo_selec=v,label:"title",class:"mt-1 block w-full col-span-2"},null,8,["options","modelValue","onUpdate:modelValue"]),s("div",_e,[s("label",ge,[be,_(c(((w=(n=t.equipos[i])==null?void 0:n.equipo_selec)==null?void 0:w.Valor_Unit)??""),1)]),s("div",he,[ve,O(s("input",{type:"number",min:"1","onUpdate:modelValue":v=>t.equipos[i].cantidad=v,class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 rounded-md shadow-sm mt-1 block w-full"},null,8,ye),[[R,t.equipos[i].cantidad,void 0,{number:!0}]])]),s("div",qe,[fe,O(s("input",{type:"number",disabled:"","onUpdate:modelValue":v=>t.equipos[i].subtotalequip=v,class:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 bg-gray-300 dark:bg-gray-600 rounded-md shadow-sm mt-1 block w-full"},null,8,Ve),[[R,t.equipos[i].subtotalequip,void 0,{number:!0}]])]),ke,s("div",xe,[s("label",we,[Ue,_(c(((E=(U=t.equipos[i])==null?void 0:U.equipo_selec)==null?void 0:E.Tipo)??""),1)]),s("label",Ee,[Se,_(c(((C=(S=t.equipos[i])==null?void 0:S.equipo_selec)==null?void 0:C.Referencia)??""),1)]),s("label",Ce,[Me,_(c((($=(M=t.equipos[i])==null?void 0:M.equipo_selec)==null?void 0:$.Marca)??""),1)]),s("label",$e,[je,_(c(((F=(j=t.equipos[i])==null?void 0:j.equipo_selec)==null?void 0:F.Uni)??""),1)])])])])}),128))]),t.equipos.length>6?(u(),Q(P,{key:0,initialEquipos:t.equipos.length,onUpdateEquipos:V},null,8,["initialEquipos"])):I("",!0),Fe,Ne,s("div",Te,[s("div",Be,[r(b,{value:o.lang().label.cantidad+" del Item"},null,8,["value"]),r(h,{type:"number",class:"mt-1 block w-full",modelValue:a(e).cantidad,"onUpdate:modelValue":d[0]||(d[0]=l=>a(e).cantidad=l),required:"",placeholder:o.lang().placeholder.cantidad,max:"10000000",error:a(e).errors.cantidad},null,8,["modelValue","placeholder","error"]),r(g,{class:"mt-2",message:a(e).errors.cantidad},null,8,["message"])]),s("div",Ie,[r(b,{value:o.lang().label.valor_unitario_item},null,8,["value"]),r(h,{type:"number",class:"mt-1 block w-full bg-gray-300",modelValue:a(e).valor_unitario_item,"onUpdate:modelValue":d[1]||(d[1]=l=>a(e).valor_unitario_item=l),disabled:"",placeholder:o.lang().placeholder.valor_unitario_item,error:a(e).errors.valor_unitario_item},null,8,["modelValue","placeholder","error"]),r(g,{class:"mt-2",message:a(e).errors.valor_unitario_item},null,8,["message"])]),s("div",Oe,[r(b,{value:o.lang().label.valor_total_item},null,8,["value"]),r(h,{type:"number",class:"mt-1 block w-full bg-gray-300",modelValue:a(e).valor_total_item,"onUpdate:modelValue":d[2]||(d[2]=l=>a(e).valor_total_item=l),disabled:"",placeholder:o.lang().placeholder.valor_total_item,error:a(e).errors.valor_total_item},null,8,["modelValue","placeholder","error"]),r(g,{class:"mt-2",message:a(e).errors.valor_total_item},null,8,["message"])])]),s("div",Re,[r(le,{disabled:a(e).processing,onClick:d[3]||(d[3]=l=>y("close"))},{default:f(()=>[_(c(o.lang().button.close),1)]),_:1},8,["disabled"]),r(ee,{class:X(["ml-3",{"opacity-25":a(e).processing}]),disabled:a(e).processing,onClick:x},{default:f(()=>[_(c(o.lang().button.add)+" "+c(a(e).processing?"...":""),1)]),_:1},8,["class","disabled"])])],40,ae)]),_:1},8,["show"])]))}};export{Xe as default};
