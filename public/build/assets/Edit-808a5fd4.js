import{k as M,T as B,j as N,l as O,p as F,f as p,a as r,w as d,o as b,b as i,t as c,u as t,F as U,m as D,d as u,n as H,e as T}from"./app-551012d8.js";import{_ as v}from"./InputError-23c0a787.js";import{_ as h}from"./InputLabel-8615b764.js";import{M as P}from"./Modal-e8455b5b.js";import{_ as f}from"./PrimaryButton-bd076b11.js";import{_ as q}from"./SecondaryButton-ec5b0153.js";import{_ as z}from"./TextInput-4b8270d6.js";import{C as y}from"./vue-select.es-e7a5a940.js";/* empty css                   */import"./vue-datepicker-b15d2936.js";import{r as L,a as A}from"./XCircleIcon-546f2445.js";const G={class:"space-y-6"},I=["onSubmit"],J={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},K={class:"grid grid-cols-1 md:grid-cols-2 gap-6 pb-56 scrollbar-sidebar"},Q={class:""},R={id:"SelectVue"},W=i("label",{name:"labelSelectVue",class:"dark:text-white"}," Centro de trabajo ",-1),X={class:"flex my-5 gap-8"},Y={class:"my-8 flex justify-end"},ce={__name:"Edit",props:{show:Boolean,title:String,generica:Object,titulos:Object,losSelect:Object},emits:["close"],setup(w,{emit:m}){const l=w,a=M({centros:[0],valido:!0,mensajeError:""}),k=l.titulos.map(o=>o.order),e=B({...Object.fromEntries(k.map(o=>[o,""])),centro_id:[l.losSelect[0]]});N(()=>{});const E=[];l.titulos.forEach(o=>{E.push({idd:o.order,label:o.label,type:o.type,value:e[o.order]})});function V(){a.centros.push(0),e.centro_id.push(l.losSelect[0])}let j=()=>{a.centros.length=a.centros.length-1,e.centro_id.length=e.centro_id.length-1};function S(){a.centros=l.generica.centro_trabajos,a.centros.map((o,s)=>{let n={title:o.nombre,value:o.id};return e.centro_id[s]=n,n})}O(()=>{l.show?(e.errors={},l.titulos.forEach(o=>{e[o.order]=l.generica[o.order]})):e.centro_id[0]={title:"Disponibilidad no seleccionada",value:0}}),F(()=>l.show,o=>{o&&S()});let C=()=>{try{if(a.valido=!0,!e.nombre||!e.tipo)throw a.valido=!1,console.log(e.nombre,"form.nombre"),console.log(e.tipo,"form.tipo"),new Error("BreakException");e.centro_id.forEach(o=>{if(o.value===0)throw a.valido=!1,new Error("BreakException")})}catch{a.valido=!1}};const g=()=>{var o;C(),a.valido?e.put(route("disponibilidad.update",(o=l.generica)==null?void 0:o.id),{preserveScroll:!0,onSuccess:()=>{m("close"),e.reset()},onError:()=>null,onFinish:()=>null}):(a.mensajeError="Hay elementos vacios",alert(a.mensajeError))},$=[{title:"Seleccione un tipo",value:0},{title:"Programado",value:"Programado"},{title:"No programado",value:"No programado"}];return(o,s)=>(b(),p("section",G,[r(P,{show:l.show,onClose:s[5]||(s[5]=n=>m("close"))},{default:d(()=>[i("form",{class:"p-6",onSubmit:T(g,["prevent"])},[i("h2",J,c(o.lang().label.edit)+" "+c(l.title),1),i("div",K,[i("div",Q,[r(h,{for:"nombre",value:o.lang().label.nombre},null,8,["value"]),r(z,{id:"nombre",type:"text",class:"mt-1 block w-full",modelValue:t(e).nombre,"onUpdate:modelValue":s[0]||(s[0]=n=>t(e).nombre=n),required:"",placeholder:o.nombre,error:t(e).errors.nombre},null,8,["modelValue","placeholder","error"]),r(v,{class:"mt-2",message:t(e).errors.nombre},null,8,["message"])]),i("div",null,[r(h,{for:"tipo",value:o.lang().label.Tipo},null,8,["value"]),r(t(y),{options:$,label:"title",class:"mt-1 dark:bg-gray-500 rounded-lg dark:text-gray-600",modelValue:t(e).tipo,"onUpdate:modelValue":s[1]||(s[1]=n=>t(e).tipo=n)},null,8,["modelValue"])]),(b(!0),p(U,null,D(a.centros,(n,_)=>(b(),p("div",R,[W,r(t(y),{options:l.losSelect,label:"title",class:"dark:bg-gray-500 rounded-lg dark:text-gray-600",modelValue:t(e).centro_id[_],"onUpdate:modelValue":x=>t(e).centro_id[_]=x},null,8,["options","modelValue","onUpdate:modelValue"]),r(v,{class:"mt-2",message:t(e).errors.centro_id},null,8,["message"])]))),256)),i("div",X,[r(f,{type:"button",disabled:t(e).processing,onClick:s[2]||(s[2]=n=>V())},{default:d(()=>[r(t(L),{class:"w-6 h-6"}),u(" Mas centros ")]),_:1},8,["disabled"]),r(f,{type:"button",class:"bg-red-500",disabled:t(e).processing,onClick:s[3]||(s[3]=n=>t(j)())},{default:d(()=>[r(t(A),{class:"w-6 h-6"}),u(" Menos centros ")]),_:1},8,["disabled"])])]),i("div",Y,[r(q,{disabled:t(e).processing,onClick:s[4]||(s[4]=n=>m("close"))},{default:d(()=>[u(c(o.lang().button.close),1)]),_:1},8,["disabled"]),r(f,{class:H(["ml-3",{"opacity-25":t(e).processing}]),disabled:t(e).processing,onClick:g},{default:d(()=>[u(c(t(e).processing?o.lang().button.save+"...":o.lang().button.save),1)]),_:1},8,["class","disabled"])])],40,I)]),_:1},8,["show"])]))}};export{ce as default};
