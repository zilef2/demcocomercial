import{_ as z}from"./TextInput-CxVKhdog.js";/* empty css             */import b from"./Add_Sub_equipos-h-xPCDm8.js";import{a as B,n as v}from"./global-C5jYNk1l.js";import{C as A}from"./vue-select.es-wsHHmxmz.js";/* empty css                   */import{A as D,l as j,h as I,s as g,f as c,o as p,b as e,c as U,g as E,t as s,F as V,p as F,u as n,a as k}from"./app-Cq1znuMy.js";const O={class:"text-3xl text-center mx-auto mt-6 mb-2 relative drop-shadow-xl w-64 h-12 overflow-hidden rounded-xl bg-gray-800"},$={class:"absolute flex items-center justify-center text-white z-[1] opacity-90 rounded-xl inset-0.5 bg-gray-800"},L={class:"my-2 overflow-auto rounded border border-gray-300 shadow-sm print-container"},M={class:"min-w-full divide-y-2 divide-gray-200"},P={class:"*:text-gray-900 *:first:font-medium"},G={class:"px-3 py-2 whitespace-nowrap"},H={class:"px-3 py-2 whitespace-nowrap min-w-[500px]"},J={class:"hidden print:block text-sm"},K={class:"px-3 py-2 whitespace-nowrap mx-auto text-center"},Q={class:"px-3 py-2 whitespace-nowrap mx-auto text-center"},R={class:"print:flex mx-auto text-center"},W={class:"px-3 py-2 whitespace-nowrap"},X={class:"text-gray-900 text-xl"},Y={class:"px-3 py-2 whitespace-nowrap"},Z={class:"px-3 py-2 whitespace-nowrap"},tt={class:"px-3 py-2 whitespace-nowrap"},pt={__name:"Newitem",props:{valorUnitario:{type:Number,required:!0},initialCantidad:{type:Number,default:1},indexItem:{type:Number,required:!0},losSelect:Object,mostrarDetalles:!0},emits:["updatiItems"],setup(m,{emit:N}){const h=D([]),C=debounce(async(o,a)=>{a(!0);try{const l=await axios.get(route("api.select.equipos"),{params:{q:o}});h.value=l.data}catch(l){console.error(l)}finally{a(!1)}},250),T=N,u=m,t=j({subtotal:0,equipos:[{equipo_selec:null,cantidad:1,subtotalequip:0}],valorItemUnitario:0,cantidadItem:1,valorItemtotal:0});function q(o){for(o<0&&(o=0);t.equipos.length<o;)t.equipos.push({equipo_selec:null,cantidad:1,subtotalequip:0});for(;t.equipos.length>o;)t.equipos.pop()}const d=I(()=>!t.valorItemUnitario||!t.cantidadItem?0:t.valorItemUnitario*t.cantidadItem),S=I(()=>d.value?B(d.value):"");function w(o){t.valorItemUnitario=0,t.equipos.forEach(a=>{a.equipo_selec?(a.subtotalequip=a.cantidad*a.equipo_selec.precio_de_lista,console.log("ðŸš€ ~ ActualizarTotalEquipo ~ equipo.equipo_selec.precio_de_lista: ",a.equipo_selec.precio_de_lista),console.log("ðŸš€ ~ ActualizarTotalEquipo ~ equipo.cantidad: ",a.cantidad)):a.subtotalequip=0,t.valorItemUnitario+=a.subtotalequip}),T("updatiItems",{equipos:t.equipos,valorItemUnitario:t.valorItemUnitario,TotalItem:d,indexItem:u.indexItem,cantidadItem:o,valor_total_item:t.valorItemUnitario*o})}return g(()=>t.equipos,o=>{w(t.cantidadItem)},{deep:!0}),g(()=>t.cantidadItem,o=>{w(o)},{deep:!0}),(o,a)=>(p(),c(V,null,[e("div",O,[e("div",$," Item NÂ° "+s(m.indexItem+1),1),a[1]||(a[1]=e("div",{class:"absolute w-56 h-48 bg-white blur-[50px] -left-1/2 -top-1/2"},null,-1))]),e("div",null,[u.mostrarDetalles?(p(),U(b,{key:0,initialEquipos:t.equipos.length,onUpdatEquipos:q,class:"no-print"},null,8,["initialEquipos"])):E("",!0),e("div",L,[e("table",M,[a[4]||(a[4]=e("thead",{class:"ltr:text-left rtl:text-right"},[e("tr",{class:"*:font-medium *:text-gray-900 bg-gray-900 text-white"},[e("th",{class:"px-3 py-2 whitespace-nowrap"},"#"),e("th",{class:"px-3 py-2 mx-2 whitespace-nowrap min-w-[500px]"},"CÃ³digo"),e("th",{class:"px-3 py-2 whitespace-nowrap"},"Valor Unitario"),e("th",{class:"px-3 py-2 whitespace-nowrap"},"Cantidad"),e("th",{class:"px-3 py-2 whitespace-nowrap"},"Total Equipo:")])],-1)),(p(!0),c(V,null,F(t.equipos,(l,i)=>{var _,x,y,f;return p(),c("tbody",{key:i,class:"divide-y divide-gray-200"},[e("tr",P,[e("td",G," Equipo "+s(i+1),1),e("td",H,[k(n(A),{modelValue:t.equipos[i].equipo_selec,"onUpdate:modelValue":r=>t.equipos[i].equipo_selec=r,options:h.value,reduce:r=>r.value,label:r=>r.title,onSearch:n(C),filterable:!1,"append-to-body":"",placeholder:"Buscar equipo...",class:"print:hidden mt-1 block w-full min-w-[500px] fixed"},null,8,["modelValue","onUpdate:modelValue","options","reduce","label","onSearch"]),e("div",J,s(((x=(_=t.equipos[i])==null?void 0:_.equipo_selec)==null?void 0:x.title)??"Sin selecciÃ³n"),1)]),e("td",K,s((y=t.equipos[i])!=null&&y.equipo_selec?n(v)((f=t.equipos[i])==null?void 0:f.equipo_selec.precio_de_lista,0,1):"Sin valor"),1),e("td",Q,[e("p",R,s(t.equipos[i].cantidad),1)]),e("td",W,s(t.equipos[i].subtotalequip),1)])])}),128)),e("tr",X,[a[2]||(a[2]=e("th",{class:"px-3 py-2 whitespace-nowrap"},"-",-1)),a[3]||(a[3]=e("th",{class:"px-3 py-2 whitespace-nowrap"},"-",-1)),e("th",Y,s(n(v)(t.valorItemUnitario,0,1)),1),e("th",Z,[k(z,{type:"number",class:"min-w-[40px] max-w-[80px] pl-4 border rounded-xl",modelValue:t.cantidadItem,"onUpdate:modelValue":a[0]||(a[0]=l=>t.cantidadItem=l),modelModifiers:{number:!0},required:"",placeholder:o.lang().placeholder.cantidad},null,8,["modelValue","placeholder"])]),e("th",tt,s(S.value),1)])])])]),t.equipos.length>6&&u.mostrarDetalles?(p(),U(b,{key:0,initialEquipos:t.equipos.length,onUpdatEquipos:q,class:"no-print"},null,8,["initialEquipos"])):E("",!0)],64))}};export{pt as default};
